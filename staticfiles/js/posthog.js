(()=>{let e,t,n,i,r,o,s,a;!function(e){let t,n,i,r,o,s,a,l,u,d;var c,h,p,g=Object.defineProperty,f=(e,t,n)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?g(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n},_=Object.defineProperty,m=(e,t,n)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?_(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n},v=((r=v||{})[r.Document=0]="Document",r[r.DocumentType=1]="DocumentType",r[r.Element=2]="Element",r[r.Text=3]="Text",r[r.CDATA=4]="CDATA",r[r.Comment=5]="Comment",r);let y={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},b={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},w={},S={};function C(e,t,n){var i;let r=`${e}.${String(n)}`;if(S[r])return S[r].call(t);let o=null==(i=Object.getOwnPropertyDescriptor(function(e){if(w[e])return w[e];let t=globalThis[e],n=t.prototype,i=e in y?y[e]:void 0,r=!!(i&&i.every(e=>{var t,i;return!!(null==(i=null==(t=Object.getOwnPropertyDescriptor(n,e))?void 0:t.get)?void 0:i.toString().includes("[native code]"))})),o=e in b?b[e]:void 0,s=!!(o&&o.every(e=>{var t;return"function"==typeof n[e]&&(null==(t=n[e])?void 0:t.toString().includes("[native code]"))}));if(r&&s)return w[e]=t.prototype,t.prototype;try{let i=document.createElement("iframe");document.body.appendChild(i);let r=i.contentWindow;if(!r)return t.prototype;let o=r[e].prototype;return document.body.removeChild(i),o?w[e]=o:n}catch{return n}}(e),n))?void 0:i.get;return o?(S[r]=o,o.call(t)):t[n]}let I={childNodes:function(e){return C("Node",e,"childNodes")},parentNode:function(e){return C("Node",e,"parentNode")},parentElement:function(e){return C("Node",e,"parentElement")},textContent:function(e){return C("Node",e,"textContent")},host:function(e){return e&&"host"in e?C("ShadowRoot",e,"host"):null},shadowRoot:function(e){return e&&"shadowRoot"in e?C("Element",e,"shadowRoot"):null}};function k(e){return e.nodeType===e.ELEMENT_NODE}function E(e){let t=e&&"host"in e&&"mode"in e&&I.host(e)||null;return!!(t&&"shadowRoot"in t&&I.shadowRoot(t)===e)}function x(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function T(e){var t;try{let n=e.rules||e.cssRules;if(!n)return null;return(t=Array.from(n,t=>M(t,e.href)).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t}catch(e){return null}}function M(e,t){if("styleSheet"in e){let t;try{t=T(e.styleSheet)||function(e){let{cssText:t}=e;if(t.split('"').length<3)return t;let n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(n){t=e.cssText}return e.styleSheet.href?q(t,e.styleSheet.href):t}{let n=e.cssText;return"selectorText"in e&&e.selectorText.includes(":")&&(n=n.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2")),t?q(n,t):n}}function R(e,t){return Array.from(e.styleSheets).find(e=>e.href===t)}let A=class{constructor(){m(this,"idNodeMap",new Map),m(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return -1;let n=null==(t=this.getMeta(e))?void 0:t.id;return null!=n?n:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){let n=this.getNode(e);if(n){let e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function N(e){let{element:t,maskInputOptions:n,tagName:i,type:r,value:o,maskInputFn:s}=e,a=o||"",l=r&&F(r);return(n[i.toLowerCase()]||l&&n[l])&&(a=s?s(a,t):"*".repeat(a.length)),a}function F(e){return e.toLowerCase()}let L="__rrweb_original__";function P(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?F(t):null}function O(e,t){var n;let i;try{i=new URL(e,null!=t?t:window.location.href)}catch(e){return null}let r=i.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!==(n=null==r?void 0:r[1])&&void 0!==n?n:null}let D=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,$=/^(?:[a-z+]+:)?\/\//i,B=/^www\..*/i,H=/^(data:)([^,]*),(.*)/i;function q(e,t){return(e||"").replace(D,(e,n,i,r,o,s)=>{let a=i||o||s,l=n||r||"";if(!a)return e;if($.test(a)||B.test(a)||H.test(a))return`url(${l}${a}${l})`;if("/"===a[0])return`url(${l}${(t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0]).split("?")[0]+a}${l})`;let u=t.split("/"),d=a.split("/");for(let e of(u.pop(),d))"."!==e&&(".."===e?u.pop():u.push(e));return`url(${l}${u.join("/")}${l})`})}let W=1,V=RegExp("[^a-z0-9-_:]");function Z(){return W++}let U=/^[^ \t\n\r\u000c]+/,G=/^[, \t\n\r\u000c]+/,z=new WeakMap;function Y(e,t){return t&&""!==t.trim()?j(e,t):t}function j(e,t){let n=z.get(e);if(n||(n=e.createElement("a"),z.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function X(e,t,n,i){return i?"src"===n||"href"===n&&("use"!==t||"#"!==i[0])||"xlink:href"===n&&"#"!==i[0]?Y(e,i):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function i(e){let i;let r=e.exec(t.substring(n));return r?(i=r[0],n+=i.length,i):""}let r=[];for(;i(G),!(n>=t.length);){let o=i(U);if(","===o.slice(-1))o=Y(e,o.substring(0,o.length-1)),r.push(o);else{let i="";o=Y(e,o);let s=!1;for(;;){let e=t.charAt(n);if(""===e){r.push((o+i).trim());break}if(s)")"===e&&(s=!1);else{if(","===e){n+=1,r.push((o+i).trim());break}"("===e&&(s=!0)}i+=e,n+=1}}}return r.join(", ")}(e,i):"style"===n?q(i,j(e)):"object"===t&&"data"===n?Y(e,i):i:Y(e,i):i}function J(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function K(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&K(I.parentNode(e),t,n);for(let n=e.classList.length;n--;){let i=e.classList[n];if(t.test(i))return!0}return!!n&&K(I.parentNode(e),t,n)}function Q(e,t,n,i){let r;if(k(e)){if(r=e,!I.childNodes(r).length)return!1}else{if(null===I.parentElement(e))return!1;r=I.parentElement(e)}try{if("string"==typeof t){if(i){if(r.closest(`.${t}`))return!0}else if(r.classList.contains(t))return!0}else if(K(r,t,i))return!0;if(n){if(i){if(r.closest(n))return!0}else if(r.matches(n))return!0}}catch(e){}return!1}function ee(e){return null==e?"":e.toLowerCase()}function et(e,i){let r;let{doc:o,mirror:s,blockClass:a,blockSelector:l,maskTextClass:u,maskTextSelector:d,skipChild:c=!1,inlineStylesheet:h=!0,maskInputOptions:p={},maskTextFn:g,maskInputFn:f,slimDOMOptions:_,dataURLOptions:m={},inlineImages:y=!1,recordCanvas:b=!1,onSerialize:w,onIframeLoad:S,iframeLoadTimeout:C=5e3,onStylesheetLoad:M,stylesheetLoadTimeout:A=5e3,keepIframeSrcFn:D=()=>!1,newlyAddedElement:$=!1}=i,{needsMask:B}=i,{preserveWhiteSpace:H=!0}=i;B||(B=Q(e,u,d,void 0===B));let W=function(e,i){let{doc:r,mirror:o,blockClass:s,blockSelector:a,needsMask:l,inlineStylesheet:u,maskInputOptions:d={},maskTextFn:c,maskInputFn:h,dataURLOptions:p={},inlineImages:g,recordCanvas:f,keepIframeSrcFn:_,newlyAddedElement:m=!1}=i,y=function(e,t){if(!t.hasNode(e))return;let n=t.getId(e);return 1===n?void 0:n}(r,o);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:v.Document,childNodes:[],compatMode:e.compatMode}:{type:v.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:v.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:y};case e.ELEMENT_NODE:return function(e,i){let r;let{doc:o,blockClass:s,blockSelector:a,inlineStylesheet:l,maskInputOptions:u={},maskInputFn:d,dataURLOptions:c={},inlineImages:h,recordCanvas:p,keepIframeSrcFn:g,newlyAddedElement:f=!1,rootId:_}=i,m=function(e,t,n){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){let i=e.classList[n];if(t.test(i))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,s,a),y=function(e){if(e instanceof HTMLFormElement)return"form";let t=F(e.tagName);return V.test(t)?"div":t}(e),b={},w=e.attributes.length;for(let t=0;t<w;t++){let n=e.attributes[t];J(y,n.name,n.value)||(b[n.name]=X(o,y,F(n.name),n.value))}if("link"===y&&l){let t=e.href,n=R(o,t);!n&&t.includes(".css")&&(n=R(o,window.location.origin+"/"+t.replace(window.location.href,"")));let i=null;n&&(i=T(n)),i&&(delete b.rel,delete b.href,b._cssText=i)}if("style"===y&&e.sheet&&!(e.innerText||I.textContent(e)||"").trim().length){let t=T(e.sheet);t&&(b._cssText=t)}if("input"===y||"textarea"===y||"select"===y){let t=e.value,n=e.checked;"radio"!==b.type&&"checkbox"!==b.type&&"submit"!==b.type&&"button"!==b.type&&t?b.value=N({element:e,type:P(e),tagName:y,value:t,maskInputOptions:u,maskInputFn:d}):n&&(b.checked=n)}if("option"===y&&(e.selected&&!u.select?b.selected=!0:delete b.selected),"dialog"===y&&e.open&&(b.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal"),"canvas"===y&&p){if("2d"===e.__context)(function(e){let t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let i=0;i<e.height;i+=50){let r=t.getImageData;if(new Uint32Array((L in r?r[L]:r).call(t,n,i,Math.min(50,e.width-n),Math.min(50,e.height-i)).data.buffer).some(e=>0!==e))return!1}return!0})(e)||(b.rr_dataURL=e.toDataURL(c.type,c.quality));else if(!("__context"in e)){let t=e.toDataURL(c.type,c.quality),n=o.createElement("canvas");n.width=e.width,n.height=e.height,t!==n.toDataURL(c.type,c.quality)&&(b.rr_dataURL=t)}}if("img"===y&&h){t||(n=(t=o.createElement("canvas")).getContext("2d"));let i=e.currentSrc||e.getAttribute("src")||"<unknown-src>",r=e.crossOrigin,s=()=>{e.removeEventListener("load",s);try{t.width=e.naturalWidth,t.height=e.naturalHeight,n.drawImage(e,0,0),b.rr_dataURL=t.toDataURL(c.type,c.quality)}catch(t){if("anonymous"!==e.crossOrigin)return e.crossOrigin="anonymous",void(e.complete&&0!==e.naturalWidth?s():e.addEventListener("load",s));console.warn(`Cannot inline img src=${i}! Error: ${t}`)}"anonymous"===e.crossOrigin&&(r?b.crossOrigin=r:e.removeAttribute("crossorigin"))};e.complete&&0!==e.naturalWidth?s():e.addEventListener("load",s)}if("audio"===y||"video"===y){let t=b;t.rr_mediaState=e.paused?"paused":"played",t.rr_mediaCurrentTime=e.currentTime,t.rr_mediaPlaybackRate=e.playbackRate,t.rr_mediaMuted=e.muted,t.rr_mediaLoop=e.loop,t.rr_mediaVolume=e.volume}if(f||(e.scrollLeft&&(b.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(b.rr_scrollTop=e.scrollTop)),m){let{width:t,height:n}=e.getBoundingClientRect();b={class:b.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==y||g(b.src)||(e.contentDocument||(b.rr_src=b.src),delete b.src);try{customElements.get(y)&&(r=!0)}catch(e){}return{type:v.Element,tagName:y,attributes:b,childNodes:[],isSVG:!!("svg"===e.tagName||e.ownerSVGElement)||void 0,needBlock:m,rootId:_,isCustom:r}}(e,{doc:r,blockClass:s,blockSelector:a,inlineStylesheet:u,maskInputOptions:d,maskInputFn:h,dataURLOptions:p,inlineImages:g,recordCanvas:f,keepIframeSrcFn:_,newlyAddedElement:m,rootId:y});case e.TEXT_NODE:return function(e,t){var n;let{needsMask:i,maskTextFn:r,rootId:o}=t,s=I.parentNode(e),a=s&&s.tagName,l=I.textContent(e),u="STYLE"===a||void 0,d="SCRIPT"===a||void 0;if(u&&l){try{e.nextSibling||e.previousSibling||(null==(n=s.sheet)?void 0:n.cssRules)&&(l=T(s.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}l=q(l,j(t.doc))}return d&&(l="SCRIPT_PLACEHOLDER"),!u&&!d&&l&&i&&(l=r?r(l,I.parentElement(e)):l.replace(/[\S]/g,"*")),{type:v.Text,textContent:l||"",isStyle:u,rootId:o}}(e,{doc:r,needsMask:l,maskTextFn:c,rootId:y});case e.CDATA_SECTION_NODE:return{type:v.CDATA,textContent:"",rootId:y};case e.COMMENT_NODE:return{type:v.Comment,textContent:I.textContent(e)||"",rootId:y};default:return!1}}(e,{doc:o,mirror:s,blockClass:a,blockSelector:l,needsMask:B,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:f,dataURLOptions:m,inlineImages:y,recordCanvas:b,keepIframeSrcFn:D,newlyAddedElement:$});if(!W)return console.warn(e,"not serialized"),null;r=s.hasNode(e)?s.getId(e):!(_.comment&&W.type===v.Comment||W.type===v.Element&&(_.script&&("script"===W.tagName||"link"===W.tagName&&("preload"===W.attributes.rel||"modulepreload"===W.attributes.rel)&&"script"===W.attributes.as||"link"===W.tagName&&"prefetch"===W.attributes.rel&&"string"==typeof W.attributes.href&&"js"===O(W.attributes.href))||_.headFavicon&&("link"===W.tagName&&"shortcut icon"===W.attributes.rel||"meta"===W.tagName&&(ee(W.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===ee(W.attributes.name)||"icon"===ee(W.attributes.rel)||"apple-touch-icon"===ee(W.attributes.rel)||"shortcut icon"===ee(W.attributes.rel)))||"meta"===W.tagName&&(_.headMetaDescKeywords&&ee(W.attributes.name).match(/^description|keywords$/)||_.headMetaSocial&&(ee(W.attributes.property).match(/^(og|twitter|fb):/)||ee(W.attributes.name).match(/^(og|twitter):/)||"pinterest"===ee(W.attributes.name))||_.headMetaRobots&&("robots"===ee(W.attributes.name)||"googlebot"===ee(W.attributes.name)||"bingbot"===ee(W.attributes.name))||_.headMetaHttpEquiv&&void 0!==W.attributes["http-equiv"]||_.headMetaAuthorship&&("author"===ee(W.attributes.name)||"generator"===ee(W.attributes.name)||"framework"===ee(W.attributes.name)||"publisher"===ee(W.attributes.name)||"progid"===ee(W.attributes.name)||ee(W.attributes.property).match(/^article:/)||ee(W.attributes.property).match(/^product:/))||_.headMetaVerification&&("google-site-verification"===ee(W.attributes.name)||"yandex-verification"===ee(W.attributes.name)||"csrf-token"===ee(W.attributes.name)||"p:domain_verify"===ee(W.attributes.name)||"verify-v1"===ee(W.attributes.name)||"verification"===ee(W.attributes.name)||"shopify-checkout-api-token"===ee(W.attributes.name)))))&&(H||W.type!==v.Text||W.isStyle||W.textContent.replace(/^\s+|\s+$/gm,"").length)?Z():-2;let U=Object.assign(W,{id:r});if(s.add(e,U),-2===r)return null;w&&w(e);let G=!c;if(U.type===v.Element){G=G&&!U.needBlock,delete U.needBlock;let t=I.shadowRoot(e);t&&x(t)&&(U.isShadowHost=!0)}if((U.type===v.Document||U.type===v.Element)&&G){_.headWhitespace&&U.type===v.Element&&"head"===U.tagName&&(H=!1);let t={doc:o,mirror:s,blockClass:a,blockSelector:l,needsMask:B,maskTextClass:u,maskTextSelector:d,skipChild:c,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:f,slimDOMOptions:_,dataURLOptions:m,inlineImages:y,recordCanvas:b,preserveWhiteSpace:H,onSerialize:w,onIframeLoad:S,iframeLoadTimeout:C,onStylesheetLoad:M,stylesheetLoadTimeout:A,keepIframeSrcFn:D};if(U.type===v.Element&&"textarea"===U.tagName&&void 0!==U.attributes.value);else for(let n of Array.from(I.childNodes(e))){let e=et(n,t);e&&U.childNodes.push(e)}let n=null;if(k(e)&&(n=I.shadowRoot(e)))for(let e of Array.from(I.childNodes(n))){let i=et(e,t);i&&(x(n)&&(i.isShadow=!0),U.childNodes.push(i))}}let z=I.parentNode(e);return z&&E(z)&&x(z)&&(U.isShadow=!0),U.type===v.Element&&"iframe"===U.tagName&&function(e,t,n){let i=e.contentWindow;if(!i)return;let r,o=!1;try{r=i.document.readyState}catch(e){return}if("complete"!==r){let i=setTimeout(()=>{o||(t(),o=!0)},n);return void e.addEventListener("load",()=>{clearTimeout(i),o=!0,t()})}let s="about:blank";if(i.location.href!==s||e.src===s||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,()=>{let t=e.contentDocument;if(t&&S){let n=et(t,{doc:t,mirror:s,blockClass:a,blockSelector:l,needsMask:B,maskTextClass:u,maskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:f,slimDOMOptions:_,dataURLOptions:m,inlineImages:y,recordCanvas:b,preserveWhiteSpace:H,onSerialize:w,onIframeLoad:S,iframeLoadTimeout:C,onStylesheetLoad:M,stylesheetLoadTimeout:A,keepIframeSrcFn:D});n&&S(e,n)}},C),U.type===v.Element&&"link"===U.tagName&&"string"==typeof U.attributes.rel&&("stylesheet"===U.attributes.rel||"preload"===U.attributes.rel&&"string"==typeof U.attributes.href&&"css"===O(U.attributes.href))&&function(e,t,n){let i,r=!1;try{i=e.sheet}catch(e){return}if(i)return;let o=setTimeout(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{clearTimeout(o),r=!0,t()})}(e,()=>{if(M){let t=et(e,{doc:o,mirror:s,blockClass:a,blockSelector:l,needsMask:B,maskTextClass:u,maskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:f,slimDOMOptions:_,dataURLOptions:m,inlineImages:y,recordCanvas:b,preserveWhiteSpace:H,onSerialize:w,onIframeLoad:S,iframeLoadTimeout:C,onStylesheetLoad:M,stylesheetLoadTimeout:A,keepIframeSrcFn:D});t&&M(e,t)}},A),U}let en=class e{constructor(){__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}get childNodes(){let e=[],t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(t){if(!(t instanceof e)||t.ownerDocument!==this.ownerDocument)return!1;if(t===this)return!0;for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}appendChild(e){throw Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}},ei={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},er={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},eo={};function es(e){if(eo[e])return eo[e];let t=globalThis[e],n=t.prototype,i=e in ei?ei[e]:void 0,r=!!(i&&i.every(e=>{var t,i;return!!(null==(i=null==(t=Object.getOwnPropertyDescriptor(n,e))?void 0:t.get)?void 0:i.toString().includes("[native code]"))})),o=e in er?er[e]:void 0,s=!!(o&&o.every(e=>{var t;return"function"==typeof n[e]&&(null==(t=n[e])?void 0:t.toString().includes("[native code]"))}));if(r&&s)return eo[e]=t.prototype,t.prototype;try{let i=document.createElement("iframe");document.body.appendChild(i);let r=i.contentWindow;if(!r)return t.prototype;let o=r[e].prototype;return document.body.removeChild(i),o?eo[e]=o:n}catch{return n}}let ea={};function el(e,t,n){var i;let r=`${e}.${String(n)}`;if(ea[r])return ea[r].call(t);let o=null==(i=Object.getOwnPropertyDescriptor(es(e),n))?void 0:i.get;return o?(ea[r]=o,o.call(t)):t[n]}let eu={};function ed(e,t,n){let i=`${e}.${String(n)}`;if(eu[i])return eu[i].bind(t);let r=es(e)[n];return"function"!=typeof r?t[n]:(eu[i]=r,r.bind(t))}let ec={childNodes:function(e){return el("Node",e,"childNodes")},parentNode:function(e){return el("Node",e,"parentNode")},parentElement:function(e){return el("Node",e,"parentElement")},textContent:function(e){return el("Node",e,"textContent")},contains:function(e,t){return ed("Node",e,"contains")(t)},getRootNode:function(e){return ed("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?el("ShadowRoot",e,"host"):null},shadowRoot:function(e){return e&&"shadowRoot"in e?el("Element",e,"shadowRoot"):null}};function eh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,i={capture:!0,passive:!0};return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}let ep="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",eg={map:{},getId:()=>(console.error(ep),-1),getNode:()=>(console.error(ep),null),removeNodeFromMap(){console.error(ep)},has:()=>(console.error(ep),!1),reset(){console.error(ep)}};function ef(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null,r=0;return function(){for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];let l=Date.now();r||!1!==n.leading||(r=l);let u=t-(l-r),d=this;u<=0||u>t?(i&&(clearTimeout(i),i=null),r=l,e.apply(d,s)):i||!1===n.trailing||(i=setTimeout(()=>{r=!1===n.leading?0:Date.now(),i=null,e.apply(d,s)},u))}}function e_(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window,o=r.Object.getOwnPropertyDescriptor(e,t);return r.Object.defineProperty(e,t,i?n:{set(e){setTimeout(()=>{n.set.call(this,e)},0),o&&o.set&&o.set.call(this,e)}}),()=>e_(e,t,o||{},!0)}function em(e,t,n){try{if(!(t in e))return()=>{};let i=e[t],r=n(i);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:i}})),e[t]=r,()=>{e[t]=i}}catch{return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(eg=new Proxy(eg,{get:(e,t,n)=>("map"===t&&console.error(ep),Reflect.get(e,t,n))}));let ev=Date.now;function ey(e){var t,n,i,r;let o=e.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:o.documentElement.scrollLeft||(null==o?void 0:o.body)&&(null==(t=ec.parentElement(o.body))?void 0:t.scrollLeft)||(null==(n=null==o?void 0:o.body)?void 0:n.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==o?void 0:o.documentElement.scrollTop)||(null==o?void 0:o.body)&&(null==(i=ec.parentElement(o.body))?void 0:i.scrollTop)||(null==(r=null==o?void 0:o.body)?void 0:r.scrollTop)||0}}function eb(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ew(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function eS(e){return e?e.nodeType===e.ELEMENT_NODE?e:ec.parentElement(e):null}function eC(e,t,n,i){if(!e)return!1;let r=eS(e);if(!r)return!1;try{if("string"==typeof t){if(r.classList.contains(t)||i&&null!==r.closest("."+t))return!0}else if(K(r,t,i))return!0}catch(e){}return!!(n&&(r.matches(n)||i&&null!==r.closest(n)))}function eI(e,t,n){return!("TITLE"!==e.tagName||!n.headTitleMutations)||-2===t.getId(e)}function ek(e){return!!e.changedTouches}function eE(e,t){return!!("IFRAME"===e.nodeName&&t.getMeta(e))}function ex(e,t){return!!("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function eT(e){return!!e&&(e instanceof en&&"shadowRoot"in e?!!e.shadowRoot:!!ec.shadowRoot(e))}/[1-9][0-9]{12}/.test(Date.now().toString())||(ev=()=>(new Date).getTime());let eM=class{constructor(){f(this,"id",1),f(this,"styleIDMap",new WeakMap),f(this,"idStyleMap",new Map)}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){let n;return this.has(e)?this.getId(e):(n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n)}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function eR(e){var t;let n=null;return"getRootNode"in e&&(null==(t=ec.getRootNode(e))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&ec.host(ec.getRootNode(e))&&(n=ec.host(ec.getRootNode(e))),n}function eA(e){let t=e.ownerDocument;return!!t&&(ec.contains(t,e)||function(e){let t=e.ownerDocument;if(!t)return!1;let n=function(e){let t,n=e;for(;t=eR(n);)n=t;return n}(e);return ec.contains(t,n)}(e))}var eN=((o=eN||{})[o.DomContentLoaded=0]="DomContentLoaded",o[o.Load=1]="Load",o[o.FullSnapshot=2]="FullSnapshot",o[o.IncrementalSnapshot=3]="IncrementalSnapshot",o[o.Meta=4]="Meta",o[o.Custom=5]="Custom",o[o.Plugin=6]="Plugin",o),eF=((s=eF||{})[s.Mutation=0]="Mutation",s[s.MouseMove=1]="MouseMove",s[s.MouseInteraction=2]="MouseInteraction",s[s.Scroll=3]="Scroll",s[s.ViewportResize=4]="ViewportResize",s[s.Input=5]="Input",s[s.TouchMove=6]="TouchMove",s[s.MediaInteraction=7]="MediaInteraction",s[s.StyleSheetRule=8]="StyleSheetRule",s[s.CanvasMutation=9]="CanvasMutation",s[s.Font=10]="Font",s[s.Log=11]="Log",s[s.Drag=12]="Drag",s[s.StyleDeclaration=13]="StyleDeclaration",s[s.Selection=14]="Selection",s[s.AdoptedStyleSheet=15]="AdoptedStyleSheet",s[s.CustomElement=16]="CustomElement",s),eL=((a=eL||{})[a.MouseUp=0]="MouseUp",a[a.MouseDown=1]="MouseDown",a[a.Click=2]="Click",a[a.ContextMenu=3]="ContextMenu",a[a.DblClick=4]="DblClick",a[a.Focus=5]="Focus",a[a.Blur=6]="Blur",a[a.TouchStart=7]="TouchStart",a[a.TouchMove_Departed=8]="TouchMove_Departed",a[a.TouchEnd=9]="TouchEnd",a[a.TouchCancel=10]="TouchCancel",a),eP=((l=eP||{})[l.Mouse=0]="Mouse",l[l.Pen=1]="Pen",l[l.Touch=2]="Touch",l),eO=((u=eO||{})[u["2D"]=0]="2D",u[u.WebGL=1]="WebGL",u[u.WebGL2=2]="WebGL2",u),eD=((d=eD||{})[d.Play=0]="Play",d[d.Pause=1]="Pause",d[d.Seeked=2]="Seeked",d[d.VolumeChange=3]="VolumeChange",d[d.RateChange=4]="RateChange",d);class e${constructor(){f(this,"length",0),f(this,"head",null),f(this,"tail",null)}get(e){if(e>=this.length)throw Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}addNode(e){let t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&"__ln"in e.previousSibling){let n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&"__ln"in e.nextSibling&&e.nextSibling.__ln.previous){let n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){let t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}let eB=(e,t)=>`${e}@${t}`;class eH{constructor(){f(this,"frozen",!1),f(this,"locked",!1),f(this,"texts",[]),f(this,"attributes",[]),f(this,"attributeMap",new WeakMap),f(this,"removes",[]),f(this,"mapRemoves",[]),f(this,"movedMap",{}),f(this,"addedSet",new Set),f(this,"movedSet",new Set),f(this,"droppedSet",new Set),f(this,"mutationCb"),f(this,"blockClass"),f(this,"blockSelector"),f(this,"maskTextClass"),f(this,"maskTextSelector"),f(this,"inlineStylesheet"),f(this,"maskInputOptions"),f(this,"maskTextFn"),f(this,"maskInputFn"),f(this,"keepIframeSrcFn"),f(this,"recordCanvas"),f(this,"inlineImages"),f(this,"slimDOMOptions"),f(this,"dataURLOptions"),f(this,"doc"),f(this,"mirror"),f(this,"iframeManager"),f(this,"stylesheetManager"),f(this,"shadowDomManager"),f(this,"canvasManager"),f(this,"processedNodeManager"),f(this,"unattachedDoc"),f(this,"processMutations",e=>{e.forEach(this.processMutation),this.emit()}),f(this,"emit",()=>{if(this.frozen||this.locked)return;let e=[],t=new Set,n=new e$,i=e=>{let t=e,n=-2;for(;-2===n;)n=(t=t&&t.nextSibling)&&this.mirror.getId(t);return n},r=r=>{let o=ec.parentNode(r);if(!o||!eA(r)||"TEXTAREA"===o.tagName)return;let s=E(o)?this.mirror.getId(eR(r)):this.mirror.getId(o),a=i(r);if(-1===s||-1===a)return n.addNode(r);let l=et(r,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{eE(e,this.mirror)&&this.iframeManager.addIframe(e),ex(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),eT(r)&&this.shadowDomManager.addShadowRoot(ec.shadowRoot(r),this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});l&&(e.push({parentId:s,nextId:a,node:l}),t.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let e of this.movedSet)eW(this.removes,e,this.mirror)&&!this.movedSet.has(ec.parentNode(e))||r(e);for(let e of this.addedSet)eV(this.droppedSet,e)||eW(this.removes,e,this.mirror)?eV(this.movedSet,e)?r(e):this.droppedSet.add(e):r(e);let o=null;for(;n.length;){let e=null;if(o){let t=this.mirror.getId(ec.parentNode(o.value)),n=i(o.value);-1!==t&&-1!==n&&(e=o)}if(!e){let t=n.tail;for(;t;){let n=t;if(t=t.previous,n){let t=this.mirror.getId(ec.parentNode(n.value));if(-1===i(n.value))continue;if(-1!==t){e=n;break}{let t=n.value,i=ec.parentNode(t);if(i&&i.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let t=ec.host(i);if(-1!==this.mirror.getId(t)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}o=e.previous,n.removeNode(e.value),r(e.value)}let s={texts:this.texts.map(e=>{let t=e.node,n=ec.parentNode(t);return n&&"TEXTAREA"===n.tagName&&this.genTextAreaValueMutation(n),{id:this.mirror.getId(t),value:e.value}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),attributes:this.attributes.map(e=>{let{attributes:t}=e;if("string"==typeof t.style){let n=JSON.stringify(e.styleDiff),i=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+i).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),removes:this.removes,adds:e};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))}),f(this,"genTextAreaValueMutation",e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t)),t.attributes.value=Array.from(ec.childNodes(e),e=>ec.textContent(e)||"").join("")}),f(this,"processMutation",e=>{if(!eI(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":{let t=ec.textContent(e.target);eC(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:Q(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,eS(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{let t=e.target,n=e.attributeName,i=e.target.getAttribute(n);if("value"===n){let e=P(t);i=N({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:e,value:i,maskInputFn:this.maskInputFn})}if(eC(e.target,this.blockClass,this.blockSelector,!1)||i===e.oldValue)return;let r=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(i)){if(t.contentDocument)return;n="rr_src"}if(r||(r={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(r),this.attributeMap.set(e.target,r)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!J(t.tagName,n)){if(r.attributes[n]=X(this.doc,F(t.tagName),F(n),i),"style"===n){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}let n=this.unattachedDoc.createElement("span");for(let i of(e.oldValue&&n.setAttribute("style",e.oldValue),Array.from(t.style))){let e=t.style.getPropertyValue(i),o=t.style.getPropertyPriority(i);e!==n.style.getPropertyValue(i)||o!==n.style.getPropertyPriority(i)?r.styleDiff[i]=""===o?e:[e,o]:r._unchangedStyles[i]=[e,o]}for(let e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(r.styleDiff[e]=!1)}else"open"===n&&"DIALOG"===t.tagName&&(t.matches("dialog:modal")?r.attributes.rr_open_mode="modal":r.attributes.rr_open_mode="non-modal")}break}case"childList":if(eC(e.target,this.blockClass,this.blockSelector,!0))return;if("TEXTAREA"===e.target.tagName)return void this.genTextAreaValueMutation(e.target);e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{let n=this.mirror.getId(t),i=E(e.target)?this.mirror.getId(ec.host(e.target)):this.mirror.getId(e.target);eC(e.target,this.blockClass,this.blockSelector,!1)||eI(t,this.mirror,this.slimDOMOptions)||-1===this.mirror.getId(t)||(this.addedSet.has(t)?(eq(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||function e(t,n){if(E(t))return!1;let i=n.getId(t);if(!n.has(i))return!0;let r=ec.parentNode(t);return(!r||r.nodeType!==t.DOCUMENT_NODE)&&(!r||e(r,n))}(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[eB(n,i)]?eq(this.movedSet,t):this.removes.push({parentId:i,id:n,isShadow:!(!E(e.target)||!x(e.target))||void 0})),this.mapRemoves.push(t))})}}),f(this,"genAdds",(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(eI(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[eB(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);eC(e,this.blockClass,this.blockSelector,!1)||(ec.childNodes(e).forEach(e=>this.genAdds(e)),eT(e)&&ec.childNodes(ec.shadowRoot(e)).forEach(t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)}))}})}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function eq(e,t){e.delete(t),ec.childNodes(t).forEach(t=>eq(e,t))}function eW(e,t,n){return 0!==e.length&&function(e,t,n){let i=ec.parentNode(t);for(;i;){let t=n.getId(i);if(e.some(e=>e.id===t))return!0;i=ec.parentNode(i)}return!1}(e,t,n)}function eV(e,t){return 0!==e.size&&function e(t,n){let i=ec.parentNode(n);return!!i&&(!!t.has(i)||e(t,i))}(e,t)}let eZ=e=>i?function(){try{return e(...arguments)}catch(e){if(i&&!0===i(e))return;throw e}}:e,eU=[];function eG(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function ez(e,t){let n=new eH;eU.push(n),n.init(e);let i=new(es("MutationObserver")).constructor(eZ(n.processMutations.bind(n)));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function eY(e){let{scrollCb:t,doc:n,mirror:i,blockClass:r,blockSelector:o,sampling:s}=e;return eh("scroll",eZ(ef(eZ(e=>{let s=eG(e);if(!s||eC(s,r,o,!0))return;let a=i.getId(s);if(s===n&&n.defaultView){let e=ey(n.defaultView);t({id:a,x:e.left,y:e.top})}else t({id:a,x:s.scrollLeft,y:s.scrollTop})}),s.scroll||100)),n)}let ej=["INPUT","TEXTAREA","SELECT"],eX=new WeakMap;function eJ(e){var t;return t=[],e1("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||e1("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||e1("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||e1("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule?t.unshift(Array.from(e.parentRule.cssRules).indexOf(e)):e.parentStyleSheet&&t.unshift(Array.from(e.parentStyleSheet.cssRules).indexOf(e)),t}function eK(e,t,n){let i,r;return e?(e.ownerNode?i=t.getId(e.ownerNode):r=n.getId(e),{styleId:r,id:i}):{}}function eQ(e,t){var n,i,r;let{mirror:o,stylesheetManager:s}=e,a=null;a="#document"===t.nodeName?o.getId(t):o.getId(ec.host(t));let l="#document"===t.nodeName?null==(n=t.defaultView)?void 0:n.Document:null==(r=null==(i=t.ownerDocument)?void 0:i.defaultView)?void 0:r.ShadowRoot,u=(null==l?void 0:l.prototype)?Object.getOwnPropertyDescriptor(null==l?void 0:l.prototype,"adoptedStyleSheets"):void 0;return null!==a&&-1!==a&&l&&u?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get(){var e;return null==(e=u.get)?void 0:e.call(this)},set(e){var t;let n=null==(t=u.set)?void 0:t.call(this,e);if(null!==a&&-1!==a)try{s.adoptStyleSheets(e,a)}catch(e){}return n}}),eZ(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get:u.get,set:u.set})})):()=>{}}function e0(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.doc.defaultView;if(!i)return()=>{};(function(e,t){let{mutationCb:n,mousemoveCb:i,mouseInteractionCb:r,scrollCb:o,viewportResizeCb:s,inputCb:a,mediaInteractionCb:l,styleSheetRuleCb:u,styleDeclarationCb:d,canvasMutationCb:c,fontCb:h,selectionCb:p,customElementCb:g}=e;e.mutationCb=function(){t.mutation&&t.mutation(...arguments),n(...arguments)},e.mousemoveCb=function(){t.mousemove&&t.mousemove(...arguments),i(...arguments)},e.mouseInteractionCb=function(){t.mouseInteraction&&t.mouseInteraction(...arguments),r(...arguments)},e.scrollCb=function(){t.scroll&&t.scroll(...arguments),o(...arguments)},e.viewportResizeCb=function(){t.viewportResize&&t.viewportResize(...arguments),s(...arguments)},e.inputCb=function(){t.input&&t.input(...arguments),a(...arguments)},e.mediaInteractionCb=function(){t.mediaInteaction&&t.mediaInteaction(...arguments),l(...arguments)},e.styleSheetRuleCb=function(){t.styleSheetRule&&t.styleSheetRule(...arguments),u(...arguments)},e.styleDeclarationCb=function(){t.styleDeclaration&&t.styleDeclaration(...arguments),d(...arguments)},e.canvasMutationCb=function(){t.canvasMutation&&t.canvasMutation(...arguments),c(...arguments)},e.fontCb=function(){t.font&&t.font(...arguments),h(...arguments)},e.selectionCb=function(){t.selection&&t.selection(...arguments),p(...arguments)},e.customElementCb=function(){t.customElement&&t.customElement(...arguments),g(...arguments)}})(e,n),e.recordDOM&&(t=ez(e,e.doc));let r=function(e){let{mousemoveCb:t,sampling:n,doc:i,mirror:r}=e;if(!1===n.mousemove)return()=>{};let o="number"==typeof n.mousemove?n.mousemove:50,s="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500,a,l=[],u=ef(eZ(e=>{let n=Date.now()-a;t(l.map(e=>(e.timeOffset-=n,e)),e),l=[],a=null}),s),d=eZ(ef(eZ(e=>{let t=eG(e),{clientX:n,clientY:i}=ek(e)?e.changedTouches[0]:e;a||(a=ev()),l.push({x:n,y:i,id:r.getId(t),timeOffset:ev()-a}),u("undefined"!=typeof DragEvent&&e instanceof DragEvent?eF.Drag:e instanceof MouseEvent?eF.MouseMove:eF.TouchMove)}),o,{trailing:!1})),c=[eh("mousemove",d,i),eh("touchmove",d,i),eh("drag",d,i)];return eZ(()=>{c.forEach(e=>e())})}(e),o=function(e){let{mouseInteractionCb:t,doc:n,mirror:i,blockClass:r,blockSelector:o,sampling:s}=e;if(!1===s.mouseInteraction)return()=>{};let a=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,l=[],u=null;return Object.keys(eL).filter(e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]).forEach(e=>{let s=F(e);if(window.PointerEvent)switch(eL[e]){case eL.MouseDown:case eL.MouseUp:s=s.replace("mouse","pointer");break;case eL.TouchStart:case eL.TouchEnd:return}l.push(eh(s,n=>{let s=eG(n);if(eC(s,r,o,!0))return;let a=null,l=e;if("pointerType"in n){switch(n.pointerType){case"mouse":a=eP.Mouse;break;case"touch":a=eP.Touch;break;case"pen":a=eP.Pen}a===eP.Touch?eL[e]===eL.MouseDown?l="TouchStart":eL[e]===eL.MouseUp&&(l="TouchEnd"):eP.Pen}else ek(n)&&(a=eP.Touch);null!==a?(u=a,(l.startsWith("Touch")&&a===eP.Touch||l.startsWith("Mouse")&&a===eP.Mouse)&&(a=null)):eL[e]===eL.Click&&(a=u,u=null);let d=ek(n)?n.changedTouches[0]:n;if(!d)return;let c=i.getId(s),{clientX:h,clientY:p}=d;eZ(t)({type:eL[l],id:c,x:h,y:p,...null!==a&&{pointerType:a}})},n))}),eZ(()=>{l.forEach(e=>e())})}(e),s=eY(e),a=function(e,t){let{viewportResizeCb:n}=e,{win:i}=t,r=-1,o=-1;return eh("resize",eZ(ef(eZ(()=>{let e=eb(),t=ew();r===e&&o===t||(n({width:Number(t),height:Number(e)}),r=e,o=t)}),200)),i)}(e,{win:i}),l=function(e){let{inputCb:t,doc:n,mirror:i,blockClass:r,blockSelector:o,ignoreClass:s,ignoreSelector:a,maskInputOptions:l,maskInputFn:u,sampling:d,userTriggeredOnInput:c}=e;function h(e){let t=eG(e),i=e.isTrusted,d=t&&t.tagName;if(t&&"OPTION"===d&&(t=ec.parentElement(t)),!t||!d||0>ej.indexOf(d)||eC(t,r,o,!0)||t.classList.contains(s)||a&&t.matches(a))return;let h=t.value,g=!1,f=P(t)||"";"radio"===f||"checkbox"===f?g=t.checked:(l[d.toLowerCase()]||l[f])&&(h=N({element:t,maskInputOptions:l,tagName:d,type:f,value:h,maskInputFn:u})),p(t,c?{text:h,isChecked:g,userTriggered:i}:{text:h,isChecked:g});let _=t.name;"radio"===f&&_&&g&&n.querySelectorAll(`input[type="radio"][name="${_}"]`).forEach(e=>{if(e!==t){let t=e.value;p(e,c?{text:t,isChecked:!g,userTriggered:!1}:{text:t,isChecked:!g})}})}function p(e,n){let r=eX.get(e);if(!r||r.text!==n.text||r.isChecked!==n.isChecked){eX.set(e,n);let r=i.getId(e);eZ(t)({...n,id:r})}}let g=("last"===d.input?["change"]:["input","change"]).map(e=>eh(e,eZ(h),n)),f=n.defaultView;if(!f)return()=>{g.forEach(e=>e())};let _=f.Object.getOwnPropertyDescriptor(f.HTMLInputElement.prototype,"value"),m=[[f.HTMLInputElement.prototype,"value"],[f.HTMLInputElement.prototype,"checked"],[f.HTMLSelectElement.prototype,"value"],[f.HTMLTextAreaElement.prototype,"value"],[f.HTMLSelectElement.prototype,"selectedIndex"],[f.HTMLOptionElement.prototype,"selected"]];return _&&_.set&&g.push(...m.map(e=>e_(e[0],e[1],{set(){eZ(h)({target:this,isTrusted:!1})}},!1,f))),eZ(()=>{g.forEach(e=>e())})}(e),u=function(e){let{mediaInteractionCb:t,blockClass:n,blockSelector:i,mirror:r,sampling:o,doc:s}=e,a=eZ(e=>ef(eZ(o=>{let s=eG(o);if(!s||eC(s,n,i,!0))return;let{currentTime:a,volume:l,muted:u,playbackRate:d,loop:c}=s;t({type:e,id:r.getId(s),currentTime:a,volume:l,muted:u,playbackRate:d,loop:c})}),o.media||500)),l=[eh("play",a(eD.Play),s),eh("pause",a(eD.Pause),s),eh("seeked",a(eD.Seeked),s),eh("volumechange",a(eD.VolumeChange),s),eh("ratechange",a(eD.RateChange),s)];return eZ(()=>{l.forEach(e=>e())})}(e),d=()=>{},c=()=>{},h=()=>{},p=()=>{};e.recordDOM&&(d=function(e,t){let n,i,{styleSheetRuleCb:r,mirror:o,stylesheetManager:s}=e,{win:a}=t;if(!a.CSSStyleSheet||!a.CSSStyleSheet.prototype)return()=>{};let l=a.CSSStyleSheet.prototype.insertRule;a.CSSStyleSheet.prototype.insertRule=new Proxy(l,{apply:eZ((e,t,n)=>{let[i,a]=n,{id:l,styleId:u}=eK(t,o,s.styleMirror);return(l&&-1!==l||u&&-1!==u)&&r({id:l,styleId:u,adds:[{rule:i,index:a}]}),e.apply(t,n)})}),a.CSSStyleSheet.prototype.addRule=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.cssRules.length,i=`${e} { ${t} }`;return a.CSSStyleSheet.prototype.insertRule.apply(this,[i,n])};let u=a.CSSStyleSheet.prototype.deleteRule;a.CSSStyleSheet.prototype.deleteRule=new Proxy(u,{apply:eZ((e,t,n)=>{let[i]=n,{id:a,styleId:l}=eK(t,o,s.styleMirror);return(a&&-1!==a||l&&-1!==l)&&r({id:a,styleId:l,removes:[{index:i}]}),e.apply(t,n)})}),a.CSSStyleSheet.prototype.removeRule=function(e){return a.CSSStyleSheet.prototype.deleteRule.apply(this,[e])},a.CSSStyleSheet.prototype.replace&&(n=a.CSSStyleSheet.prototype.replace,a.CSSStyleSheet.prototype.replace=new Proxy(n,{apply:eZ((e,t,n)=>{let[i]=n,{id:a,styleId:l}=eK(t,o,s.styleMirror);return(a&&-1!==a||l&&-1!==l)&&r({id:a,styleId:l,replace:i}),e.apply(t,n)})})),a.CSSStyleSheet.prototype.replaceSync&&(i=a.CSSStyleSheet.prototype.replaceSync,a.CSSStyleSheet.prototype.replaceSync=new Proxy(i,{apply:eZ((e,t,n)=>{let[i]=n,{id:a,styleId:l}=eK(t,o,s.styleMirror);return(a&&-1!==a||l&&-1!==l)&&r({id:a,styleId:l,replaceSync:i}),e.apply(t,n)})}));let d={};e2("CSSGroupingRule")?d.CSSGroupingRule=a.CSSGroupingRule:(e2("CSSMediaRule")&&(d.CSSMediaRule=a.CSSMediaRule),e2("CSSConditionRule")&&(d.CSSConditionRule=a.CSSConditionRule),e2("CSSSupportsRule")&&(d.CSSSupportsRule=a.CSSSupportsRule));let c={};return Object.entries(d).forEach(e=>{let[t,n]=e;c[t]={insertRule:n.prototype.insertRule,deleteRule:n.prototype.deleteRule},n.prototype.insertRule=new Proxy(c[t].insertRule,{apply:eZ((e,t,n)=>{let[i,a]=n,{id:l,styleId:u}=eK(t.parentStyleSheet,o,s.styleMirror);return(l&&-1!==l||u&&-1!==u)&&r({id:l,styleId:u,adds:[{rule:i,index:[...eJ(t),a||0]}]}),e.apply(t,n)})}),n.prototype.deleteRule=new Proxy(c[t].deleteRule,{apply:eZ((e,t,n)=>{let[i]=n,{id:a,styleId:l}=eK(t.parentStyleSheet,o,s.styleMirror);return(a&&-1!==a||l&&-1!==l)&&r({id:a,styleId:l,removes:[{index:[...eJ(t),i]}]}),e.apply(t,n)})})}),eZ(()=>{a.CSSStyleSheet.prototype.insertRule=l,a.CSSStyleSheet.prototype.deleteRule=u,n&&(a.CSSStyleSheet.prototype.replace=n),i&&(a.CSSStyleSheet.prototype.replaceSync=i),Object.entries(d).forEach(e=>{let[t,n]=e;n.prototype.insertRule=c[t].insertRule,n.prototype.deleteRule=c[t].deleteRule})})}(e,{win:i}),c=eQ(e,e.doc),h=function(e,t){let{styleDeclarationCb:n,mirror:i,ignoreCSSAttributes:r,stylesheetManager:o}=e,{win:s}=t,a=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:eZ((e,t,s)=>{var l;let[u,d,c]=s;if(r.has(u))return a.apply(t,[u,d,c]);let{id:h,styleId:p}=eK(null==(l=t.parentRule)?void 0:l.parentStyleSheet,i,o.styleMirror);return(h&&-1!==h||p&&-1!==p)&&n({id:h,styleId:p,set:{property:u,value:d,priority:c},index:eJ(t.parentRule)}),e.apply(t,s)})});let l=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:eZ((e,t,s)=>{var a;let[u]=s;if(r.has(u))return l.apply(t,[u]);let{id:d,styleId:c}=eK(null==(a=t.parentRule)?void 0:a.parentStyleSheet,i,o.styleMirror);return(d&&-1!==d||c&&-1!==c)&&n({id:d,styleId:c,remove:{property:u},index:eJ(t.parentRule)}),e.apply(t,s)})}),eZ(()=>{s.CSSStyleDeclaration.prototype.setProperty=a,s.CSSStyleDeclaration.prototype.removeProperty=l})}(e,{win:i}),e.collectFonts&&(p=function(e){let{fontCb:t,doc:n}=e,i=n.defaultView;if(!i)return()=>{};let r=[],o=new WeakMap,s=i.FontFace;i.FontFace=function(e,t,n){let i=new s(e,t,n);return o.set(i,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),i};let a=em(n.fonts,"add",function(e){return function(n){return setTimeout(eZ(()=>{let e=o.get(n);e&&(t(e),o.delete(n))}),0),e.apply(this,[n])}});return r.push(()=>{i.FontFace=s}),r.push(a),eZ(()=>{r.forEach(e=>e())})}(e)));let g=function(e){let{doc:t,mirror:n,blockClass:i,blockSelector:r,selectionCb:o}=e,s=!0,a=eZ(()=>{let e=t.getSelection();if(!e||s&&(null==e?void 0:e.isCollapsed))return;s=e.isCollapsed||!1;let a=[],l=e.rangeCount||0;for(let t=0;t<l;t++){let{startContainer:o,startOffset:s,endContainer:l,endOffset:u}=e.getRangeAt(t);eC(o,i,r,!0)||eC(l,i,r,!0)||a.push({start:n.getId(o),startOffset:s,end:n.getId(l),endOffset:u})}o({ranges:a})});return a(),eh("selectionchange",a)}(e),f=function(e){let{doc:t,customElementCb:n}=e,i=t.defaultView;return i&&i.customElements?em(i.customElements,"define",function(e){return function(t,i,r){try{n({define:{name:t}})}catch(e){console.warn(`Custom element callback failed for ${t}`)}return e.apply(this,[t,i,r])}}):()=>{}}(e),_=[];for(let t of e.plugins)_.push(t.observer(t.callback,i,t.options));return eZ(()=>{eU.forEach(e=>e.reset()),null==t||t.disconnect(),r(),o(),s(),a(),l(),u(),d(),c(),h(),p(),g(),f(),_.forEach(e=>e())})}function e1(e){return void 0!==window[e]}function e2(e){return!!(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class e5{constructor(e){f(this,"iframeIdToRemoteIdMap",new WeakMap),f(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,n,i){let r=n||this.getIdToRemoteIdMap(e),o=i||this.getRemoteIdToIdMap(e),s=r.get(t);return s||(s=this.generateIdFn(),r.set(t,s),o.set(s,t)),s}getIds(e,t){let n=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map(t=>this.getId(e,t,n,i))}getRemoteId(e,t,n){let i=n||this.getRemoteIdToIdMap(e);return"number"!=typeof t?t:i.get(t)||-1}getRemoteIds(e,t){let n=this.getRemoteIdToIdMap(e);return t.map(t=>this.getRemoteId(e,t,n))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class e3{constructor(e){f(this,"iframes",new WeakMap),f(this,"crossOriginIframeMap",new WeakMap),f(this,"crossOriginIframeMirror",new e5(Z)),f(this,"crossOriginIframeStyleMirror"),f(this,"crossOriginIframeRootIdMap",new WeakMap),f(this,"mirror"),f(this,"mutationCb"),f(this,"wrappedEmit"),f(this,"loadListener"),f(this,"stylesheetManager"),f(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new e5(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n,i;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(n=e.contentWindow)||n.addEventListener("message",this.handleMessage.bind(this))),null==(i=this.loadListener)||i.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){if("rrweb"!==e.data.type||e.origin!==e.data.origin||!e.source)return;let t=this.crossOriginIframeMap.get(e.source);if(!t)return;let n=this.transformCrossOriginEvent(t,e.data.event);n&&this.wrappedEmit(n,e.data.isCheckout)}transformCrossOriginEvent(e,t){var n;switch(t.type){case eN.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);let n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:eN.IncrementalSnapshot,data:{source:eF.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case eN.Meta:case eN.Load:case eN.DomContentLoaded:break;case eN.Plugin:return t;case eN.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case eN.IncrementalSnapshot:switch(t.data.source){case eF.Mutation:return t.data.adds.forEach(t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);let n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)}),t.data.removes.forEach(t=>{this.replaceIds(t,e,["parentId","id"])}),t.data.attributes.forEach(t=>{this.replaceIds(t,e,["id"])}),t.data.texts.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case eF.Drag:case eF.TouchMove:case eF.MouseMove:return t.data.positions.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case eF.ViewportResize:return!1;case eF.MediaInteraction:case eF.MouseInteraction:case eF.Scroll:case eF.CanvasMutation:case eF.Input:return this.replaceIds(t.data,e,["id"]),t;case eF.StyleSheetRule:case eF.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case eF.Font:return t;case eF.Selection:return t.data.ranges.forEach(t=>{this.replaceIds(t,e,["start","end"])}),t;case eF.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(n=t.data.styles)||n.forEach(t=>{this.replaceStyleIds(t,e,["styleId"])}),t}}return!1}replace(e,t,n,i){for(let r of i)(Array.isArray(t[r])||"number"==typeof t[r])&&(Array.isArray(t[r])?t[r]=e.getIds(n,t[r]):t[r]=e.getId(n,t[r]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(e=>{this.replaceIdOnNode(e,t)})}patchRootIdOnNode(e,t){e.type===v.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(e=>{this.patchRootIdOnNode(e,t)})}}class e4{constructor(e){f(this,"shadowDoms",new WeakSet),f(this,"mutationCb"),f(this,"scrollCb"),f(this,"bypassOptions"),f(this,"mirror"),f(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!x(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);let n=ez({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(eY({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(ec.host(e))),this.restoreHandlers.push(eQ({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){let n=this;this.restoreHandlers.push(em(e.prototype,"attachShadow",function(e){return function(i){let r=e.call(this,i),o=ec.shadowRoot(this);return o&&eA(this)&&n.addShadowRoot(o,t),r}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(e){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var e8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e6="undefined"==typeof Uint8Array?[]:new Uint8Array(256),e7=0;e7<64;e7++)e6[e8.charCodeAt(e7)]=e7;let e9=new Map,te=(e,t,n)=>{var i;let r;if(!e||!tn(e,t)&&"object"!=typeof e)return;let o=(i=e.constructor.name,(r=e9.get(n))||(r=new Map,e9.set(n,r)),r.has(i)||r.set(i,[]),r.get(i)),s=o.indexOf(e);return -1===s&&(s=o.length,o.push(e)),s},tt=(e,t,n)=>e.map(e=>(function e(t,n,i){if(t instanceof Array)return t.map(t=>e(t,n,i));if(null===t)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer)return{rr_type:t.constructor.name,base64:function(e){var t,n=new Uint8Array(e),i=n.length,r="";for(t=0;t<i;t+=3)r+=e8[n[t]>>2],r+=e8[(3&n[t])<<4|n[t+1]>>4],r+=e8[(15&n[t+1])<<2|n[t+2]>>6],r+=e8[63&n[t+2]];return i%3==2?r=r.substring(0,r.length-1)+"=":i%3==1&&(r=r.substring(0,r.length-2)+"=="),r}(t)};if(t instanceof DataView)return{rr_type:t.constructor.name,args:[e(t.buffer,n,i),t.byteOffset,t.byteLength]};if(t instanceof HTMLImageElement){let e=t.constructor.name,{src:n}=t;return{rr_type:e,src:n}}return t instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:t.toDataURL()}:t instanceof ImageData?{rr_type:t.constructor.name,args:[e(t.data,n,i),t.width,t.height]}:tn(t,n)||"object"==typeof t?{rr_type:t.constructor.name,index:te(t,n,i)}:t})(e,t,n)),tn=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(e=>"function"==typeof t[e]).find(n=>e instanceof t[n]);function ti(e,t,n,i){let r=[];try{let o=em(e.HTMLCanvasElement.prototype,"getContext",function(e){return function(r){for(var o=arguments.length,s=Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];if(!eC(this,t,n,!0)){let e="experimental-webgl"===r?"webgl":r;if("__context"in this||(this.__context=e),i&&["webgl","webgl2"].includes(e)){if(s[0]&&"object"==typeof s[0]){let e=s[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else s.splice(0,1,{preserveDrawingBuffer:!0})}}return e.apply(this,[r,...s])}});r.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{r.forEach(e=>e())}}function tr(e,t,n,i,r,o){let s=[];for(let a of Object.getOwnPropertyNames(e))if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(a))try{if("function"!=typeof e[a])continue;let l=em(e,a,function(e){return function(){for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];let d=e.apply(this,l);if(te(d,o,this),"tagName"in this.canvas&&!eC(this.canvas,i,r,!0)){let e=tt(l,o,this),i={type:t,property:a,args:e};n(this.canvas,i)}return d}});s.push(l)}catch{let i=e_(e,a,{set(e){n(this.canvas,{type:t,property:a,args:[e],setter:!0})}});s.push(i)}return s}let to="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",ts="undefined"!=typeof window&&window.Blob&&new Blob([Uint8Array.from(atob(to),e=>e.charCodeAt(0))],{type:"text/javascript;charset=utf-8"});function ta(e){let t;try{if(!(t=ts&&(window.URL||window.webkitURL).createObjectURL(ts)))throw"";let n=new Worker(t,{name:null==e?void 0:e.name});return n.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(t)}),n}catch(t){return new Worker("data:text/javascript;base64,"+to,{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}class tl{constructor(e){f(this,"pendingCanvasMutations",new Map),f(this,"rafStamps",{latestId:0,invokeId:null}),f(this,"mirror"),f(this,"mutationCb"),f(this,"resetObservers"),f(this,"frozen",!1),f(this,"locked",!1),f(this,"processMutation",(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)});let{sampling:t="all",win:n,blockClass:i,blockSelector:r,recordCanvas:o,dataURLOptions:s}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,o&&"all"===t&&this.initCanvasMutationObserver(n,i,r),o&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,i,r,{dataURLOptions:s})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,n,i,r){let o=ti(t,n,i,!0),s=new Map,a=new ta;a.onmessage=e=>{let{id:t}=e.data;if(s.set(t,!1),!("base64"in e.data))return;let{base64:n,type:i,width:r,height:o}=e.data;this.mutationCb({id:t,type:eO["2D"],commands:[{property:"clearRect",args:[0,0,r,o]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:i}]},0,0]}]})};let l=1e3/e,u,d=0,c=e=>{d&&e-d<l||(d=e,(()=>{let e=[],r=t=>{t.querySelectorAll("canvas").forEach(t=>{eC(t,n,i,!0)||e.push(t)}),t.querySelectorAll("*").forEach(e=>{e.shadowRoot&&r(e.shadowRoot)})};return r(t.document),e})().forEach(async e=>{var t;let n=this.mirror.getId(e);if(s.get(n)||0===e.width||0===e.height)return;if(s.set(n,!0),["webgl","webgl2"].includes(e.__context)){let n=e.getContext(e.__context);!1===(null==(t=null==n?void 0:n.getContextAttributes())?void 0:t.preserveDrawingBuffer)&&n.clear(n.COLOR_BUFFER_BIT)}let i=e.clientWidth||e.width,o=e.clientHeight||e.height,l=await createImageBitmap(e,{resizeWidth:i,resizeHeight:o});a.postMessage({id:n,bitmap:l,width:i,height:o,dataURLOptions:r.dataURLOptions},[l])})),u=requestAnimationFrame(c)};u=requestAnimationFrame(c),this.resetObservers=()=>{o(),cancelAnimationFrame(u)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let i=ti(e,t,n,!1),r=function(e,t,n,i){let r=[];for(let o of Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype))try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[o])continue;let s=em(t.CanvasRenderingContext2D.prototype,o,function(r){return function(){for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return eC(this.canvas,n,i,!0)||setTimeout(()=>{let n=tt(a,t,this);e(this.canvas,{type:eO["2D"],property:o,args:n})},0),r.apply(this,a)}});r.push(s)}catch{let n=e_(t.CanvasRenderingContext2D.prototype,o,{set(t){e(this.canvas,{type:eO["2D"],property:o,args:[t],setter:!0})}});r.push(n)}return()=>{r.forEach(e=>e())}}(this.processMutation.bind(this),e,t,n),o=function(e,t,n,i){let r=[];return r.push(...tr(t.WebGLRenderingContext.prototype,eO.WebGL,e,n,i,t)),void 0!==t.WebGL2RenderingContext&&r.push(...tr(t.WebGL2RenderingContext.prototype,eO.WebGL2,e,n,i,t)),()=>{r.forEach(e=>e())}}(this.processMutation.bind(this),e,t,n);this.resetObservers=()=>{i(),r(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{let n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;let n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;let i=n.map(e=>{let{type:t,...n}=e;return n}),{type:r}=n[0];this.mutationCb({id:t,type:r,commands:i}),this.pendingCanvasMutations.delete(e)}}class tu{constructor(e){f(this,"trackedLinkElements",new WeakSet),f(this,"mutationCb"),f(this,"adoptedStyleSheetCb"),f(this,"styleMirror",new eM),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;let n={id:t,styleIds:[]},i=[];for(let t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),i.push({styleId:e,rules:Array.from(t.rules||CSSRule,(e,n)=>({rule:M(e,t.href),index:n}))})),n.styleIds.push(e)}i.length>0&&(n.styles=i),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class td{constructor(){f(this,"nodeMap",new WeakMap),f(this,"active",!1)}inOtherBuffer(e,t){let n=this.nodeMap.get(e);return n&&Array.from(n).some(e=>e!==t)}add(e,t){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let tc,th,tp,tg=!1;try{if(2!==Array.from([1],e=>2*e)[0]){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=(null==(p=e.contentWindow)?void 0:p.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}let tf=new A;function t_(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{emit:n,checkoutEveryNms:r,checkoutEveryNth:o,blockClass:s="rr-block",blockSelector:a=null,ignoreClass:l="rr-ignore",ignoreSelector:u=null,maskTextClass:d="rr-mask",maskTextSelector:c=null,inlineStylesheet:h=!0,maskAllInputs:p,maskInputOptions:g,slimDOMOptions:f,maskInputFn:_,maskTextFn:m,hooks:v,packFn:y,sampling:b={},dataURLOptions:w={},mousemoveWait:S,recordDOM:C=!0,recordCanvas:I=!1,recordCrossOriginIframes:k=!1,recordAfter:E="DOMContentLoaded"===t.recordAfter?t.recordAfter:"load",userTriggeredOnInput:x=!1,collectFonts:T=!1,inlineImages:M=!1,plugins:R,keepIframeSrcFn:N=()=>!1,ignoreCSSAttributes:F=new Set([]),errorHandler:L}=t;i=L;let P=!k||window.parent===window,O=!1;if(!P)try{window.parent.document&&(O=!1)}catch(e){O=!0}if(P&&!n)throw Error("emit function is required");if(!P&&!O)return()=>{};void 0!==S&&void 0===b.mousemove&&(b.mousemove=S),tf.reset();let D=!0===p?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==g?g:{password:!0},$=!0===f||"all"===f?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===f,headMetaDescKeywords:"all"===f,headTitleMutations:"all"===f}:f||{};!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}();let B=0,H=e=>{for(let t of R||[])t.eventProcessor&&(e=t.eventProcessor(e));return y&&!O&&(e=y(e)),e};tc=(t,i)=>{var s;if(t.timestamp=ev(),(null==(s=eU[0])?void 0:s.isFrozen())&&t.type!==eN.FullSnapshot&&(t.type!==eN.IncrementalSnapshot||t.data.source!==eF.Mutation)&&eU.forEach(e=>e.unfreeze()),P)null==n||n(H(t),i);else if(O){let e={type:"rrweb",event:H(t),origin:window.location.origin,isCheckout:i};window.parent.postMessage(e,"*")}if(t.type===eN.FullSnapshot)e=t,B=0;else if(t.type===eN.IncrementalSnapshot){if(t.data.source===eF.Mutation&&t.data.isAttachIframe)return;B++;let n=o&&B>=o,i=r&&t.timestamp-e.timestamp>r;(n||i)&&th(!0)}};let q=e=>{tc({type:eN.IncrementalSnapshot,data:{source:eF.Mutation,...e}})},W=e=>tc({type:eN.IncrementalSnapshot,data:{source:eF.Scroll,...e}}),V=e=>tc({type:eN.IncrementalSnapshot,data:{source:eF.CanvasMutation,...e}}),Z=new tu({mutationCb:q,adoptedStyleSheetCb:e=>tc({type:eN.IncrementalSnapshot,data:{source:eF.AdoptedStyleSheet,...e}})}),U=new e3({mirror:tf,mutationCb:q,stylesheetManager:Z,recordCrossOriginIframes:k,wrappedEmit:tc});for(let e of R||[])e.getMirror&&e.getMirror({nodeMirror:tf,crossOriginIframeMirror:U.crossOriginIframeMirror,crossOriginIframeStyleMirror:U.crossOriginIframeStyleMirror});let G=new td;tp=new tl({recordCanvas:I,mutationCb:V,win:window,blockClass:s,blockSelector:a,mirror:tf,sampling:b.canvas,dataURLOptions:w});let z=new e4({mutationCb:q,scrollCb:W,bypassOptions:{blockClass:s,blockSelector:a,maskTextClass:d,maskTextSelector:c,inlineStylesheet:h,maskInputOptions:D,dataURLOptions:w,maskTextFn:m,maskInputFn:_,recordCanvas:I,inlineImages:M,sampling:b,slimDOMOptions:$,iframeManager:U,stylesheetManager:Z,canvasManager:tp,keepIframeSrcFn:N,processedNodeManager:G},mirror:tf});th=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!C)return;tc({type:eN.Meta,data:{href:window.location.href,width:ew(),height:eb()}},e),Z.reset(),z.init(),eU.forEach(e=>e.lock());let t=function(e,t){let{mirror:n=new A,blockClass:i="rr-block",blockSelector:r=null,maskTextClass:o="rr-mask",maskTextSelector:s=null,inlineStylesheet:a=!0,inlineImages:l=!1,recordCanvas:u=!1,maskAllInputs:d=!1,maskTextFn:c,maskInputFn:h,slimDOM:p=!1,dataURLOptions:g,preserveWhiteSpace:f,onSerialize:_,onIframeLoad:m,iframeLoadTimeout:v,onStylesheetLoad:y,stylesheetLoadTimeout:b,keepIframeSrcFn:w=()=>!1}=t||{};return et(e,{doc:e,mirror:n,blockClass:i,blockSelector:r,maskTextClass:o,maskTextSelector:s,skipChild:!1,inlineStylesheet:a,maskInputOptions:!0===d?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===d?{password:!0}:d,maskTextFn:c,maskInputFn:h,slimDOMOptions:!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===p,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===p?{}:p,dataURLOptions:g,inlineImages:l,recordCanvas:u,preserveWhiteSpace:f,onSerialize:_,onIframeLoad:m,iframeLoadTimeout:v,onStylesheetLoad:y,stylesheetLoadTimeout:b,keepIframeSrcFn:w,newlyAddedElement:!1})}(document,{mirror:tf,blockClass:s,blockSelector:a,maskTextClass:d,maskTextSelector:c,inlineStylesheet:h,maskAllInputs:D,maskTextFn:m,maskInputFn:_,slimDOM:$,dataURLOptions:w,recordCanvas:I,inlineImages:M,onSerialize:e=>{eE(e,tf)&&U.addIframe(e),ex(e,tf)&&Z.trackLinkElement(e),eT(e)&&z.addShadowRoot(ec.shadowRoot(e),document)},onIframeLoad:(e,t)=>{U.attachIframe(e,t),z.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Z.attachLinkElement(e,t)},keepIframeSrcFn:N});if(!t)return console.warn("Failed to snapshot the document");tc({type:eN.FullSnapshot,data:{node:t,initialOffset:ey(window)}},e),eU.forEach(e=>e.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Z.adoptStyleSheets(document.adoptedStyleSheets,tf.getId(document))};try{let e=[],t=e=>{var t;return eZ(e0)({mutationCb:q,mousemoveCb:(e,t)=>tc({type:eN.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>tc({type:eN.IncrementalSnapshot,data:{source:eF.MouseInteraction,...e}}),scrollCb:W,viewportResizeCb:e=>tc({type:eN.IncrementalSnapshot,data:{source:eF.ViewportResize,...e}}),inputCb:e=>tc({type:eN.IncrementalSnapshot,data:{source:eF.Input,...e}}),mediaInteractionCb:e=>tc({type:eN.IncrementalSnapshot,data:{source:eF.MediaInteraction,...e}}),styleSheetRuleCb:e=>tc({type:eN.IncrementalSnapshot,data:{source:eF.StyleSheetRule,...e}}),styleDeclarationCb:e=>tc({type:eN.IncrementalSnapshot,data:{source:eF.StyleDeclaration,...e}}),canvasMutationCb:V,fontCb:e=>tc({type:eN.IncrementalSnapshot,data:{source:eF.Font,...e}}),selectionCb:e=>{tc({type:eN.IncrementalSnapshot,data:{source:eF.Selection,...e}})},customElementCb:e=>{tc({type:eN.IncrementalSnapshot,data:{source:eF.CustomElement,...e}})},blockClass:s,ignoreClass:l,ignoreSelector:u,maskTextClass:d,maskTextSelector:c,maskInputOptions:D,inlineStylesheet:h,sampling:b,recordDOM:C,recordCanvas:I,inlineImages:M,userTriggeredOnInput:x,collectFonts:T,doc:e,maskInputFn:_,maskTextFn:m,keepIframeSrcFn:N,blockSelector:a,slimDOMOptions:$,dataURLOptions:w,mirror:tf,iframeManager:U,stylesheetManager:Z,shadowDomManager:z,processedNodeManager:G,canvasManager:tp,ignoreCSSAttributes:F,plugins:(null==(t=null==R?void 0:R.filter(e=>e.observer))?void 0:t.map(e=>({observer:e.observer,options:e.options,callback:t=>tc({type:eN.Plugin,data:{plugin:e.name,payload:t}})})))||[]},v)};U.addLoadListener(n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}});let n=()=>{th(),e.push(t(document)),tg=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(eh("DOMContentLoaded",()=>{tc({type:eN.DomContentLoaded,data:{}}),"DOMContentLoaded"===E&&n()})),e.push(eh("load",()=>{tc({type:eN.Load,data:{}}),"load"===E&&n()},window))),()=>{e.forEach(e=>e()),G.destroy(),tg=!1,i=void 0}}catch(e){console.warn(e)}}t_.addCustomEvent=(e,t)=>{if(!tg)throw Error("please add custom event after start recording");tc({type:eN.Custom,data:{tag:e,payload:t}})},t_.freezePage=()=>{eU.forEach(e=>e.freeze())},t_.takeFullSnapshot=e=>{if(!tg)throw Error("please take full snapshot after start recording");th(e)},t_.mirror=tf,(tv=tm||(tm={}))[tv.NotStarted=0]="NotStarted",tv[tv.Running=1]="Running",tv[tv.Stopped=2]="Stopped";var tm,tv,ty,tb=Object.defineProperty,tw=(e,t,n)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?tb(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n},tS=Object.defineProperty,tC=(e,t,n)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?tS(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n},tI=Object.defineProperty,tk=(e,t,n)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?tI(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n};let tE={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},tx={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},tT={},tM={};function tR(e,t,n){var i;let r=`${e}.${String(n)}`;if(tM[r])return tM[r].call(t);let o=null==(i=Object.getOwnPropertyDescriptor(function(e){if(tT[e])return tT[e];let t=globalThis[e],n=t.prototype,i=e in tE?tE[e]:void 0,r=!!(i&&i.every(e=>{var t,i;return!!(null==(i=null==(t=Object.getOwnPropertyDescriptor(n,e))?void 0:t.get)?void 0:i.toString().includes("[native code]"))})),o=e in tx?tx[e]:void 0,s=!!(o&&o.every(e=>{var t;return"function"==typeof n[e]&&(null==(t=n[e])?void 0:t.toString().includes("[native code]"))}));if(r&&s)return tT[e]=t.prototype,t.prototype;try{let i=document.createElement("iframe");document.body.appendChild(i);let r=i.contentWindow;if(!r)return t.prototype;let o=r[e].prototype;return document.body.removeChild(i),o?tT[e]=o:n}catch{return n}}(e),n))?void 0:i.get;return o?(tM[r]=o,o.call(t)):t[n]}let tA={parentNode:function(e){return tR("Node",e,"parentNode")},host:function(e){return e&&"host"in e?tR("ShadowRoot",e,"host"):null},shadowRoot:function(e){return e&&"shadowRoot"in e?tR("Element",e,"shadowRoot"):null}};class tN{constructor(){__publicField22(this,"parentElement",null),__publicField22(this,"parentNode",null),__publicField22(this,"ownerDocument"),__publicField22(this,"firstChild",null),__publicField22(this,"lastChild",null),__publicField22(this,"previousSibling",null),__publicField22(this,"nextSibling",null),__publicField22(this,"ELEMENT_NODE",1),__publicField22(this,"TEXT_NODE",3),__publicField22(this,"nodeType"),__publicField22(this,"nodeName"),__publicField22(this,"RRNodeType")}get childNodes(){let e=[],t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(!(e instanceof tN)||e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}let tF={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},tL={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},tP={};function tO(e){if(tP[e])return tP[e];let t=globalThis[e],n=t.prototype,i=e in tF?tF[e]:void 0,r=!!(i&&i.every(e=>{var t,i;return!!(null==(i=null==(t=Object.getOwnPropertyDescriptor(n,e))?void 0:t.get)?void 0:i.toString().includes("[native code]"))})),o=e in tL?tL[e]:void 0,s=!!(o&&o.every(e=>{var t;return"function"==typeof n[e]&&(null==(t=n[e])?void 0:t.toString().includes("[native code]"))}));if(r&&s)return tP[e]=t.prototype,t.prototype;try{let i=document.createElement("iframe");document.body.appendChild(i);let r=i.contentWindow;if(!r)return t.prototype;let o=r[e].prototype;return document.body.removeChild(i),o?tP[e]=o:n}catch{return n}}let tD={};function t$(e,t,n){var i;let r=`${e}.${String(n)}`;if(tD[r])return tD[r].call(t);let o=null==(i=Object.getOwnPropertyDescriptor(tO(e),n))?void 0:i.get;return o?(tD[r]=o,o.call(t)):t[n]}let tB={};function tH(e,t,n){let i=`${e}.${String(n)}`;if(tB[i])return tB[i].bind(t);let r=tO(e)[n];return"function"!=typeof r?t[n]:(tB[i]=r,r.bind(t))}let tq={parentNode:function(e){return t$("Node",e,"parentNode")},parentElement:function(e){return t$("Node",e,"parentElement")},contains:function(e,t){return tH("Node",e,"contains")(t)},getRootNode:function(e){return tH("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?t$("ShadowRoot",e,"host"):null},shadowRoot:function(e){return e&&"shadowRoot"in e?t$("Element",e,"shadowRoot"):null}},tW="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",tV={map:{},getId:()=>(console.error(tW),-1),getNode:()=>(console.error(tW),null),removeNodeFromMap(){console.error(tW)},has:()=>(console.error(tW),!1),reset(){console.error(tW)}};"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(tV=new Proxy(tV,{get:(e,t,n)=>("map"===t&&console.error(tW),Reflect.get(e,t,n))}));let tZ=Date.now;function tU(e){return e?e.nodeType===e.ELEMENT_NODE?e:tq.parentElement(e):null}function tG(e){var t;let n=null;return"getRootNode"in e&&(null==(t=tq.getRootNode(e))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&tq.host(tq.getRootNode(e))&&(n=tq.host(tq.getRootNode(e))),n}function tz(e){let t,n=e;for(;t=tG(n);)n=t;return n}function tY(e){let t=e.ownerDocument;if(!t)return!1;let n=tz(e);return tq.contains(t,n)}/[1-9][0-9]{12}/.test(Date.now().toString())||(tZ=()=>(new Date).getTime());let tj=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:class{constructor(){tC(this,"id",1),tC(this,"styleIDMap",new WeakMap),tC(this,"idStyleMap",new Map)}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){let n;return this.has(e)?this.getId(e):(n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n)}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}},get _mirror(){return tV},closestElementOfNode:tU,getBaseDimension:function e(t,n){var i,r;let o=null==(r=null==(i=t.ownerDocument)?void 0:i.defaultView)?void 0:r.frameElement;if(!o||o===n)return{x:0,y:0,relativeScale:1,absoluteScale:1};let s=o.getBoundingClientRect(),a=e(o,n),l=s.height/o.clientHeight;return{x:s.x*a.relativeScale+a.x,y:s.y*a.relativeScale+a.y,relativeScale:l,absoluteScale:a.absoluteScale*l}},getNestedRule:function e(t,n){let i=t[n[0]];return 1===n.length?i:e(i.cssRules[n[1]].cssRules,n.slice(2))},getPositionsAndIndex:function(e){let t=[...e],n=t.pop();return{positions:t,index:n}},getRootShadowHost:tz,getShadowHost:tG,getWindowHeight:function(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight},getWindowScroll:function(e){var t,n,i,r;let o=e.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:o.documentElement.scrollLeft||(null==o?void 0:o.body)&&(null==(t=tq.parentElement(o.body))?void 0:t.scrollLeft)||(null==(n=null==o?void 0:o.body)?void 0:n.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==o?void 0:o.documentElement.scrollTop)||(null==o?void 0:o.body)&&(null==(i=tq.parentElement(o.body))?void 0:i.scrollTop)||(null==(r=null==o?void 0:o.body)?void 0:r.scrollTop)||0}},getWindowWidth:function(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth},hasShadowRoot:function(e){return!!e&&(e instanceof tN&&"shadowRoot"in e?!!e.shadowRoot:!!tq.shadowRoot(e))},hookSetter:function e(t,n,i,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window,s=o.Object.getOwnPropertyDescriptor(t,n);return o.Object.defineProperty(t,n,r?i:{set(e){setTimeout(()=>{i.set.call(this,e)},0),s&&s.set&&s.set.call(this,e)}}),()=>e(t,n,s||{},!0)},inDom:function(e){let t=e.ownerDocument;return!!t&&(tq.contains(t,e)||tY(e))},isAncestorRemoved:function e(t,n){if(function(e){let t=e&&"host"in e&&"mode"in e&&tA.host(e)||null;return!!(t&&"shadowRoot"in t&&tA.shadowRoot(t)===e)}(t))return!1;let i=n.getId(t);if(!n.has(i))return!0;let r=tq.parentNode(t);return(!r||r.nodeType!==t.DOCUMENT_NODE)&&(!r||e(r,n))},isBlocked:function(e,t,n,i){if(!e)return!1;let r=tU(e);if(!r)return!1;try{if("string"==typeof t){if(r.classList.contains(t)||i&&null!==r.closest("."+t))return!0}else if(function e(t,n,i){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return!!i&&e(tA.parentNode(t),n,i);for(let e=t.classList.length;e--;){let i=t.classList[e];if(n.test(i))return!0}return!!i&&e(tA.parentNode(t),n,i)}(r,t,i))return!0}catch(e){}return!!(n&&(r.matches(n)||i&&null!==r.closest(n)))},isIgnored:function(e,t,n){return!("TITLE"!==e.tagName||!n.headTitleMutations)||-2===t.getId(e)},isSerialized:function(e,t){return -1!==t.getId(e)},isSerializedIframe:function(e,t){return!!("IFRAME"===e.nodeName&&t.getMeta(e))},isSerializedStylesheet:function(e,t){return!!("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))},iterateResolveTree:function e(t,n){n(t.value);for(let i=t.children.length-1;i>=0;i--)e(t.children[i],n)},legacy_isTouchEvent:function(e){return!!e.changedTouches},get nowTimestamp(){return tZ},on:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,i={capture:!0,passive:!0};return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)},patch:function(e,t,n){try{if(!(t in e))return()=>{};let i=e[t],r=n(i);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:i}})),e[t]=r,()=>{e[t]=i}}catch{return()=>{}}},polyfill:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)},queueToResolveTrees:function(e){let t={},n=(e,n)=>{let i={value:e,parent:n,children:[]};return t[e.node.id]=i,i},i=[];for(let r of e){let{nextId:e,parentId:o}=r;if(e&&e in t){let o=t[e];if(o.parent){let e=o.parent.children.indexOf(o);o.parent.children.splice(e,0,n(r,o.parent))}else{let e=i.indexOf(o);i.splice(e,0,n(r,null))}}else if(o in t){let e=t[o];e.children.push(n(r,e))}else i.push(n(r,null))}return i},shadowHostInDom:tY,throttle:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null,r=0;return function(){for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];let l=Date.now();r||!1!==n.leading||(r=l);let u=t-(l-r),d=this;u<=0||u>t?(i&&(clearTimeout(i),i=null),r=l,e.apply(d,s)):i||!1===n.trailing||(i=setTimeout(()=>{r=!1===n.leading?0:Date.now(),i=null,e.apply(d,s)},u))}},uniqueTextMutations:function(e){let t=new Set,n=[];for(let i=e.length;i--;){let r=e[i];t.has(r.id)||(n.push(r),t.add(r.id))}return n}},Symbol.toStringTag,{value:"Module"}));for(var tX="undefined"==typeof Uint8Array?[]:new Uint8Array(256),tJ=0;tJ<64;tJ++)tX["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(tJ)]=tJ;"undefined"!=typeof window&&window.Blob&&new Blob([Uint8Array.from(atob("KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo="),e=>e.charCodeAt(0))],{type:"text/javascript;charset=utf-8"});try{if(2!==Array.from([1],e=>2*e)[0]){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=(null==(ty=e.contentWindow)?void 0:ty.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}new class{constructor(){tk(this,"idNodeMap",new Map),tk(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return -1;let n=null==(t=this.getMeta(e))?void 0:t.id;return null!=n?n:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){let n=this.getNode(e);if(n){let e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}},(c=h||(h={}))[c.NotStarted=0]="NotStarted",c[c.Running=1]="Running",c[c.Stopped=2]="Stopped";class tK{constructor(e){tw(this,"fileName"),tw(this,"functionName"),tw(this,"lineNumber"),tw(this,"columnNumber"),this.fileName=e.fileName||"",this.functionName=e.functionName||"",this.lineNumber=e.lineNumber,this.columnNumber=e.columnNumber}toString(){let e=this.lineNumber||"",t=this.columnNumber||"";return this.functionName?`${this.functionName} (${this.fileName}:${e}:${t})`:`${this.fileName}:${e}:${t}`}}let tQ=/(^|@)\S+:\d+/,t0=/^\s*at .*(\S+:\d+|\(native\))/m,t1=/^(eval@)?(\[native code])?$/,t2={parse:function(e){return e?void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(t0)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):(console.warn("[console-record-plugin]: Failed to parse error object:",e),[]):[]},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];let t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));if(!t)throw Error(`Cannot parse given url: ${e}`);return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(t0)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));let t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=t.match(/ (\((.+):(\d+):(\d+)\)$)/),i=(t=n?t.replace(n[0],""):t).split(/\s+/).slice(1),r=this.extractLocation(n?n[1]:i.pop());return new tK({functionName:i.join(" ")||void 0,fileName:["eval","<anonymous>"].indexOf(r[0])>-1?void 0:r[0],lineNumber:r[1],columnNumber:r[2]})},this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter(function(e){return!e.match(t1)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new tK({functionName:e});{let t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),i=n&&n[1]?n[1]:void 0,r=this.extractLocation(e.replace(t,""));return new tK({functionName:i,fileName:r[0],lineNumber:r[1],columnNumber:r[2]})}},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){let t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),i=[];for(let e=2,r=n.length;e<r;e+=2){let r=t.exec(n[e]);r&&i.push(new tK({fileName:r[2],lineNumber:parseFloat(r[1])}))}return i},parseOpera10:function(e){let t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),i=[];for(let e=0,r=n.length;e<r;e+=2){let r=t.exec(n[e]);r&&i.push(new tK({functionName:r[3]||void 0,fileName:r[2],lineNumber:parseFloat(r[1])}))}return i},parseOpera11:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(tQ)&&!e.match(/^Error created at/)},this).map(function(e){let t=e.split("@"),n=this.extractLocation(t.pop());return new tK({functionName:(t.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})},this)}};function t5(e){return"[object Object]"===Object.prototype.toString.call(e)}function t3(e,t){let n={numOfKeysLimit:50,depthOfLimit:4};Object.assign(n,t);let i=[],r=[];return JSON.stringify(e,function(e,t){var o;if(i.length>0){let n=i.indexOf(this);~n?i.splice(n+1):i.push(this),~n?r.splice(n,1/0,e):r.push(e),~i.indexOf(t)&&(t=i[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,i.indexOf(t)).join(".")+"]")}else i.push(t);if(null===t)return t;if(void 0===t)return"undefined";if(t5(o=t)&&Object.keys(o).length>n.numOfKeysLimit||"function"==typeof o||t5(o)&&function e(t,n){if(0===n)return!0;for(let i of Object.keys(t))if(t5(t[i])&&e(t[i],n-1))return!0;return!1}(o,n.depthOfLimit)){let e;return e=t.toString(),n.stringLengthLimit&&e.length>n.stringLengthLimit&&(e=`${e.slice(0,n.stringLengthLimit)}...`),e}if("bigint"==typeof t)return t.toString()+"n";if(t instanceof Event){let e={};for(let n in t){let i=t[n];Array.isArray(i)?e[n]=function(e){if(!e||!e.outerHTML)return"";let t="";for(;e.parentElement;){let n=e.localName;if(!n)break;n=n.toLowerCase();let i=e.parentElement,r=[];if(i.children&&i.children.length>0)for(let e=0;e<i.children.length;e++){let t=i.children[e];t.localName&&t.localName.toLowerCase&&t.localName.toLowerCase()===n&&r.push(t)}r.length>1&&(n+=`:eq(${r.indexOf(e)})`),t=n+(t?">"+t:""),e=i}return t}(i.length?i[0]:null):e[n]=i}return e}return t instanceof Node?t instanceof HTMLElement?t?t.outerHTML:"":t.nodeName:t instanceof Error?t.stack?t.stack+"\nEnd of stack for Error object":t.name+": "+t.message:t})}let t4={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function t8(e,t,n){let i;let r=n?Object.assign({},t4,n):t4,o=r.logger;if(!o)return()=>{};i="string"==typeof o?t[o]:o;let s=0,a=!1,l=[];if(r.level.includes("error")){let n=t=>{let n=t.message,i=t.error;e({level:"error",trace:t2.parse(i).map(e=>e.toString()),payload:[t3(n,r.stringifyOptions)]})};t.addEventListener("error",n),l.push(()=>{t.removeEventListener("error",n)});let i=t=>{let n,i;t.reason instanceof Error?(n=t.reason,i=[t3(`Uncaught (in promise) ${n.name}: ${n.message}`,r.stringifyOptions)]):(n=Error(),i=[t3("Uncaught (in promise)",r.stringifyOptions),t3(t.reason,r.stringifyOptions)]),e({level:"error",trace:t2.parse(n).map(e=>e.toString()),payload:i})};t.addEventListener("unhandledrejection",i),l.push(()=>{t.removeEventListener("unhandledrejection",i)})}for(let t of r.level)l.push(function(t,n){var i=this;return t[n]?tj.patch(t,n,t=>function(){for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];if(t.apply(i,l),!("assert"===n&&l[0]||a)){a=!0;try{let t=t2.parse(Error()).map(e=>e.toString()).splice(1),i=("assert"===n?l.slice(1):l).map(e=>t3(e,r.stringifyOptions));++s<r.lengthThreshold?e({level:n,trace:t,payload:i}):s===r.lengthThreshold&&e({level:"warn",trace:[],payload:[t3("The number of log records reached the threshold.")]})}catch(e){t("rrweb logger error:",e,...l)}finally{a=!1}}}):()=>{}}(i,t));return()=>{l.forEach(e=>e())}}let t6=e=>({name:"rrweb/console@1",observer:t8,options:e}),t7=Array.isArray,t9=Object.prototype,ne=t9.hasOwnProperty,nt=t9.toString,nn=t7||function(e){return"[object Array]"===nt.call(e)},ni=function(e){return void 0===e},nr=function(e){return null===e},no=function(e){return ni(e)||nr(e)},ns=function(e){return"[object Boolean]"===nt.call(e)},na=e=>e instanceof Document,nl=e=>e instanceof FormData,nu="undefined"!=typeof window?window:void 0,nd="undefined"!=typeof globalThis?globalThis:nu,nc=Array.prototype.forEach,nh=null==nd?void 0:nd.navigator;null==nd||nd.document,null==nd||nd.location,null==nd||nd.fetch,null!=nd&&nd.XMLHttpRequest&&"withCredentials"in new nd.XMLHttpRequest&&nd.XMLHttpRequest,null==nd||nd.AbortController,null==nh||nh.userAgent;let np=null!=nu?nu:{},ng="[PostHog.js]",nf={_log:function(e){if(nu&&np.POSTHOG_DEBUG&&!ni(nu.console)&&nu.console){let r="__rrweb_original__"in nu.console[e]?nu.console[e].__rrweb_original__:nu.console[e];for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r(ng,...n)}},info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];nf._log("log",...t)},warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];nf._log("warn",...t)},error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];nf._log("error",...t)},critical:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error(ng,...t)},uninitializedWarning:e=>{nf.error(`You must initialize PostHog before calling ${e}`)}},n_={},nm=function(e){let t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",r=[];return function(e,t,n){if(!no(e)){if(nn(e))return function(e,t,n){if(nn(e)){if(nc&&e.forEach===nc)e.forEach(t,n);else if("length"in e&&e.length===+e.length){for(let i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i)===n_)return}}}(e,t,void 0);if(nl(e)){for(let n of e.entries())if(t.call(void 0,n[1],n[0])===n_)return}else for(let n in e)if(ne.call(e,n)&&t.call(void 0,e[n],n)===n_)return}}(e,function(e,i){ni(e)||ni(i)||"undefined"===i||(t=encodeURIComponent(e instanceof File?e.name:e.toString()),n=encodeURIComponent(i),r[r.length]=n+"="+t)}),r.join(i)},nv={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io"]};function ny(e,t,n){try{if(!(t in e))return()=>{};let i=e[t],r=n(i);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=r,()=>{e[t]=i}}catch{return()=>{}}}function nb(e,t){var n;let i=function(e){try{return"string"==typeof e?new URL(e).hostname:"url"in e?new URL(e.url).hostname:e.hostname}catch{return null}}(e),r={hostname:i,isHostDenied:!1};if(null===(n=t.payloadHostDenyList)||void 0===n||!n.length||null==i||!i.trim().length)return r;for(let e of t.payloadHostDenyList)if(i.endsWith(e))return{hostname:i,isHostDenied:!0};return r}let nw=e=>"navigation"===e.entryType,nS=e=>"resource"===e.entryType;function nC(e,t){for(let n=e.length-1;n>=0;n-=1)if(t(e[n]))return e[n]}function nI(e,t){return!!t&&(ns(t)||t[e])}function nk(e){let{type:t,recordBody:n,headers:i}=e;function r(e){let t=Object.keys(i).find(e=>"content-type"===e.toLowerCase()),n=t&&i[t];return e.some(e=>null==n?void 0:n.includes(e))}if(!n)return!1;if(ns(n))return!0;if(nn(n))return r(n);let o=n[t];return ns(o)?o:r(o)}async function nE(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return o>10?(nf.warn("Failed to get performance entry for request",{url:n,initiatorType:t}),null):nC(e.performance.getEntriesByName(n),e=>nS(e)&&e.initiatorType===t&&(ni(i)||e.startTime>=i)&&(ni(r)||e.startTime<=r))||(await new Promise(e=>setTimeout(e,50*o)),nE(e,t,n,i,r,o+1))}function nx(e){let{body:t,options:n,url:i}=e;if(no(t))return null;let{hostname:r,isHostDenied:o}=nb(i,n);if(o)return r+" is in deny list";if("[object String]"==nt.call(t))return t;if(na(t))return t.textContent;if(nl(t))return nm(t);if(t===Object(t)&&!nn(t))try{return JSON.stringify(t)}catch{return"[SessionReplay] Failed to stringify response object"}return"[SessionReplay] Cannot read body of type "+toString.call(t)}let nT=e=>!nr(e)&&("navigation"===e.entryType||"resource"===e.entryType);function nM(e){let{entry:t,method:n,status:i,networkRequest:r,isInitial:o,start:s,end:a,url:l,initiatorType:u}=e;s=t?t.startTime:s,a=t?t.responseEnd:a;let d=Math.floor(Date.now()-performance.now()),c=Math.floor(d+(s||0)),h=[{...t?t.toJSON():{name:l},startTime:ni(s)?void 0:Math.round(s),endTime:ni(a)?void 0:Math.round(a),timeOrigin:d,timestamp:c,method:n,initiatorType:u||(t?t.initiatorType:void 0),status:i,requestHeaders:r.requestHeaders,requestBody:r.requestBody,responseHeaders:r.responseHeaders,responseBody:r.responseBody,isInitial:o}];if(nT(t))for(let e of t.serverTiming||[])h.push({timeOrigin:d,timestamp:c,startTime:Math.round(t.startTime),name:e.name,duration:e.duration,entryType:"serverTiming"});return h}let nR=["video/","audio/"];function nA(e){return new Promise((t,n)=>{let i=setTimeout(()=>t("[SessionReplay] Timeout while trying to read body"),500);try{e.clone().text().then(e=>t(e),e=>n(e)).finally(()=>clearTimeout(i))}catch{clearTimeout(i),t("[SessionReplay] Failed to read body")}})}async function nN(e){let{r:t,options:n,url:i}=e,r=function(e){var t;let{r:n,options:i,url:r}=e;if("chunked"===n.headers.get("Transfer-Encoding"))return"Chunked Transfer-Encoding is not supported";let o=null===(t=n.headers.get("Content-Type"))||void 0===t?void 0:t.toLowerCase(),s=nR.some(e=>null==o?void 0:o.startsWith(e));if(o&&s)return`Content-Type ${o} is not supported`;let{hostname:a,isHostDenied:l}=nb(r,i);return l?a+" is in deny list":null}({r:t,options:n,url:i});return nr(r)?nA(t):Promise.resolve(r)}let nF=null;function nL(e,t,n){if(!("performance"in t))return()=>{};if(nF)return nf.warn("Network observer already initialised, doing nothing"),()=>{};let i=n?Object.assign({},nv,n):nv,r=t=>{let n=[];t.requests.forEach(e=>{let t=i.maskRequestFn(e);t&&n.push(t)}),n.length>0&&e({...t,requests:n})},o=function(e,t,n){n.recordInitialRequests&&e({requests:t.performance.getEntries().filter(e=>nw(e)||nS(e)&&n.initiatorTypes.includes(e.initiatorType)).flatMap(e=>nM({entry:e,method:void 0,status:void 0,networkRequest:{},isInitial:!0})),isInitial:!0});let i=new t.PerformanceObserver(t=>{e({requests:t.getEntries().filter(e=>nw(e)||nS(e)&&n.initiatorTypes.includes(e.initiatorType)&&(!n.recordBody&&!n.recordHeaders||"xmlhttprequest"!==e.initiatorType&&"fetch"!==e.initiatorType)).flatMap(e=>nM({entry:e,method:void 0,status:void 0,networkRequest:{}}))})}),r=PerformanceObserver.supportedEntryTypes.filter(e=>n.performanceEntryTypeToObserve.includes(e));return i.observe({entryTypes:r}),()=>{i.disconnect()}}(r,t,i),s=()=>{},a=()=>{};return(i.recordHeaders||i.recordBody)&&(s=function(e,t,n){if(!n.initiatorTypes.includes("xmlhttprequest"))return()=>{};let i=nI("request",n.recordHeaders),r=nI("response",n.recordHeaders),o=ny(t.XMLHttpRequest.prototype,"open",o=>function(s,a){let l,u,d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=arguments.length>3?arguments[3]:void 0,h=arguments.length>4?arguments[4]:void 0,p=this,g=new Request(a),f={},_={},m=p.setRequestHeader.bind(p);p.setRequestHeader=(e,t)=>(_[e]=t,m(e,t)),i&&(f.requestHeaders=_);let v=p.send.bind(p);p.send=e=>(nk({type:"request",headers:_,url:a,recordBody:n.recordBody})&&(f.requestBody=nx({body:e,options:n,url:a})),l=t.performance.now(),v(e)),p.addEventListener("readystatechange",()=>{if(p.readyState!==p.DONE)return;u=t.performance.now();let i={};p.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(e=>{let t=e.split(": "),n=t.shift(),r=t.join(": ");n&&(i[n]=r)}),r&&(f.responseHeaders=i),nk({type:"response",headers:i,url:a,recordBody:n.recordBody})&&(f.responseBody=nx({body:p.response,options:n,url:a})),nE(t,"xmlhttprequest",g.url,l,u).then(t=>{e({requests:nM({entry:t,method:s,status:null==p?void 0:p.status,networkRequest:f,start:l,end:u,url:a.toString(),initiatorType:"xmlhttprequest"})})}).catch(()=>{})}),o.call(p,s,a,d,c,h)});return()=>{o()}}(r,t,i),a=function(e,t,n){if(!n.initiatorTypes.includes("fetch"))return()=>{};let i=nI("request",n.recordHeaders),r=nI("response",n.recordHeaders),o=ny(t,"fetch",o=>async function(s,a){let l,u,d;let c=new Request(s,a),h={};try{let e={};c.headers.forEach((t,n)=>{e[n]=t}),i&&(h.requestHeaders=e),nk({type:"request",headers:e,url:s,recordBody:n.recordBody})&&(h.requestBody=await async function(e){let{r:t,options:n,url:i}=e,{hostname:r,isHostDenied:o}=nb(i,n);return o?Promise.resolve(r+" is in deny list"):nA(t)}({r:c,options:n,url:s})),u=t.performance.now(),l=await o(c),d=t.performance.now();let a={};return l.headers.forEach((e,t)=>{a[t]=e}),r&&(h.responseHeaders=a),nk({type:"response",headers:a,url:s,recordBody:n.recordBody})&&(h.responseBody=await nN({r:l,options:n,url:s})),l}finally{nE(t,"fetch",c.url,u,d).then(t=>{var n;e({requests:nM({entry:t,method:c.method,status:null===(n=l)||void 0===n?void 0:n.status,networkRequest:h,start:u,end:d,url:c.url,initiatorType:"fetch"})})}).catch(()=>{})}});return()=>{o()}}(r,t,i)),nF=()=>{o(),s(),a()}}let nP="rrweb/network@1",nO=e=>({name:nP,observer:nL,options:e});np.__PosthogExtensions__=np.__PosthogExtensions__||{},np.__PosthogExtensions__.rrwebPlugins={getRecordConsolePlugin:t6,getRecordNetworkPlugin:nO},np.__PosthogExtensions__.rrweb={record:t_,version:"v2"},np.rrweb={record:t_,version:"v2"},np.rrwebConsoleRecord={getRecordConsolePlugin:t6},np.getRecordNetworkPlugin=nO,e.NETWORK_PLUGIN_NAME=nP,e.default=t_,e.findLast=nC,e.getRecordNetworkPlugin=nO,Object.defineProperty(e,"__esModule",{value:!0})}({}),function(){let e,t,n;(l=e||(e={})).Popover="popover",l.API="api",l.Widget="widget",(u=t||(t={})).Open="open",u.MultipleChoice="multiple_choice",u.SingleChoice="single_choice",u.Rating="rating",u.Link="link",(d=n||(n={})).NextQuestion="next_question",d.End="end",d.ResponseBased="response_based",d.SpecificQuestion="specific_question";let i="undefined"!=typeof window?window:void 0,r="undefined"!=typeof globalThis?globalThis:i,o=null==r?void 0:r.navigator,s=null==r?void 0:r.document;null==r||r.location,null==r||r.fetch,null!=r&&r.XMLHttpRequest&&"withCredentials"in new r.XMLHttpRequest&&r.XMLHttpRequest,null==r||r.AbortController,null==o||o.userAgent;let a=null!=i?i:{};var l,u,d,c,h,p,g,f,_,m,v,y={},b=[],w=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,S=Array.isArray;function C(e,t){for(var n in t)e[n]=t[n];return e}function I(e){var t=e.parentNode;t&&t.removeChild(e)}function k(e,t,n){var i,r,o,s={};for(o in t)"key"==o?i=t[o]:"ref"==o?r=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?c.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===s[o]&&(s[o]=e.defaultProps[o]);return E(e,s,i,r,null)}function E(e,t,n,i,r){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++p:r,__i:-1,__u:0};return null==r&&null!=h.vnode&&h.vnode(o),o}function x(e){return e.children}function T(e,t){this.props=e,this.context=t}function M(e,t){if(null==t)return e.__?M(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?M(e):null}function R(e){(!e.__d&&(e.__d=!0)&&g.push(e)&&!A.__r++||f!==h.debounceRendering)&&((f=h.debounceRendering)||_)(A)}function A(){var e,t,n,i,r,o,s,a,l;for(g.sort(m);e=g.shift();)e.__d&&(t=g.length,i=void 0,o=(r=(n=e).__v).__e,a=[],l=[],(s=n.__P)&&((i=C({},r)).__v=r.__v+1,h.vnode&&h.vnode(i),D(s,i,r,n.__n,void 0!==s.ownerSVGElement,32&r.__u?[o]:null,a,null==o?M(r):o,!!(32&r.__u),l),i.__.__k[i.__i]=i,$(a,i,l),i.__e!=o&&function e(t){var n,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(i=t.__k[n])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(i)),g.length>t&&g.sort(m));A.__r=0}function N(e,t,n,i,r,o,s,a,l,u,d){var c,h,p,g,f,_=i&&i.__k||b,m=t.length;for(n.__d=l,function(e,t,n){var i,r,o,s,a,l=t.length,u=n.length,d=u,c=0;for(e.__k=[],i=0;i<l;i++)null!=(r=e.__k[i]=null==(r=t[i])||"boolean"==typeof r||"function"==typeof r?null:"string"==typeof r||"number"==typeof r||"bigint"==typeof r||r.constructor==String?E(null,r,null,null,r):S(r)?E(x,{children:r},null,null,null):void 0===r.constructor&&r.__b>0?E(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)?(r.__=e,r.__b=e.__b+1,a=function(e,t,n,i){var r=e.key,o=e.type,s=n-1,a=n+1,l=t[n];if(null===l||l&&r==l.key&&o===l.type)return n;if(i>(null!=l&&0==(131072&l.__u)?1:0))for(;s>=0||a<t.length;){if(s>=0){if((l=t[s])&&0==(131072&l.__u)&&r==l.key&&o===l.type)return s;s--}if(a<t.length){if((l=t[a])&&0==(131072&l.__u)&&r==l.key&&o===l.type)return a;a++}}return -1}(r,n,s=i+c,d),r.__i=a,o=null,-1!==a&&(d--,(o=n[a])&&(o.__u|=131072)),null==o||null===o.__v?(-1==a&&c--,"function"!=typeof r.type&&(r.__u|=65536)):a!==s&&(a===s+1?c++:a>s?d>l-s?c+=a-s:c--:c=a<s&&a==s-1?a-s:0,a!==i+c&&(r.__u|=65536))):(o=n[i])&&null==o.key&&o.__e&&(o.__e==e.__d&&(e.__d=M(o)),H(o,o,!1),n[i]=null,d--);if(d)for(i=0;i<u;i++)null!=(o=n[i])&&0==(131072&o.__u)&&(o.__e==e.__d&&(e.__d=M(o)),H(o,o))}(n,t,_),l=n.__d,c=0;c<m;c++)null!=(p=n.__k[c])&&"boolean"!=typeof p&&"function"!=typeof p&&(h=-1===p.__i?y:_[p.__i]||y,p.__i=c,D(e,p,h,r,o,s,a,l,u,d),g=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&B(h.ref,null,p),d.push(p.ref,p.__c||g,p)),null==f&&null!=g&&(f=g),65536&p.__u||h.__k===p.__k?l=function e(t,n,i){var r,o;if("function"==typeof t.type){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,n=e(r[o],n,i));return n}return t.__e!=n&&(i.insertBefore(t.__e,n||null),n=t.__e),n&&n.nextSibling}(p,l,e):"function"==typeof p.type&&void 0!==p.__d?l=p.__d:g&&(l=g.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=l,n.__e=f}function F(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||w.test(t)?n:n+"px"}function L(e,t,n,i,r){var o;e:if("style"===t){if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||F(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||F(e.style,t,n[t])}}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=Date.now(),e.addEventListener(t,o?O:P,o)):e.removeEventListener(t,o?O:P,o);else{if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function P(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(h.event?h.event(e):e)}function O(e){return this.l[e.type+!0](h.event?h.event(e):e)}function D(e,t,n,i,r,o,s,a,l,u){var d,p,g,f,_,m,v,b,w,k,E,R,A,F,P,O=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),o=[a=t.__e=n.__e]),(d=h.__b)&&d(t);e:if("function"==typeof O)try{if(b=t.props,w=(d=O.contextType)&&i[d.__c],k=d?w?w.props.value:d.__:i,n.__c?v=(p=t.__c=n.__c).__=p.__E:("prototype"in O&&O.prototype.render?t.__c=p=new O(b,k):(t.__c=p=new T(b,k),p.constructor=O,p.render=q),w&&w.sub(p),p.props=b,p.state||(p.state={}),p.context=k,p.__n=i,g=p.__d=!0,p.__h=[],p._sb=[]),null==p.__s&&(p.__s=p.state),null!=O.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=C({},p.__s)),C(p.__s,O.getDerivedStateFromProps(b,p.__s))),f=p.props,_=p.state,p.__v=t,g)null==O.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==O.getDerivedStateFromProps&&b!==f&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(b,k),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(b,p.__s,k)||t.__v===n.__v)){for(t.__v!==n.__v&&(p.props=b,p.state=p.__s,p.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(e){e&&(e.__=t)}),E=0;E<p._sb.length;E++)p.__h.push(p._sb[E]);p._sb=[],p.__h.length&&s.push(p);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(b,p.__s,k),null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(f,_,m)})}if(p.context=k,p.props=b,p.__P=e,p.__e=!1,R=h.__r,A=0,"prototype"in O&&O.prototype.render){for(p.state=p.__s,p.__d=!1,R&&R(t),d=p.render(p.props,p.state,p.context),F=0;F<p._sb.length;F++)p.__h.push(p._sb[F]);p._sb=[]}else do p.__d=!1,R&&R(t),d=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++A<25)p.state=p.__s,null!=p.getChildContext&&(i=C(C({},i),p.getChildContext())),g||null==p.getSnapshotBeforeUpdate||(m=p.getSnapshotBeforeUpdate(f,_)),N(e,S(P=null!=d&&d.type===x&&null==d.key?d.props.children:d)?P:[P],t,n,i,r,o,s,a,l,u),p.base=t.__e,t.__u&=-161,p.__h.length&&s.push(p),v&&(p.__E=p.__=null)}catch(e){t.__v=null,l||null!=o?(t.__e=a,t.__u|=l?160:32,o[o.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),h.__e(e,t,n)}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,i,r,o,s,a,l){var u,d,h,p,g,f,_,m=n.props,v=t.props,b=t.type;if("svg"===b&&(r=!0),null!=o){for(u=0;u<o.length;u++)if((g=o[u])&&"setAttribute"in g==!!b&&(b?g.localName===b:3===g.nodeType)){e=g,o[u]=null;break}}if(null==e){if(null===b)return document.createTextNode(v);e=r?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,v.is&&v),o=null,a=!1}if(null===b)m===v||a&&e.data===v||(e.data=v);else{if(o=o&&c.call(e.childNodes),m=n.props||y,!a&&null!=o)for(m={},u=0;u<e.attributes.length;u++)m[(g=e.attributes[u]).name]=g.value;for(u in m)g=m[u],"children"==u||("dangerouslySetInnerHTML"==u?h=g:"key"===u||u in v||L(e,u,null,g,r));for(u in v)g=v[u],"children"==u?p=g:"dangerouslySetInnerHTML"==u?d=g:"value"==u?f=g:"checked"==u?_=g:"key"===u||a&&"function"!=typeof g||m[u]===g||L(e,u,g,m[u],r);if(d)a||h&&(d.__html===h.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(h&&(e.innerHTML=""),N(e,S(p)?p:[p],t,n,i,r&&"foreignObject"!==b,o,s,o?o[0]:n.__k&&M(n,0),a,l),null!=o)for(u=o.length;u--;)null!=o[u]&&I(o[u]);a||(u="value",void 0===f||f===e[u]&&("progress"!==b||f)&&("option"!==b||f===m[u])||L(e,u,f,m[u],!1),u="checked",void 0!==_&&_!==e[u]&&L(e,u,_,m[u],!1))}return e}(n.__e,t,n,i,r,o,s,l,u);(d=h.diffed)&&d(t)}function $(e,t,n){t.__d=void 0;for(var i=0;i<n.length;i++)B(n[i],n[++i],n[++i]);h.__c&&h.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){h.__e(e,t.__v)}})}function B(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){h.__e(e,n)}}function H(e,t,n){var i,r;if(h.unmount&&h.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||B(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){h.__e(e,t)}i.base=i.__P=null,e.__c=void 0}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&H(i[r],t,n||"function"!=typeof e.type);n||null==e.__e||I(e.__e),e.__=e.__e=e.__d=void 0}function q(e,t,n){return this.constructor(e,n)}function W(e,t,n){var i,r,o,s;h.__&&h.__(e,t),r=(i="function"==typeof n)?null:t.__k,o=[],s=[],D(t,e=(!i&&n||t).__k=k(x,null,[e]),r||y,y,void 0!==t.ownerSVGElement,!i&&n?[n]:r?null:t.firstChild?c.call(t.childNodes):null,o,!i&&n?n:r?r.__e:t.firstChild,i,s),$(o,e,s)}c=b.slice,h={__e:function(e,t,n,i){for(var r,o,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&null!=o.getDerivedStateFromError&&(r.setState(o.getDerivedStateFromError(e)),s=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),s=r.__d),s)return r.__E=r}catch(t){e=t}throw e}},p=0,T.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=C({},this.state),"function"==typeof e&&(e=e(C({},n),this.props)),e&&C(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),R(this))},T.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),R(this))},T.prototype.render=x,g=[],_="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,m=function(e,t){return e.__v.__b-t.__v.__b},A.__r=0,v=0;let V="seenSurvey_",Z=e=>`
          .survey-form, .thank-you-message {
              position: fixed;
              margin: 0px;
              bottom: 0px;
              color: black;
              font-weight: normal;
              font-family: -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Roboto", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
              text-align: left;
              max-width: ${parseInt((null==e?void 0:e.maxWidth)||"300")}px;
              width: 100%;
              z-index: ${parseInt((null==e?void 0:e.zIndex)||"99999")};
              border: 1.5px solid ${(null==e?void 0:e.borderColor)||"#c9c6c6"};
              border-bottom: 0px;
              ${({left:"left: 30px;",right:"right: 30px;",center:"\n            left: 50%;\n            transform: translateX(-50%);\n          "})[(null==e?void 0:e.position)||"right"]||"right: 30px;"}
              flex-direction: column;
              background: ${(null==e?void 0:e.backgroundColor)||"#eeeded"};
              border-top-left-radius: 10px;
              border-top-right-radius: 10px;
              box-shadow: -6px 0 16px -8px rgb(0 0 0 / 8%), -9px 0 28px 0 rgb(0 0 0 / 5%), -12px 0 48px 16px rgb(0 0 0 / 3%);
          }
          
          .survey-box, .thank-you-message-container {
              padding: 20px 25px 10px;
              display: flex;
              flex-direction: column;
              border-radius: 10px;
          }

          .thank-you-message {
              text-align: center;
          }

          .form-submit[disabled] {
              opacity: 0.6;
              filter: grayscale(50%);
              cursor: not-allowed;
          }
          .survey-form textarea {
              color: #2d2d2d;
              font-size: 14px;
              font-family: -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Roboto", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
              background: white;
              color: black;
              outline: none;
              padding-left: 10px;
              padding-right: 10px;
              padding-top: 10px;
              border-radius: 6px;
              border-color: ${(null==e?void 0:e.borderColor)||"#c9c6c6"};
              margin-top: 14px;
              width: 100%;
              box-sizing: border-box;
          }
          .survey-box:has(.survey-question:empty):not(:has(.survey-question-description)) textarea {
              margin-top: 0;
          }
          .form-submit {
              box-sizing: border-box;
              margin: 0;
              font-family: inherit;
              overflow: visible;
              text-transform: none;
              position: relative;
              display: inline-block;
              font-weight: 700;
              white-space: nowrap;
              text-align: center;
              border: 1.5px solid transparent;
              cursor: pointer;
              user-select: none;
              touch-action: manipulation;
              padding: 12px;
              font-size: 14px;
              border-radius: 6px;
              outline: 0;
              background: ${(null==e?void 0:e.submitButtonColor)||"black"} !important;
              text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);
              box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);
              width: 100%;
          }
          .form-cancel {
              display: flex;
              float: right;
              border: none;
              background: none;
              cursor: pointer;
          }
          .cancel-btn-wrapper {
              position: absolute;
              width: 35px;
              height: 35px;
              border-radius: 100%;
              top: 0;
              right: 0;
              transform: translate(50%, -50%);
              background: white;
              border: 1.5px solid ${(null==e?void 0:e.borderColor)||"#c9c6c6"};
              display: flex;
              justify-content: center;
              align-items: center;
          }
          .bolded { font-weight: 600; }
          .buttons {
              display: flex;
              justify-content: center;
          }
          .footer-branding {
              font-size: 11px;
              margin-top: 10px;
              text-align: center;
              display: flex;
              justify-content: center;
              gap: 4px;
              align-items: center;
              font-weight: 500;
              background: ${(null==e?void 0:e.backgroundColor)||"#eeeded"};
              text-decoration: none;
              backgroundColor: ${(null==e?void 0:e.backgroundColor)||"#eeeded"};
              color: ${G((null==e?void 0:e.backgroundColor)||"#eeeded")};
          }
          .survey-question {
              font-weight: 500;
              font-size: 14px;
              background: ${(null==e?void 0:e.backgroundColor)||"#eeeded"};
          }
          .question-textarea-wrapper {
              display: flex;
              flex-direction: column;
          }
          .survey-question-description {
              font-size: 13px;
              padding-top: 5px;
              background: ${(null==e?void 0:e.backgroundColor)||"#eeeded"};
          }
          .ratings-number {
              font-size: 16px;
              font-weight: 600;
              padding: 8px 0px;
              border: none;
          }
          .ratings-number:hover {
              cursor: pointer;
          }
          .rating-options {
              margin-top: 14px;
          }
          .rating-options-number {
              display: grid;
              border-radius: 6px;
              overflow: hidden;
              border: 1.5px solid ${(null==e?void 0:e.borderColor)||"#c9c6c6"};
          }
          .rating-options-number > .ratings-number {
              border-right: 1px solid ${(null==e?void 0:e.borderColor)||"#c9c6c6"};
          }
          .rating-options-number > .ratings-number:last-of-type {
              border-right: 0px;
          }
          .rating-options-number .rating-active {
              background: ${(null==e?void 0:e.ratingButtonActiveColor)||"black"};
          }
          .rating-options-emoji {
              display: flex;
              justify-content: space-between;
          }
          .ratings-emoji {
              font-size: 16px;
              background-color: transparent;
              border: none;
              padding: 0px;
          }
          .ratings-emoji:hover {
              cursor: pointer;
          }
          .ratings-emoji.rating-active svg {
              fill: ${(null==e?void 0:e.ratingButtonActiveColor)||"black"};
          }
          .emoji-svg {
              fill: '#939393';
          }
          .rating-text {
              display: flex;
              flex-direction: row;
              font-size: 11px;
              justify-content: space-between;
              margin-top: 6px;
              background: ${(null==e?void 0:e.backgroundColor)||"#eeeded"};
              opacity: .60;
          }
          .multiple-choice-options {
              margin-top: 13px;
              font-size: 14px;
          }
          .survey-box:has(.survey-question:empty):not(:has(.survey-question-description)) .multiple-choice-options {
              margin-top: 0;
          }
          .multiple-choice-options .choice-option {
              display: flex;
              align-items: center;
              gap: 4px;
              font-size: 13px;
              cursor: pointer;
              margin-bottom: 5px;
              position: relative;
          }
          .multiple-choice-options > .choice-option:last-of-type {
              margin-bottom: 0px;
          }
          .multiple-choice-options input {
              cursor: pointer;
              position: absolute;
              opacity: 0;
          }
          .choice-check {
              position: absolute;
              right: 10px;
              background: white;
          }
          .choice-check svg {
              display: none;
          }
          .multiple-choice-options .choice-option:hover .choice-check svg {
              display: inline-block;
              opacity: .25;
          }
          .multiple-choice-options input:checked + label + .choice-check svg {
              display: inline-block;
              opacity: 100% !important;
          }
          .multiple-choice-options input:checked + label {
              font-weight: bold;
              border: 1.5px solid rgba(0,0,0);
          }
          .multiple-choice-options input:checked + label input {
              font-weight: bold;
          }
          .multiple-choice-options label {
              width: 100%;
              cursor: pointer;
              padding: 10px;
              border: 1.5px solid rgba(0,0,0,.25);
              border-radius: 4px;
              background: white;
          }
          .multiple-choice-options .choice-option-open label {
              padding-right: 30px;
              display: flex;
              flex-wrap: wrap;
              gap: 8px;
              max-width: 100%;
          }
          .multiple-choice-options .choice-option-open label span {
              width: 100%;
          }
          .multiple-choice-options .choice-option-open input:disabled + label {
              opacity: 0.6;
          }
          .multiple-choice-options .choice-option-open label input {
              position: relative;
              opacity: 1;
              flex-grow: 1;
              border: 0;
              outline: 0;
          }
          .thank-you-message-body {
              margin-top: 6px;
              font-size: 14px;
              background: ${(null==e?void 0:e.backgroundColor)||"#eeeded"};
          }
          .thank-you-message-header {
              margin: 10px 0px 0px;
              background: ${(null==e?void 0:e.backgroundColor)||"#eeeded"};
          }
          .thank-you-message-container .form-submit {
              margin-top: 20px;
              margin-bottom: 10px;
          }
          .thank-you-message-countdown {
              margin-left: 6px;
          }
          .bottom-section {
              margin-top: 14px;
          }
          `;function U(e){if("#"===e[0]){let t=e.replace(/^#/,"");return"rgb("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+")"}return"rgb(255, 255, 255)"}function G(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;"#"===t[0]&&(e=U(t)),t.startsWith("rgb")&&(e=t);let n={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}[t.toLowerCase()];if(n&&(e=U(n)),!e)return"black";let i=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(i){let e=parseInt(i[1]),t=parseInt(i[2]),n=parseInt(i[3]);return Math.sqrt(e*e*.299+t*t*.587+n*n*.114)>127.5?"black":"white"}return"black"}let z={backgroundColor:"#eeeded",submitButtonColor:"black",submitButtonTextColor:"white",ratingButtonColor:"white",ratingButtonActiveColor:"black",borderColor:"#c9c6c6",placeholder:"Start typing...",whiteLabel:!1,displayThankYouMessage:!0,thankYouMessageHeader:"Thank you for your feedback!",position:"right"},Y="#eeeded",j=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;r&&(localStorage.setItem(et(n),"true"),r.capture("survey sent",{$survey_name:n.name,$survey_id:n.id,$survey_iteration:n.current_iteration,$survey_iteration_start_date:n.current_iteration_start_date,$survey_questions:n.questions.map(e=>e.question),sessionRecordingUrl:null===(e=r.get_session_replay_url)||void 0===e?void 0:e.call(r),...t,$set:{[en(n,"responded")]:!0}}),i.dispatchEvent(new Event("PHSurveySent")))},X=(e,t,n)=>{var r;!n&&t&&(t.capture("survey dismissed",{$survey_name:e.name,$survey_id:e.id,$survey_iteration:e.current_iteration,$survey_iteration_start_date:e.current_iteration_start_date,sessionRecordingUrl:null===(r=t.get_session_replay_url)||void 0===r?void 0:r.call(t),$set:{[en(e,"dismissed")]:!0}}),localStorage.setItem(et(e),"true"),i.dispatchEvent(new Event("PHSurveyClosed")))},J=e=>e.map(e=>({sort:Math.floor(10*Math.random()),value:e})).sort((e,t)=>e.sort-t.sort).map(e=>e.value),K=(e,t)=>e.length===t.length&&e.every((e,n)=>e===t[n])?t.reverse():t,Q=e=>(e.questions.forEach((e,t)=>{e.originalQuestionIndex=t}),e.appearance&&e.appearance.shuffleQuestions?K(e.questions,J(e.questions)):e.questions),ee=e=>{var t,n,i,r,o,s,a,l;return!(null===(t=e.conditions)||void 0===t||null===(n=t.events)||void 0===n||!n.repeatedActivation||!(null!=(null===(i=e.conditions)||void 0===i||null===(r=i.events)||void 0===r||null===(o=r.values)||void 0===o?void 0:o.length)&&(null===(s=e.conditions)||void 0===s||null===(a=s.events)||void 0===a||null===(l=a.values)||void 0===l?void 0:l.length)>0))},et=e=>{let t=`${V}${e.id}`;return e.current_iteration&&e.current_iteration>0&&(t=`${V}${e.id}_${e.current_iteration}`),t},en=(e,t)=>{let n=`$survey_${t}/${e.id}`;return e.current_iteration&&e.current_iteration>0&&(n=`$survey_${t}/${e.id}/${e.current_iteration}`),n},ei=(eo={isPreviewMode:!1,previewPageIndex:0,handleCloseSurveyPopup:()=>{},isPopup:!0},(ea={__c:es="__cC"+v++,__:eo,Consumer:function(e,t){return e.children(t)},Provider:function(e){var t,n;return this.getChildContext||(t=[],(n={})[es]=this,this.getChildContext=function(){return n},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&t.some(function(e){e.__e=!0,R(e)})},this.sub=function(e){t.push(e);var n=e.componentWillUnmount;e.componentWillUnmount=function(){t.splice(t.indexOf(e),1),n&&n.call(e)}}),e.children}}).Provider.__=ea.Consumer.contextType=ea),er=e=>{let{component:t,children:n,renderAsHtml:i,style:r}=e;return function(e,t,n){var i,r,o,s,a=C({},e.props);for(o in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)"key"==o?i=t[o]:"ref"==o?r=t[o]:a[o]=void 0===t[o]&&void 0!==s?s[o]:t[o];return arguments.length>2&&(a.children=arguments.length>3?c.call(arguments,2):n),E(e.type,a,i||e.key,r||e.ref,null)}(t,i?{dangerouslySetInnerHTML:{__html:n},style:r}:{children:n,style:r})};var eo,es,ea,el,eu,ed,ec,eh=0,ep=[],eg=[],ef=h.__b,e_=h.__r,em=h.diffed,ev=h.__c,ey=h.unmount;function eb(e,t){h.__h&&h.__h(eu,e,eh||t),eh=0;var n=eu.__H||(eu.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:eg}),n.__[e]}function ew(e){return eh=1,function(e,t,n){var i=eb(el++,2);if(i.t=e,!i.__c&&(i.__=[eA(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=eu,!eu.u)){var r=function(e,t,n){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter(function(e){return e.__c});if(r.every(function(e){return!e.__N}))return!o||o.call(this,e,t,n);var s=!1;return r.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}}),!(!s&&i.__c.props===e)&&(!o||o.call(this,e,t,n))};eu.u=!0;var o=eu.shouldComponentUpdate,s=eu.componentWillUpdate;eu.componentWillUpdate=function(e,t,n){if(this.__e){var i=o;o=void 0,r(e,t,n),o=i}s&&s.call(this,e,t,n)},eu.shouldComponentUpdate=r}return i.__N||i.__}(eA,e)}function eS(e,t){var n=eb(el++,3);!h.__s&&eR(n.__H,t)&&(n.__=e,n.i=t,eu.__H.__h.push(n))}function eC(e){return eh=5,eI(function(){return{current:e}},[])}function eI(e,t){var n=eb(el++,7);return eR(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function ek(e){var t=eu.context[e.__c],n=eb(el++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(eu)),t.props.value):e.__}function eE(){for(var e;e=ep.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(eT),e.__H.__h.forEach(eM),e.__H.__h=[]}catch(t){e.__H.__h=[],h.__e(t,e.__v)}}h.__b=function(e){eu=null,ef&&ef(e)},h.__r=function(e){e_&&e_(e),el=0;var t=(eu=e.__c).__H;t&&(ed===eu?(t.__h=[],eu.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=eg,e.__N=e.i=void 0})):(t.__h.forEach(eT),t.__h.forEach(eM),t.__h=[],el=0)),ed=eu},h.diffed=function(e){em&&em(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==ep.push(t)&&ec===h.requestAnimationFrame||((ec=h.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(i),ex&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);ex&&(t=requestAnimationFrame(n))})(eE)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==eg&&(e.__=e.__V),e.i=void 0,e.__V=eg})),ed=eu=null},h.__c=function(e,t){t.some(function(e){try{e.__h.forEach(eT),e.__h=e.__h.filter(function(e){return!e.__||eM(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],h.__e(n,e.__v)}}),ev&&ev(e,t)},h.unmount=function(e){ey&&ey(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{eT(e)}catch(e){t=e}}),n.__H=void 0,t&&h.__e(t,n.__v))};var ex="function"==typeof requestAnimationFrame;function eT(e){var t=eu,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),eu=t}function eM(e){var t=eu;e.__c=e.__(),eu=t}function eR(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function eA(e,t){return"function"==typeof t?t(e):t}let eN=Array.isArray,eF=Object.prototype.toString,eL=eN||function(e){return"[object Array]"===eF.call(e)},eP=function(e){return null===e};var eO=0;function eD(e,t,n,i,r,o){var s,a,l={};for(a in t)"ref"==a?s=t[a]:l[a]=t[a];var u={type:e,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--eO,__i:-1,__u:0,__source:r,__self:o};if("function"==typeof e&&(s=e.defaultProps))for(a in s)void 0===l[a]&&(l[a]=s[a]);return h.vnode&&h.vnode(u),u}let e$=eD("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:eD("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146 272q66 0 121.5-35.5T682-393h-52q-23 40-63 61.5T480.5-310q-46.5 0-87-21T331-393h-53q26 61 81 96.5T480-261Zm0 181q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),eB=eD("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:eD("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm20 194h253v-49H354v49ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),eH=eD("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:eD("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146.174 116Q413-417 358.5-379.5T278-280h53q22-42 62.173-65t87.5-23Q528-368 567.5-344.5T630-280h52q-25-63-79.826-100-54.826-37-122-37ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),eq=eD("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:eD("path",{d:"M480-417q-67 0-121.5 37.5T278-280h404q-25-63-80-100t-122-37Zm-183-72 50-45 45 45 31-36-45-45 45-45-31-36-45 45-50-45-31 36 45 45-45 45 31 36Zm272 0 44-45 51 45 31-36-45-45 45-45-31-36-51 45-44-45-31 36 44 45-44 45 31 36ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142 0 241-99t99-241q0-142-99-241t-241-99q-142 0-241 99t-99 241q0 142 99 241t241 99Z"})}),eW=eD("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:eD("path",{d:"M479.504-261Q537-261 585.5-287q48.5-26 78.5-72.4 6-11.6-.75-22.6-6.75-11-20.25-11H316.918Q303-393 296.5-382t-.5 22.6q30 46.4 78.5 72.4 48.5 26 105.004 26ZM347-578l27 27q7.636 8 17.818 8Q402-543 410-551q8-8 8-18t-8-18l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.636-8 17.818Q276-559 284-551q8 8 18 8t18-8l27-27Zm267 0 27 27q7.714 8 18 8t18-8q8-7.636 8-17.818Q685-579 677-587l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.714-8 18t8 18q7.636 8 17.818 8Q579-543 587-551l27-27ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),eV=eD("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:eD("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.164752 0.164752C0.384422 -0.0549175 0.740578 -0.0549175 0.960248 0.164752L6 5.20451L11.0398 0.164752C11.2594 -0.0549175 11.6156 -0.0549175 11.8352 0.164752C12.0549 0.384422 12.0549 0.740578 11.8352 0.960248L6.79549 6L11.8352 11.0398C12.0549 11.2594 12.0549 11.6156 11.8352 11.8352C11.6156 12.0549 11.2594 12.0549 11.0398 11.8352L6 6.79549L0.960248 11.8352C0.740578 12.0549 0.384422 12.0549 0.164752 11.8352C-0.0549175 11.6156 -0.0549175 11.2594 0.164752 11.0398L5.20451 6L0.164752 0.960248C-0.0549175 0.740578 -0.0549175 0.384422 0.164752 0.164752Z",fill:"black"})}),eZ=eD("svg",{width:"77",height:"14",viewBox:"0 0 77 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[eD("g",{"clip-path":"url(#clip0_2415_6911)",children:[eD("mask",{id:"mask0_2415_6911",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"77",height:"14",children:eD("path",{d:"M0.5 0H76.5V14H0.5V0Z",fill:"white"})}),eD("g",{mask:"url(#mask0_2415_6911)",children:[eD("path",{d:"M5.77226 8.02931C5.59388 8.37329 5.08474 8.37329 4.90634 8.02931L4.4797 7.20672C4.41155 7.07535 4.41155 6.9207 4.4797 6.78933L4.90634 5.96669C5.08474 5.62276 5.59388 5.62276 5.77226 5.96669L6.19893 6.78933C6.26709 6.9207 6.26709 7.07535 6.19893 7.20672L5.77226 8.02931ZM5.77226 12.6946C5.59388 13.0386 5.08474 13.0386 4.90634 12.6946L4.4797 11.872C4.41155 11.7406 4.41155 11.586 4.4797 11.4546L4.90634 10.632C5.08474 10.288 5.59388 10.288 5.77226 10.632L6.19893 11.4546C6.26709 11.586 6.26709 11.7406 6.19893 11.872L5.77226 12.6946Z",fill:"#1D4AFF"}),eD("path",{d:"M0.5 10.9238C0.5 10.508 1.02142 10.2998 1.32637 10.5938L3.54508 12.7327C3.85003 13.0267 3.63405 13.5294 3.20279 13.5294H0.984076C0.716728 13.5294 0.5 13.3205 0.5 13.0627V10.9238ZM0.5 8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.19753 13.3927C5.28831 13.4802 5.41144 13.5294 5.53982 13.5294H8.0421C8.47337 13.5294 8.68936 13.0267 8.3844 12.7327L1.32637 5.92856C1.02142 5.63456 0.5 5.84278 0.5 6.25854V8.67083ZM0.5 4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L10.0368 13.3927C10.1276 13.4802 10.2508 13.5294 10.3791 13.5294H12.8814C13.3127 13.5294 13.5287 13.0267 13.2237 12.7327L1.32637 1.26329C1.02142 0.969312 0.5 1.17752 0.5 1.59327V4.00556ZM5.33931 4.00556C5.33931 4.12932 5.39033 4.24802 5.4811 4.33554L14.1916 12.7327C14.4965 13.0267 15.0179 12.8185 15.0179 12.4028V9.99047C15.0179 9.86671 14.9669 9.74799 14.8762 9.66049L6.16568 1.26329C5.86071 0.969307 5.33931 1.17752 5.33931 1.59327V4.00556ZM11.005 1.26329C10.7 0.969307 10.1786 1.17752 10.1786 1.59327V4.00556C10.1786 4.12932 10.2296 4.24802 10.3204 4.33554L14.1916 8.06748C14.4965 8.36148 15.0179 8.15325 15.0179 7.7375V5.3252C15.0179 5.20144 14.9669 5.08272 14.8762 4.99522L11.005 1.26329Z",fill:"#F9BD2B"}),eD("path",{d:"M21.0852 10.981L16.5288 6.58843C16.2238 6.29443 15.7024 6.50266 15.7024 6.91841V13.0627C15.7024 13.3205 15.9191 13.5294 16.1865 13.5294H23.2446C23.5119 13.5294 23.7287 13.3205 23.7287 13.0627V12.5032C23.7287 12.2455 23.511 12.0396 23.2459 12.0063C22.4323 11.9042 21.6713 11.546 21.0852 10.981ZM18.0252 12.0365C17.5978 12.0365 17.251 11.7021 17.251 11.2901C17.251 10.878 17.5978 10.5436 18.0252 10.5436C18.4527 10.5436 18.7996 10.878 18.7996 11.2901C18.7996 11.7021 18.4527 12.0365 18.0252 12.0365Z",fill:"currentColor"}),eD("path",{d:"M0.5 13.0627C0.5 13.3205 0.716728 13.5294 0.984076 13.5294H3.20279C3.63405 13.5294 3.85003 13.0267 3.54508 12.7327L1.32637 10.5938C1.02142 10.2998 0.5 10.508 0.5 10.9238V13.0627ZM5.33931 5.13191L1.32637 1.26329C1.02142 0.969306 0.5 1.17752 0.5 1.59327V4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L5.33931 8.86412V5.13191ZM1.32637 5.92855C1.02142 5.63455 0.5 5.84278 0.5 6.25853V8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.33931 13.5294V9.79717L1.32637 5.92855Z",fill:"#1D4AFF"}),eD("path",{d:"M10.1787 5.3252C10.1787 5.20144 10.1277 5.08272 10.0369 4.99522L6.16572 1.26329C5.8608 0.969306 5.33936 1.17752 5.33936 1.59327V4.00556C5.33936 4.12932 5.39037 4.24802 5.48114 4.33554L10.1787 8.86412V5.3252ZM5.33936 13.5294H8.04214C8.47341 13.5294 8.6894 13.0267 8.38443 12.7327L5.33936 9.79717V13.5294ZM5.33936 5.13191V8.67083C5.33936 8.79459 5.39037 8.91331 5.48114 9.00081L10.1787 13.5294V9.99047C10.1787 9.86671 10.1277 9.74803 10.0369 9.66049L5.33936 5.13191Z",fill:"#F54E00"}),eD("path",{d:"M29.375 11.6667H31.3636V8.48772H33.0249C34.8499 8.48772 36.0204 7.4443 36.0204 5.83052C36.0204 4.21681 34.8499 3.17334 33.0249 3.17334H29.375V11.6667ZM31.3636 6.84972V4.81136H32.8236C33.5787 4.81136 34.0318 5.19958 34.0318 5.83052C34.0318 6.4615 33.5787 6.84972 32.8236 6.84972H31.3636ZM39.618 11.7637C41.5563 11.7637 42.9659 10.429 42.9659 8.60905C42.9659 6.78905 41.5563 5.45438 39.618 5.45438C37.6546 5.45438 36.2701 6.78905 36.2701 8.60905C36.2701 10.429 37.6546 11.7637 39.618 11.7637ZM38.1077 8.60905C38.1077 7.63838 38.7118 6.97105 39.618 6.97105C40.5116 6.97105 41.1157 7.63838 41.1157 8.60905C41.1157 9.57972 40.5116 10.2471 39.618 10.2471C38.7118 10.2471 38.1077 9.57972 38.1077 8.60905ZM46.1482 11.7637C47.6333 11.7637 48.6402 10.8658 48.6402 9.81025C48.6402 7.33505 45.2294 8.13585 45.2294 7.16518C45.2294 6.8983 45.5189 6.72843 45.9342 6.72843C46.3622 6.72843 46.8782 6.98318 47.0418 7.54132L48.527 6.94678C48.2375 6.06105 47.1677 5.45438 45.8713 5.45438C44.4743 5.45438 43.6058 6.25518 43.6058 7.21372C43.6058 9.53118 46.9663 8.88812 46.9663 9.84665C46.9663 10.1864 46.6391 10.417 46.1482 10.417C45.4434 10.417 44.9525 9.94376 44.8015 9.3735L43.3164 9.93158C43.6436 10.8537 44.6001 11.7637 46.1482 11.7637ZM53.4241 11.606L53.2982 10.0651C53.0843 10.1743 52.8074 10.2106 52.5808 10.2106C52.1278 10.2106 51.8257 9.89523 51.8257 9.34918V7.03172H53.3612V5.55145H51.8257V3.78001H49.9755V5.55145H48.9687V7.03172H49.9755V9.57972C49.9755 11.06 51.0202 11.7637 52.3921 11.7637C52.7696 11.7637 53.122 11.7031 53.4241 11.606ZM59.8749 3.17334V6.47358H56.376V3.17334H54.3874V11.6667H56.376V8.11158H59.8749V11.6667H61.8761V3.17334H59.8749ZM66.2899 11.7637C68.2281 11.7637 69.6378 10.429 69.6378 8.60905C69.6378 6.78905 68.2281 5.45438 66.2899 5.45438C64.3265 5.45438 62.942 6.78905 62.942 8.60905C62.942 10.429 64.3265 11.7637 66.2899 11.7637ZM64.7796 8.60905C64.7796 7.63838 65.3837 6.97105 66.2899 6.97105C67.1835 6.97105 67.7876 7.63838 67.7876 8.60905C67.7876 9.57972 67.1835 10.2471 66.2899 10.2471C65.3837 10.2471 64.7796 9.57972 64.7796 8.60905ZM73.2088 11.4725C73.901 11.4725 74.5177 11.242 74.845 10.8416V11.424C74.845 12.1034 74.2786 12.5767 73.4102 12.5767C72.7935 12.5767 72.2523 12.2854 72.1642 11.788L70.4776 12.0428C70.7042 13.1955 71.925 13.972 73.4102 13.972C75.361 13.972 76.6574 12.8679 76.6574 11.2298V5.55145H74.8324V6.07318C74.4926 5.69705 73.9136 5.45438 73.171 5.45438C71.409 5.45438 70.3014 6.61918 70.3014 8.46345C70.3014 10.3077 71.409 11.4725 73.2088 11.4725ZM72.1012 8.46345C72.1012 7.55345 72.655 6.97105 73.5109 6.97105C74.3793 6.97105 74.9331 7.55345 74.9331 8.46345C74.9331 9.37345 74.3793 9.95585 73.5109 9.95585C72.655 9.95585 72.1012 9.37345 72.1012 8.46345Z",fill:"currentColor"})]})]}),eD("defs",{children:eD("clipPath",{id:"clip0_2415_6911",children:eD("rect",{width:"76",height:"14",fill:"white",transform:"translate(0.5)"})})})]}),eU=eD("svg",{width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:eD("path",{d:"M5.30769 10.6923L4.77736 11.2226C4.91801 11.3633 5.10878 11.4423 5.30769 11.4423C5.5066 11.4423 5.69737 11.3633 5.83802 11.2226L5.30769 10.6923ZM15.5303 1.53033C15.8232 1.23744 15.8232 0.762563 15.5303 0.46967C15.2374 0.176777 14.7626 0.176777 14.4697 0.46967L15.5303 1.53033ZM1.53033 5.85429C1.23744 5.56139 0.762563 5.56139 0.46967 5.85429C0.176777 6.14718 0.176777 6.62205 0.46967 6.91495L1.53033 5.85429ZM5.83802 11.2226L15.5303 1.53033L14.4697 0.46967L4.77736 10.162L5.83802 11.2226ZM0.46967 6.91495L4.77736 11.2226L5.83802 10.162L1.53033 5.85429L0.46967 6.91495Z",fill:"currentColor"})});function eG(){return eD("a",{href:"https://posthog.com",target:"_blank",rel:"noopener",className:"footer-branding",children:["Survey by ",eZ]})}function ez(e){let{text:t,submitDisabled:n,appearance:r,onSubmit:o,link:s}=e,{isPreviewMode:a,isPopup:l}=ek(ei),u=r.submitButtonTextColor||G(r.submitButtonColor||z.submitButtonColor);return eD("div",{className:"bottom-section",children:[eD("div",{className:"buttons",children:eD("button",{className:"form-submit",disabled:n&&!a,type:"button",style:l?{color:u}:{},onClick:()=>{a||(s&&(null==i||i.open(s)),o())},children:t})}),!r.whiteLabel&&eD(eG,{})]})}function eY(e){let{question:t,description:n,descriptionContentType:i,backgroundColor:r,forceDisableHtml:o}=e,{isPopup:s}=ek(ei);return eD("div",{style:s?{backgroundColor:r||z.backgroundColor}:{},children:[eD("div",{className:"survey-question",children:t}),n&&er({component:k("div",{className:"survey-question-description"}),children:n,renderAsHtml:!o&&"text"!==i})]})}function ej(e){let{onClick:t}=e,{isPreviewMode:n}=ek(ei);return eD("div",{className:"cancel-btn-wrapper",onClick:t,disabled:n,children:eD("button",{className:"form-cancel",onClick:t,disabled:n,children:eV})})}function eX(e){let{header:t,description:n,contentType:i,forceDisableHtml:r,appearance:o,onClose:s,styleOverrides:a}=e,l=G(o.backgroundColor||z.backgroundColor),{isPopup:u}=ek(ei);return eD(x,{children:eD("div",{className:"thank-you-message",style:{...a},children:eD("div",{className:"thank-you-message-container",children:[u&&eD(ej,{onClick:()=>s()}),eD("h3",{className:"thank-you-message-header",style:{color:l},children:t}),n&&er({component:k("div",{className:"thank-you-message-body"}),children:n,renderAsHtml:!r&&"text"!==i,style:{color:l}}),u&&eD(ez,{text:o.thankYouMessageCloseButtonText||"Close",submitDisabled:!1,appearance:o,onSubmit:()=>s()})]})})})}function eJ(e){let{question:t,forceDisableHtml:n,appearance:i,onSubmit:r}=e,o=eC(null),[s,a]=ew("");return eD("div",{ref:o,children:[eD(eY,{question:t.question,description:t.description,descriptionContentType:t.descriptionContentType,backgroundColor:i.backgroundColor,forceDisableHtml:n}),eD("textarea",{rows:4,placeholder:null==i?void 0:i.placeholder,onInput:e=>a(e.currentTarget.value)}),eD(ez,{text:t.buttonText||"Submit",submitDisabled:!s&&!t.optional,appearance:i,onSubmit:()=>r(s)})]})}function eK(e){let{question:t,forceDisableHtml:n,appearance:i,onSubmit:r}=e;return eD(x,{children:[eD(eY,{question:t.question,description:t.description,descriptionContentType:t.descriptionContentType,forceDisableHtml:n}),eD(ez,{text:t.buttonText||"Submit",submitDisabled:!1,link:t.link,appearance:i,onSubmit:()=>r("link clicked")})]})}function eQ(e){let{question:t,forceDisableHtml:n,displayQuestionIndex:i,appearance:r,onSubmit:o}=e,s=t.scale,a=10===t.scale?0:1,[l,u]=ew(null);return eD(x,{children:[eD(eY,{question:t.question,description:t.description,descriptionContentType:t.descriptionContentType,forceDisableHtml:n,backgroundColor:r.backgroundColor}),eD("div",{className:"rating-section",children:[eD("div",{className:"rating-options",children:["emoji"===t.display&&eD("div",{className:"rating-options-emoji",children:(3===t.scale?e2:e5).map((e,t)=>{let n=t+1===l;return eD("button",{className:`ratings-emoji question-${i}-rating-${t} ${n?"rating-active":null}`,value:t+1,type:"button",onClick:()=>{u(t+1)},style:{fill:n?r.ratingButtonActiveColor:r.ratingButtonColor,borderColor:r.borderColor},children:e},t)})}),"number"===t.display&&eD("div",{className:"rating-options-number",style:{gridTemplateColumns:`repeat(${s-a+1}, minmax(0, 1fr))`},children:(function(e){switch(e){case 5:default:return e3;case 7:return e4;case 10:return e8}})(t.scale).map((e,t)=>eD(e0,{displayQuestionIndex:i,active:l===e,appearance:r,num:e,setActiveNumber:e=>{u(e)}},t))})]}),eD("div",{className:"rating-text",children:[eD("div",{children:t.lowerBoundLabel}),eD("div",{children:t.upperBoundLabel})]})]}),eD(ez,{text:t.buttonText||(null==r?void 0:r.submitButtonText)||"Submit",submitDisabled:eP(l)&&!t.optional,appearance:r,onSubmit:()=>o(l)})]})}function e0(e){let{num:t,active:n,displayQuestionIndex:r,appearance:o,setActiveNumber:s}=e,{textColor:a,ref:l}=function(e){var t;let n=eC(null),[r,o]=ew(null!==(t=e.defaultTextColor)&&void 0!==t?t:"black");return eS(()=>{n.current&&o(function(e){let t=i.getComputedStyle(e).backgroundColor;if("rgba(0, 0, 0, 0)"===t)return"black";let n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(!n)return"black";let r=parseInt(n[1]),o=parseInt(n[2]),s=parseInt(n[3]);return Math.sqrt(r*r*.299+o*o*.587+s*s*.114)>127.5?"black":"white"}(n.current))},[e.appearance,e.forceUpdate]),{ref:n,textColor:r}}({appearance:o,defaultTextColor:"black",forceUpdate:n});return eD("button",{ref:l,className:`ratings-number question-${r}-rating-${t} ${n?"rating-active":null}`,type:"button",onClick:()=>{s(t)},style:{color:a,backgroundColor:n?o.ratingButtonActiveColor:o.ratingButtonColor,borderColor:o.borderColor},children:t})}function e1(e){let{question:n,forceDisableHtml:i,displayQuestionIndex:r,appearance:o,onSubmit:s}=e,a=eC(null),l=eI(()=>(e=>{if(!e.shuffleOptions)return e.choices;let t=e.choices,n="";e.hasOpenChoice&&(n=t.pop());let i=K(t,J(t));return e.hasOpenChoice&&(e.choices.push(n),i.push(n)),i})(n),[n]),[u,d]=ew(n.type===t.MultipleChoice?[]:null),[c,h]=ew(!1),[p,g]=ew(""),f=n.type===t.SingleChoice?"radio":"checkbox";return eD("div",{ref:a,children:[eD(eY,{question:n.question,description:n.description,descriptionContentType:n.descriptionContentType,forceDisableHtml:i,backgroundColor:o.backgroundColor}),eD("div",{className:"multiple-choice-options",children:l.map((e,i)=>{let o="choice-option";return n.hasOpenChoice&&i===n.choices.length-1&&(o+=" choice-option-open"),eD("div",{className:o,children:[eD("input",{type:f,id:`surveyQuestion${r}Choice${i}`,name:`question${r}`,value:e,disabled:!e,onInput:()=>n.hasOpenChoice&&i===n.choices.length-1?h(!c):n.type===t.SingleChoice?d(e):n.type===t.MultipleChoice&&eL(u)?u.includes(e)?d(u.filter(t=>t!==e)):d([...u,e]):void 0}),eD("label",{htmlFor:`surveyQuestion${r}Choice${i}`,style:{color:"black"},children:n.hasOpenChoice&&i===n.choices.length-1?eD(x,{children:[eD("span",{children:[e,":"]}),eD("input",{type:"text",id:`surveyQuestion${r}Choice${i}Open`,name:`question${r}`,onInput:e=>{let i=e.currentTarget.value;return n.type===t.SingleChoice?d(i):n.type===t.MultipleChoice&&eL(u)?g(i):void 0}})]}):e}),eD("span",{className:"choice-check",style:{color:"black"},children:eU})]})})}),eD(ez,{text:n.buttonText||"Submit",submitDisabled:(eP(u)||eL(u)&&!c&&0===u.length||eL(u)&&c&&!p&&0===u.length&&!n.optional)&&!n.optional,appearance:o,onSubmit:()=>{c&&n.type===t.MultipleChoice?eL(u)&&s([...u,p]):s(u)}})]})}let e2=[eH,eB,e$],e5=[eq,eH,eB,e$,eW],e3=[1,2,3,4,5],e4=[1,2,3,4,5,6,7],e8=[0,1,2,3,4,5,6,7,8,9,10],e6="[PostHog.js]",e7={_log:function(e){if(i&&a.POSTHOG_DEBUG&&void 0!==i.console&&i.console){let o="__rrweb_original__"in i.console[e]?i.console[e].__rrweb_original__:i.console[e];for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o(e6,...n)}},info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];e7._log("log",...t)},warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];e7._log("warn",...t)},error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];e7._log("error",...t)},critical:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error(e6,...t)},uninitializedWarning:e=>{e7.error(`You must initialize PostHog before calling ${e}`)}};class e9{constructor(e){this.posthog=e,this.surveyInFocus=null}canShowNextEventBasedSurvey=()=>{var e;let t=s.querySelectorAll("div[class^=PostHogSurvey]");return!(t.length>0)||1===(null===(e=t[t.length-1].shadowRoot)||void 0===e?void 0:e.childElementCount)};handlePopoverSurvey=e=>{var t;let n=null===(t=e.conditions)||void 0===t?void 0:t.seenSurveyWaitPeriodInDays,i=localStorage.getItem("lastSeenSurveyDate");if(!(n&&i&&Math.ceil(Math.abs((new Date).getTime()-new Date(i).getTime())/864e5)<n)&&(!localStorage.getItem(et(e))||ee(e))){this.addSurveyToFocus(e.id);let t=((e,t,n)=>{let i=s.createElement("div");i.className=`PostHogSurvey${t}`;let r=i.attachShadow({mode:"open"});if(e){let t=Object.assign(s.createElement("style"),{innerText:e});r.appendChild(t)}return s.body.appendChild(i),r})(Z(null==e?void 0:e.appearance),e.id);W(eD(tt,{posthog:this.posthog,survey:e,removeSurveyFromFocus:this.removeSurveyFromFocus,isPopup:!0},"popover-survey"),t)}};handleWidget=e=>{let t=function(e){var t;let n=s.createElement("div");n.className=`PostHogWidget${e.id}`;let i=n.attachShadow({mode:"open"}),r=`
        .ph-survey-widget-tab {
            position: fixed;
            top: 50%;
            right: 0;
            background: ${(null===(t=e.appearance)||void 0===t?void 0:t.widgetColor)||"#e0a045"};
            color: white;
            transform: rotate(-90deg) translate(0, -100%);
            transform-origin: right top;
            min-width: 40px;
            padding: 8px 12px;
            font-weight: 500;
            border-radius: 3px 3px 0 0;
            text-align: center;
            cursor: pointer;
            z-index: 9999999;
        }
        .ph-survey-widget-tab:hover {
            padding-bottom: 13px;
        }
        .ph-survey-widget-button {
            position: fixed;
        }
    `;return i.append(Object.assign(s.createElement("style"),{innerText:r})),s.body.appendChild(n),i}(e),n=Z(e.appearance);t.appendChild(Object.assign(s.createElement("style"),{innerText:n})),W(eD(ti,{posthog:this.posthog,survey:e,removeSurveyFromFocus:this.removeSurveyFromFocus},"feedback-survey"),t)};handleWidgetSelector=e=>{var t,n,i;let r=(null===(t=e.appearance)||void 0===t?void 0:t.widgetSelector)&&s.querySelector(e.appearance.widgetSelector);if(r){if(0===s.querySelectorAll(`.PostHogWidget${e.id}`).length)this.handleWidget(e);else if(1===s.querySelectorAll(`.PostHogWidget${e.id}`).length&&!r.getAttribute("PHWidgetSurveyClickListener")){let t=null===(n=s.querySelector(`.PostHogWidget${e.id}`))||void 0===n||null===(i=n.shadowRoot)||void 0===i?void 0:i.querySelector(".survey-form");r.addEventListener("click",()=>{t&&(t.style.display="none"===t.style.display?"block":"none",t.addEventListener("PHSurveyClosed",()=>{this.removeSurveyFromFocus(e.id),t.style.display="none"}))}),r.setAttribute("PHWidgetSurveyClickListener","true")}}};sortSurveysByAppearanceDelay(e){return e.sort((e,t)=>{var n,i;return((null===(n=e.appearance)||void 0===n?void 0:n.surveyPopupDelaySeconds)||0)-((null===(i=t.appearance)||void 0===i?void 0:i.surveyPopupDelaySeconds)||0)})}canRenderSurvey=t=>{let n={visible:!1};return t.end_date?n.disabledReason=`survey was completed on ${t.end_date}`:t.type!=e.Popover?n.disabledReason="Only Popover survey types can be rendered":!t.linked_flag_key||this.posthog.featureFlags.isFeatureEnabled(t.linked_flag_key)?!t.targeting_flag_key||this.posthog.featureFlags.isFeatureEnabled(t.targeting_flag_key)?!t.internal_targeting_flag_key||this.posthog.featureFlags.isFeatureEnabled(t.internal_targeting_flag_key)?n.visible=!0:n.disabledReason=`internal targeting feature flag ${t.internal_targeting_flag_key} is false`:n.disabledReason=`targeting feature flag ${t.targeting_flag_key} is false`:n.disabledReason=`linked feature flag ${t.linked_flag_key} is false`,n};renderSurvey=(e,t)=>{W(eD(tt,{posthog:this.posthog,survey:e,removeSurveyFromFocus:this.removeSurveyFromFocus,isPopup:!1},"popover-survey"),t)};callSurveysAndEvaluateDisplayLogic=(()=>{var t=this;return function(){var n;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(n=t.posthog)||void 0===n||n.getActiveMatchingSurveys(n=>{let i=n.filter(e=>"api"!==e.type);t.sortSurveysByAppearanceDelay(i).forEach(n=>{if(eP(t.surveyInFocus)){var i,r,o;n.type===e.Widget&&("tab"===(null===(i=n.appearance)||void 0===i?void 0:i.widgetType)&&0===s.querySelectorAll(`.PostHogWidget${n.id}`).length&&t.handleWidget(n),"selector"===(null===(r=n.appearance)||void 0===r?void 0:r.widgetType)&&null!==(o=n.appearance)&&void 0!==o&&o.widgetSelector&&t.handleWidgetSelector(n)),n.type===e.Popover&&t.canShowNextEventBasedSurvey()&&t.handlePopoverSurvey(n)}})},i)}})();addSurveyToFocus=e=>{eP(this.surveyInFocus)||e7.error(`Survey ${[...this.surveyInFocus]} already in focus. Cannot add survey ${e}.`),this.surveyInFocus=e};removeSurveyFromFocus=e=>{this.surveyInFocus!==e&&e7.error(`Survey ${e} is not in focus. Cannot remove survey ${e}.`),this.surveyInFocus=null};getTestAPI(){return{addSurveyToFocus:this.addSurveyToFocus,removeSurveyFromFocus:this.removeSurveyFromFocus,surveyInFocus:this.surveyInFocus,canShowNextEventBasedSurvey:this.canShowNextEventBasedSurvey,handleWidget:this.handleWidget,handlePopoverSurvey:this.handlePopoverSurvey,handleWidgetSelector:this.handleWidgetSelector,sortSurveysByAppearanceDelay:this.sortSurveysByAppearanceDelay}}}function te(e){if(!s||!i)return;let t=new e9(e);return t.callSurveysAndEvaluateDisplayLogic(!0),setInterval(()=>{t.callSurveysAndEvaluateDisplayLogic(!1)},1e3),t}function tt(e){var t,n,r,o,s,a,l;let{survey:u,forceDisableHtml:d,posthog:c,style:h,previewPageIndex:p,removeSurveyFromFocus:g,isPopup:f}=e,_=Number.isInteger(p),m=null!==(t=u.appearance)&&void 0!==t&&t.surveyPopupDelaySeconds?1e3*u.appearance.surveyPopupDelaySeconds:0,{isPopupVisible:v,isSurveySent:y,setIsPopupVisible:b}=function(e,t,n,r,o){let[s,a]=ew(r||0===n),[l,u]=ew(!1);return eS(()=>{if(r||!t)return;let s=()=>{o(e.id),a(!1)},l=()=>{var t,n;null!==(t=e.appearance)&&void 0!==t&&t.displayThankYouMessage?(u(!0),o(e.id),null!==(n=e.appearance)&&void 0!==n&&n.autoDisappear&&setTimeout(()=>{a(!1)},5e3)):(o(e.id),a(!1))},d=()=>{var n;a(!0),i.dispatchEvent(new Event("PHSurveyShown")),t.capture("survey shown",{$survey_name:e.name,$survey_id:e.id,$survey_iteration:e.current_iteration,$survey_iteration_start_date:e.current_iteration_start_date,sessionRecordingUrl:null===(n=t.get_session_replay_url)||void 0===n?void 0:n.call(t)}),localStorage.setItem("lastSeenSurveyDate",(new Date).toISOString())};return i.addEventListener("PHSurveyClosed",s),i.addEventListener("PHSurveySent",l),n>0?(()=>{let e=setTimeout(()=>{d()},n);return()=>{clearTimeout(e),i.removeEventListener("PHSurveyClosed",s),i.removeEventListener("PHSurveySent",l)}})():(d(),()=>{i.removeEventListener("PHSurveyClosed",s),i.removeEventListener("PHSurveySent",l)})},[]),{isPopupVisible:s,isSurveySent:l,setIsPopupVisible:a}}(u,c,m,_,g),w=y||p===u.questions.length,S=null!==(n=h)&&void 0!==n&&n.left&&(l=null===(r=h)||void 0===r?void 0:r.left,"[object Number]"==eF.call(l))?{left:h.left-40}:{};return _&&((h=h||{}).left="unset",h.right="unset",h.transform="unset"),v?eD(ei.Provider,{value:{isPreviewMode:_,previewPageIndex:p,handleCloseSurveyPopup:()=>X(u,c,_),isPopup:f||!1},children:w?eD(eX,{header:(null===(o=u.appearance)||void 0===o?void 0:o.thankYouMessageHeader)||"Thank you!",description:(null===(s=u.appearance)||void 0===s?void 0:s.thankYouMessageDescription)||"",forceDisableHtml:!!d,contentType:null===(a=u.appearance)||void 0===a?void 0:a.thankYouMessageDescriptionContentType,appearance:u.appearance||z,styleOverrides:{...h,...S},onClose:()=>b(!1)}):eD(tn,{survey:u,forceDisableHtml:!!d,posthog:c,styleOverrides:h})}):eD(x,{})}function tn(e){var t,i;let{survey:r,forceDisableHtml:o,posthog:s,styleOverrides:a}=e,l=G((null===(t=r.appearance)||void 0===t?void 0:t.backgroundColor)||z.backgroundColor),[u,d]=ew({}),{isPreviewMode:c,previewPageIndex:h,handleCloseSurveyPopup:p,isPopup:g}=ek(ei),[f,_]=ew(h||0),m=eI(()=>Q(r),[r]);return eS(()=>{_(null!=h?h:0)},[h]),eD("form",{className:"survey-form",style:g?{color:l,borderColor:null===(i=r.appearance)||void 0===i?void 0:i.borderColor,...a}:{},children:m.map((e,t)=>{var i;let{originalQuestionIndex:a}=e;return(c?f===a:f===t)&&eD("div",{className:"survey-box",style:g?{backgroundColor:(null===(i=r.appearance)||void 0===i?void 0:i.backgroundColor)||z.backgroundColor}:{},children:[g&&eD(ej,{onClick:()=>p()}),tr({question:e,forceDisableHtml:o,displayQuestionIndex:t,appearance:r.appearance||z,onSubmit:e=>(e=>{let{res:t,originalQuestionIndex:i,displayQuestionIndex:o}=e;if(!s)return;let a=0===i?"$survey_response":`$survey_response_${i}`;if(d({...u,[a]:t}),!s.getNextSurveyStep)return void(o===r.questions.length-1?j({...u,[a]:t},r,s):_(o+1));let l=s.getNextSurveyStep(r,o,t);l===n.End?j({...u,[a]:t},r,s):_(l)})({res:e,originalQuestionIndex:a,displayQuestionIndex:t})})]})})})}function ti(e){var t,n;let{survey:i,forceDisableHtml:r,posthog:o,readOnly:a,removeSurveyFromFocus:l}=e,[u,d]=ew(!1),[c,h]=ew({}),p=eC(null);return eS(()=>{var e,t,n;if(!a&&o&&("tab"===(null===(e=i.appearance)||void 0===e?void 0:e.widgetType)&&p.current&&h({top:"50%",left:parseInt(""+(p.current.getBoundingClientRect().right-360)),bottom:"auto",borderRadius:10,borderBottom:`1.5px solid ${(null===(n=i.appearance)||void 0===n?void 0:n.borderColor)||"#c9c6c6"}`}),"selector"===(null===(t=i.appearance)||void 0===t?void 0:t.widgetType))){let e=s.querySelector(i.appearance.widgetSelector||"");null==e||e.addEventListener("click",()=>{d(!u)}),null==e||e.setAttribute("PHWidgetSurveyClickListener","true")}},[]),eD(x,{children:["tab"===(null===(t=i.appearance)||void 0===t?void 0:t.widgetType)&&eD("div",{className:"ph-survey-widget-tab",ref:p,onClick:()=>!a&&d(!u),style:{color:G(i.appearance.widgetColor)},children:[eD("div",{className:"ph-survey-widget-tab-icon"}),(null===(n=i.appearance)||void 0===n?void 0:n.widgetLabel)||""]}),u&&eD(tt,{posthog:o,survey:i,forceDisableHtml:r,style:c,removeSurveyFromFocus:l,isPopup:!0},"feedback-widget-survey")]})}let tr=e=>{let{question:n,forceDisableHtml:i,displayQuestionIndex:r,appearance:o,onSubmit:s}=e,a={[t.Open]:eJ,[t.Link]:eK,[t.Rating]:eQ,[t.SingleChoice]:e1,[t.MultipleChoice]:e1},l={[t.Open]:{},[t.Link]:{},[t.Rating]:{displayQuestionIndex:r},[t.SingleChoice]:{displayQuestionIndex:r},[t.MultipleChoice]:{displayQuestionIndex:r}};return eD(a[n.type],{...{question:n,forceDisableHtml:i,appearance:o,onSubmit:s,...l[n.type]}})};a.__PosthogExtensions__=a.__PosthogExtensions__||{},a.__PosthogExtensions__.canActivateRepeatedly=ee,a.__PosthogExtensions__.generateSurveys=te,a.extendPostHogWithSurveys=te}(),function(){var e,t,n,i=-1,r=function(e){addEventListener("pageshow",function(t){t.persisted&&(i=t.timeStamp,e(t))},!0)},o=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},s=function(){var e=o();return e&&e.activationStart||0},a=function(e,t){var n=o(),r="navigate";return i>=0?r="back-forward-cache":n&&(document.prerendering||s()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(0x82f79cd8fff*Math.random())+1e12),navigationType:r}},l=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(e){Promise.resolve().then(function(){t(e.getEntries())})});return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},u=function(e,t,n,i){var r,o;return function(s){var a;t.value>=0&&(s||i)&&((o=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=o,t.rating=(a=t.value)>n[1]?"poor":a>n[0]?"needs-improvement":"good",e(t))}},d=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},c=function(e){document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&e()})},h=function(e){var t=!1;return function(){t||(e(),t=!0)}},p=-1,g=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},f=function(e){"hidden"===document.visibilityState&&p>-1&&(p="visibilitychange"===e.type?e.timeStamp:0,m())},_=function(){addEventListener("visibilitychange",f,!0),addEventListener("prerenderingchange",f,!0)},m=function(){removeEventListener("visibilitychange",f,!0),removeEventListener("prerenderingchange",f,!0)},v=function(){return p<0&&(p=g(),_(),r(function(){setTimeout(function(){p=g(),_()},0)})),{get firstHiddenTime(){return p}}},y=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},b=[1800,3e3],w=function(e,t){t=t||{},y(function(){var n,i=v(),o=a("FCP"),c=l("paint",function(e){e.forEach(function(e){"first-contentful-paint"===e.name&&(c.disconnect(),e.startTime<i.firstHiddenTime&&(o.value=Math.max(e.startTime-s(),0),o.entries.push(e),n(!0)))})});c&&(n=u(e,o,b,t.reportAllChanges),r(function(i){n=u(e,o=a("FCP"),b,t.reportAllChanges),d(function(){o.value=performance.now()-i.timeStamp,n(!0)})}))})},S=[.1,.25],C=[2500,4e3],I={},k=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},E=function(e){if("loading"===document.readyState)return"loading";var t=k();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},x=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},T=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var i=e,r=i.id?"#"+i.id:x(i)+(i.classList&&i.classList.value&&i.classList.value.trim()&&i.classList.value.trim().length?"."+i.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+r.length>(t||100)-1)return n||r;if(n=n?r+">"+n:r,i.id)break;e=i.parentNode}}catch(e){}return n},M=-1,R=function(e,t){var n,i=k(),r="navigate";return M>=0?r="back-forward-cache":i&&(document.prerendering||((n=k())&&n.activationStart||0)>0?r="prerender":document.wasDiscarded?r="restore":i.type&&(r=i.type.replace(/_/g,"-"))),{name:e,value:-1,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(0x82f79cd8fff*Math.random())+1e12),navigationType:r}},A=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(e){Promise.resolve().then(function(){t(e.getEntries())})});return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},N=function(e,t,n,i){var r,o;return function(s){var a;t.value>=0&&(s||i)&&((o=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=o,t.rating=(a=t.value)>n[1]?"poor":a>n[0]?"needs-improvement":"good",e(t))}},F=function(e){document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&e()})},L=0,P=1/0,O=0,D=function(e){e.forEach(function(e){e.interactionId&&(P=Math.min(P,e.interactionId),L=(O=Math.max(O,e.interactionId))?(O-P)/7+1:0)})},$=function(){"interactionCount"in performance||e||(e=A("event",D,{type:"event",buffered:!0,durationThreshold:0}))},B=[],H=new Map,q=0,W=[],V=function(e){if(W.forEach(function(t){return t(e)}),e.interactionId||"first-input"===e.entryType){var t=B[B.length-1],n=H.get(e.interactionId);if(n||B.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};H.set(i.id,i),B.push(i)}B.sort(function(e,t){return t.latency-e.latency}),B.length>10&&B.splice(10).forEach(function(e){return H.delete(e.id)})}}},Z=function(e){var t,n,i=self.requestIdleCallback||self.setTimeout,r=-1;return t=e,n=!1,e=function(){n||(t(),n=!0)},"hidden"===document.visibilityState?e():(r=i(e),F(e)),r},U=[200,500],G=function(t,n){var i;"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(n=n||{},i=function(){$();var i,r,o,s=R("INP"),a=function(t){Z(function(){t.forEach(V);var n,i=(n=Math.min(B.length-1,Math.floor(((e?L:performance.interactionCount||0)-q)/50)),B[n]);i&&i.latency!==s.value&&(s.value=i.latency,s.entries=i.entries,o())})},l=A("event",a,{durationThreshold:null!==(r=n.durationThreshold)&&void 0!==r?r:40});o=N(t,s,U,n.reportAllChanges),l&&(l.observe({type:"first-input",buffered:!0}),F(function(){a(l.takeRecords()),o(!0)}),i=function(){q=0,B.length=0,H.clear(),o=N(t,s=R("INP"),U,n.reportAllChanges)},addEventListener("pageshow",function(e){e.persisted&&(M=e.timeStamp,i(e))},!0))},document.prerendering?addEventListener("prerenderingchange",function(){return i()},!0):i())},z=[],Y=[],j=new WeakMap,X=new Map,J=-1,K=function(e){z=z.concat(e),Q()},Q=function(){J<0&&(J=Z(ee))},ee=function(){X.size>10&&X.forEach(function(e,t){H.has(t)||X.delete(t)});var e=B.map(function(e){return j.get(e.entries[0])}),t=Y.length-50;Y=Y.filter(function(n,i){return i>=t||e.includes(n)});for(var i=new Set,r=0;r<Y.length;r++){var o=Y[r];et(o.startTime,o.processingEnd).forEach(function(e){i.add(e)})}for(var s=0;s<50;s++){var a=z[z.length-1-s];if(!a||a.startTime<n)break;i.add(a)}z=Array.from(i),J=-1};W.push(function(e){e.interactionId&&e.target&&!X.has(e.interactionId)&&X.set(e.interactionId,e.target)},function(e){var t,i=e.startTime+e.duration;n=Math.max(n,e.processingEnd);for(var r=Y.length-1;r>=0;r--){var o=Y[r];if(8>=Math.abs(i-o.renderTime)){(t=o).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:i,entries:[e]},Y.push(t)),(e.interactionId||"first-input"===e.entryType)&&j.set(e,t),Q()});var et=function(e,t){for(var n,i=[],r=0;n=z[r];r++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;i.push(n)}return i};let en="undefined"!=typeof window?window:void 0,ei="undefined"!=typeof globalThis?globalThis:en,er=null==ei?void 0:ei.navigator;null==ei||ei.document,null==ei||ei.location,null==ei||ei.fetch,null!=ei&&ei.XMLHttpRequest&&"withCredentials"in new ei.XMLHttpRequest&&ei.XMLHttpRequest,null==ei||ei.AbortController,null==er||er.userAgent;let eo=null!=en?en:{},es={onLCP:function(e,t){t=t||{},y(function(){var n,i=v(),o=a("LCP"),p=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach(function(e){e.startTime<i.firstHiddenTime&&(o.value=Math.max(e.startTime-s(),0),o.entries=[e],n())})},g=l("largest-contentful-paint",p);if(g){n=u(e,o,C,t.reportAllChanges);var f=h(function(){I[o.id]||(p(g.takeRecords()),g.disconnect(),I[o.id]=!0,n(!0))});["keydown","click"].forEach(function(e){addEventListener(e,function(){var e,t,n;return e=f,t=self.requestIdleCallback||self.setTimeout,n=-1,e=h(e),"hidden"===document.visibilityState?e():(n=t(e),c(e)),n},!0)}),c(f),r(function(i){n=u(e,o=a("LCP"),C,t.reportAllChanges),d(function(){o.value=performance.now()-i.timeStamp,I[o.id]=!0,n(!0)})})}})},onCLS:function(e,t){t=t||{},w(h(function(){var n,i=a("CLS",0),o=0,s=[],h=function(e){e.forEach(function(e){if(!e.hadRecentInput){var t=s[0],n=s[s.length-1];o&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,s.push(e)):(o=e.value,s=[e])}}),o>i.value&&(i.value=o,i.entries=s,n())},p=l("layout-shift",h);p&&(n=u(e,i,S,t.reportAllChanges),c(function(){h(p.takeRecords()),n(!0)}),r(function(){o=0,n=u(e,i=a("CLS",0),S,t.reportAllChanges),d(function(){return n()})}),setTimeout(n,0))}))},onFCP:w,onINP:function(e,n){t||(t=A("long-animation-frame",K)),G(function(t){var n,i,r,o,s,a,l,u,d,c;e((n=t.entries[0],i=j.get(n),r=n.processingStart,o=i.processingEnd,s=i.entries.sort(function(e,t){return e.processingStart-t.processingStart}),a=et(n.startTime,o),u=(l=t.entries.find(function(e){return e.target}))&&l.target||X.get(n.interactionId),d=[n.startTime+n.duration,o].concat(a.map(function(e){return e.startTime+e.duration})),c=Math.max.apply(Math,d),Object.assign(t,{attribution:{interactionTarget:T(u),interactionTargetElement:u,interactionType:n.name.startsWith("key")?"keyboard":"pointer",interactionTime:n.startTime,nextPaintTime:c,processedEventEntries:s,longAnimationFrameEntries:a,inputDelay:r-n.startTime,processingDuration:o-r,presentationDelay:Math.max(c-o,0),loadState:E(n.startTime)}})))},n)}};eo.__PosthogExtensions__=eo.__PosthogExtensions__||{},eo.__PosthogExtensions__.postHogWebVitalsCallbacks=es,eo.postHogWebVitalsCallbacks=es}();let l="undefined"!=typeof window?window:void 0,u="undefined"!=typeof globalThis?globalThis:l,d=Array.prototype,c=d.forEach,h=d.indexOf,p=null==u?void 0:u.navigator,g=null==u?void 0:u.document,f=null==u?void 0:u.location,_=null==u?void 0:u.fetch,m=null!=u&&u.XMLHttpRequest&&"withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:void 0,v=null==u?void 0:u.AbortController,y=null==p?void 0:p.userAgent,b=null!=l?l:{},w={DEBUG:!1,LIB_VERSION:"1.186.1"},S=Array.isArray,C=Object.prototype,I=C.hasOwnProperty,k=C.toString,E=S||function(e){return"[object Array]"===k.call(e)},x=function(e){return"function"==typeof e},T=function(e){return e===Object(e)&&!E(e)},M=function(e){if(T(e)){for(let t in e)if(I.call(e,t))return!1;return!0}return!1},R=function(e){return void 0===e},A=function(e){return"[object String]"==k.call(e)},N=function(e){return A(e)&&0===e.trim().length},F=function(e){return null===e},L=function(e){return R(e)||F(e)},P=function(e){return"[object Number]"==k.call(e)},O=function(e){return"[object Boolean]"===k.call(e)},D=e=>e instanceof FormData,$="[PostHog.js]",B={_log:function(e){if(l&&(w.DEBUG||b.POSTHOG_DEBUG)&&!R(l.console)&&l.console){let r="__rrweb_original__"in l.console[e]?l.console[e].__rrweb_original__:l.console[e];for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r($,...n)}},info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];B._log("log",...t)},warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];B._log("warn",...t)},error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];B._log("error",...t)},critical:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error($,...t)},uninitializedWarning:e=>{B.error(`You must initialize PostHog before calling ${e}`)}},H=(e,t,n)=>{if(e.config.disable_external_dependency_loading)return B.warn(`${t} was requested but loading of external scripts is disabled.`),n("Loading of external scripts is disabled");let i=()=>{var e;if(!g)return n("document not found");let i=g.createElement("script");i.type="text/javascript",i.crossOrigin="anonymous",i.src=t,i.onload=e=>n(void 0,e),i.onerror=e=>n(e);let r=g.querySelectorAll("body > script");r.length>0?null===(e=r[0].parentNode)||void 0===e||e.insertBefore(i,r[0]):g.body.appendChild(i)};null!=g&&g.body?i():null==g||g.addEventListener("DOMContentLoaded",i)};b.__PosthogExtensions__=b.__PosthogExtensions__||{},b.__PosthogExtensions__.loadExternalDependency=(e,t,n)=>{let i=`/static/${t}.js?v=${e.version}`;"toolbar"===t&&(i=`${i}&t=${3e5*Math.floor(Date.now()/3e5)}`);let r=e.requestRouter.endpointFor("assets",i);H(e,r,n)},b.__PosthogExtensions__.loadSiteApp=(e,t,n)=>{let i=e.requestRouter.endpointFor("api",t);H(e,i,n)};let q={},W=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function V(e,t,n){if(E(e)){if(c&&e.forEach===c)e.forEach(t,n);else if("length"in e&&e.length===+e.length){for(let i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i)===q)return}}}function Z(e,t,n){if(!L(e)){if(E(e))return V(e,t,n);if(D(e)){for(let i of e.entries())if(t.call(n,i[1],i[0])===q)return}else for(let i in e)if(I.call(e,i)&&t.call(n,e[i],i)===q)return}}let U=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return V(n,function(t){for(let n in t)void 0!==t[n]&&(e[n]=t[n])}),e};function G(e,t){return -1!==e.indexOf(t)}function z(e){let t=Object.keys(e),n=t.length,i=Array(n);for(;n--;)i[n]=[t[n],e[t[n]]];return i}let Y=function(e){try{return e()}catch{return}},j=function(e){return function(){try{for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(this,n)}catch(e){B.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),B.critical(e)}}},X=function(e){let t={};return Z(e,function(e,n){A(e)&&e.length>0&&(t[n]=e)}),t},J=function(e){return e.replace(/^\$/,"")},K=function(e){let t,n,i,r="",o=0;for(t=n=0,o=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<o;i++){let o=e.charCodeAt(i),s=null;o<128?n++:s=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),F(s)||(n>t&&(r+=e.substring(t,n)),r+=s,t=n=i+1)}return n>t&&(r+=e.substring(t,e.length)),r},Q=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,n,i,r,o){if(t){if(t.addEventListener&&!r)t.addEventListener(n,i,!!o);else{let r="on"+n,o=t[r];t[r]=function(n){if(!(n=n||e(null==l?void 0:l.event)))return;let r,s=!0;x(o)&&(r=o(n));let a=i.call(t,n);return!1!==r&&!1!==a||(s=!1),s}}}else B.error("No valid element provided to register_event")}}();function ee(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return e[n]}(iO=e||(e={})).GZipJS="gzip-js",iO.Base64="base64";let et="$people_distinct_id",en="__alias",ei="__timers",er="$autocapture_disabled_server_side",eo="$heatmaps_enabled_server_side",es="$exception_capture_enabled_server_side",ea="$exception_capture_endpoint_suffix",el="$web_vitals_enabled_server_side",eu="$dead_clicks_enabled_server_side",ed="$web_vitals_allowed_metrics",ec="$session_recording_enabled_server_side",eh="$console_log_recording_enabled_server_side",ep="$session_recording_network_payload_capture",eg="$session_recording_canvas_recording",ef="$replay_sample_rate",e_="$replay_minimum_duration",em="$sesid",ev="$session_is_sampled",ey="$session_recording_url_trigger_activated_session",eb="$session_recording_event_trigger_activated_session",ew="$enabled_feature_flags",eS="$early_access_features",eC="$stored_person_properties",eI="$stored_group_properties",ek="$surveys",eE="$surveys_activated",ex="$flag_call_reported",eT="$user_state",eM="$client_session_props",eR="$capture_rate_limit",eA="$initial_campaign_params",eN="$initial_referrer_info",eF="$initial_person_info",eL="$epp",eP="__POSTHOG_TOOLBAR__",eO=[et,en,"__cmpns",ei,ec,eo,em,ew,eT,eS,eI,eC,ek,ex,eM,eR,eA,eN,eL],eD="$active_feature_flags",e$="$override_feature_flags",eB="$feature_flag_payloads",eH=e=>{let t={};for(let[n,i]of z(e||{}))i&&(t[n]=i);return t};class eq{constructor(e){this.instance=e,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}getFlags(){return Object.keys(this.getFlagVariants())}getFlagVariants(){let e=this.instance.get_property(ew),t=this.instance.get_property(e$);if(!t)return e||{};let n=U({},e),i=Object.keys(t);for(let e=0;e<i.length;e++)n[i[e]]=t[i[e]];return this._override_warning||(B.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:n}),this._override_warning=!0),n}getFlagPayloads(){return this.instance.get_property(eB)||{}}reloadFeatureFlags(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.reloadFeatureFlagsInAction=e}resetRequestQueue(){this.reloadFeatureFlagsQueued=!1}_startReloadTimer(){this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(()=>{!this.reloadFeatureFlagsInAction&&this.reloadFeatureFlagsQueued&&(this.reloadFeatureFlagsQueued=!1,this._reloadFeatureFlagsRequest())},5)}_reloadFeatureFlagsRequest(){if(this.instance.config.advanced_disable_feature_flags)return;this.setReloadingPaused(!0);let t=this.instance.config.token,n=this.instance.get_property(eC),i=this.instance.get_property(eI),r={token:t,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:n,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:r,compression:this.instance.config.disable_compression?void 0:e.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:e=>{var t;this.setReloadingPaused(!1);let n=!0;200===e.statusCode&&(this.$anon_distinct_id=void 0,n=!1),this.receivedFeatureFlags(null!==(t=e.json)&&void 0!==t?t:{},n),this._startReloadTimer()}})}getFeatureFlag(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0))return void B.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.");let i=this.getFlagVariants()[e],r=`${i}`,o=this.instance.get_property(ex)||{};return!n.send_event&&"send_event"in n||e in o&&o[e].includes(r)||(E(o[e])?o[e].push(r):o[e]=[r],null===(t=this.instance.persistence)||void 0===t||t.register({[ex]:o}),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:i})),i}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}isFeatureEnabled(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,t);B.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(t=>t!==e)}receivedFeatureFlags(e,t){if(!this.instance.persistence)return;this.instance.decideEndpointWasHit=!0;let n=this.getFlagVariants(),i=this.getFlagPayloads();!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=e.featureFlags,o=e.featureFlagPayloads;if(!r)return;if(E(r)){let e={};if(r)for(let t=0;t<r.length;t++)e[r[t]]=!0;return void(t&&t.register({[eD]:r,[ew]:e}))}let s=r,a=o;e.errorsWhileComputingFlags&&(s={...n,...s},a={...i,...a}),t&&t.register({[eD]:Object.keys(eH(s)),[ew]:s||{},[eB]:a||{}})}(e,this.instance.persistence,n,i),this._fireFeatureFlagsCallbacks(t)}override(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return B.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=t,!1===e)this.instance.persistence.unregister(e$);else if(E(e)){let t={};for(let n=0;n<e.length;n++)t[e[n]]=!0;this.instance.persistence.register({[e$]:t})}else this.instance.persistence.register({[e$]:e})}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){let{flags:t,flagVariants:n}=this._prepareFeatureFlagsForCallbacks();e(t,n)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t){var n;let i={[`$feature_enrollment/${e}`]:t};this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:t,$set:i}),this.setPersonPropertiesForFlags(i,!1);let r={...this.getFlagVariants(),[e]:t};null===(n=this.instance.persistence)||void 0===n||n.register({[eD]:Object.keys(eH(r)),[ew]:r}),this._fireFeatureFlagsCallbacks()}getEarlyAccessFeatures(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.instance.get_property(eS);if(n&&!t)return e(n);this.instance._send_request({transport:"XHR",url:this.instance.requestRouter.endpointFor("api",`/api/early_access_features/?token=${this.instance.config.token}`),method:"GET",callback:t=>{var n;if(!t.json)return;let i=t.json.earlyAccessFeatures;return null===(n=this.instance.persistence)||void 0===n||n.register({[eS]:i}),e(i)}})}_prepareFeatureFlagsForCallbacks(){let e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter(e=>t[e]),flagVariants:Object.keys(t).filter(e=>t[e]).reduce((e,n)=>(e[n]=t[n],e),{})}}_fireFeatureFlagsCallbacks(e){let{flags:t,flagVariants:n}=this._prepareFeatureFlagsForCallbacks();this.featureFlagEventHandlers.forEach(i=>i(t,n,{errorsLoading:e}))}setPersonPropertiesForFlags(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(eC)||{};this.instance.register({[eC]:{...n,...e}}),t&&this.instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this.instance.unregister(eC)}setGroupPropertiesForFlags(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(eI)||{};0!==Object.keys(n).length&&Object.keys(n).forEach(t=>{n[t]={...n[t],...e[t]},delete e[t]}),this.instance.register({[eI]:{...n,...e}}),t&&this.instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){let t=this.instance.get_property(eI)||{};this.instance.register({[eI]:{...t,[e]:{}}})}else this.instance.unregister(eI)}}/**
 * uuidv7: An experimental implementation of the proposed UUID Version 7
 *
 * @license Apache-2.0
 * @copyright 2021-2023 LiosK
 * @packageDocumentation
 *
 * from https://github.com/LiosK/uuidv7/blob/e501462ea3d23241de13192ceae726956f9b3b7d/src/index.ts
 */Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return P(e)&&isFinite(e)&&Math.floor(e)===e});let eW="0123456789abcdef";class eV{constructor(e){if(this.bytes=e,16!==e.length)throw TypeError("not 128-bit length")}static fromFieldsV7(e,t,n,i){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(i)||e<0||t<0||n<0||i<0||e>0xffffffffffff||t>4095||n>0x3fffffff||i>0xffffffff)throw RangeError("invalid field value");let r=new Uint8Array(16);return r[0]=e/0x10000000000,r[1]=e/0x100000000,r[2]=e/0x1000000,r[3]=e/65536,r[4]=e/256,r[5]=e,r[6]=112|t>>>8,r[7]=t,r[8]=128|n>>>24,r[9]=n>>>16,r[10]=n>>>8,r[11]=n,r[12]=i>>>24,r[13]=i>>>16,r[14]=i>>>8,r[15]=i,new eV(r)}toString(){let e="";for(let t=0;t<this.bytes.length;t++)e=e+eW.charAt(this.bytes[t]>>>4)+eW.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw Error("Invalid UUIDv7 was generated");return e}clone(){return new eV(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(let t=0;t<16;t++){let n=this.bytes[t]-e.bytes[t];if(0!==n)return Math.sign(n)}return 0}}class eZ{timestamp=0;counter=0;random=new ez;generate(){let e=this.generateOrAbort();if(R(e)){this.timestamp=0;let e=this.generateOrAbort();if(R(e))throw Error("Could not generate UUID after timestamp reset");return e}return e}generateOrAbort(){let e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>0x3ffffffffff&&(this.timestamp++,this.resetCounter())}return eV.fromFieldsV7(this.timestamp,Math.trunc(this.counter/0x40000000),this.counter&0x40000000-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}let eU,eG=e=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw Error("no cryptographically strong RNG available");for(let t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};l&&!R(l.crypto)&&crypto.getRandomValues&&(eG=e=>crypto.getRandomValues(e));class ez{buffer=new Uint32Array(8);cursor=1/0;nextUint32(){return this.cursor>=this.buffer.length&&(eG(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}let eY=()=>ej().toString(),ej=()=>(eU||(eU=new eZ)).generate(),eX="",eJ=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,eK={is_supported:()=>!!g,error:function(e){B.error("cookieStore error: "+e)},get:function(e){if(g){try{let t=e+"=",n=g.cookie.split(";").filter(e=>e.length);for(let e=0;e<n.length;e++){let i=n[e];for(;" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}}catch{}return null}},parse:function(e){let t;try{t=JSON.parse(eK.get(e))||{}}catch{}return t},set:function(e,t,n,i,r){if(g)try{let o="",s="",a=function(e,t){if(t){let t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;if(eX)return eX;if(!t||["localhost","127.0.0.1"].includes(e))return"";let n=e.split("."),i=Math.min(n.length,8),r="dmn_chk_"+eY(),o=RegExp("(^|;)\\s*"+r+"=1");for(;!eX&&i--;){let e=n.slice(i).join("."),s=r+"=1;domain=."+e;t.cookie=s,o.test(t.cookie)&&(t.cookie=s+";expires=Thu, 01 Jan 1970 00:00:00 GMT",eX=e)}return eX}(e);if(!t){let n=(e=>{let t=e.match(eJ);return t?t[0]:""})(e);n!==t&&B.info("Warning: cookie subdomain discovery mismatch",n,t),t=n}return t?"; domain=."+t:""}return""}(g.location.hostname,i);if(n){let e=new Date;e.setTime(e.getTime()+24*n*36e5),o="; expires="+e.toUTCString()}r&&(s="; secure");let l=e+"="+encodeURIComponent(JSON.stringify(t))+o+"; SameSite=Lax; path=/"+a+s;return l.length>3686.4&&B.warn("cookieStore warning: large cookie, len="+l.length),g.cookie=l,l}catch{return}},remove:function(e,t){try{eK.set(e,"",-1,t)}catch{return}}},eQ=null,e0={is_supported:function(){if(!F(eQ))return eQ;let e=!0;if(R(l))e=!1;else try{let t="__mplssupport__";e0.set(t,"xyz"),'"xyz"'!==e0.get(t)&&(e=!1),e0.remove(t)}catch{e=!1}return e||B.error("localStorage unsupported; falling back to cookie store"),eQ=e,e},error:function(e){B.error("localStorage error: "+e)},get:function(e){try{return null==l?void 0:l.localStorage.getItem(e)}catch(e){e0.error(e)}return null},parse:function(e){try{return JSON.parse(e0.get(e))||{}}catch{}return null},set:function(e,t){try{null==l||l.localStorage.setItem(e,JSON.stringify(t))}catch(e){e0.error(e)}},remove:function(e){try{null==l||l.localStorage.removeItem(e)}catch(e){e0.error(e)}}},e1=["distinct_id",em,ev,eL],e2={...e0,parse:function(e){try{let t={};try{t=eK.parse(e)||{}}catch{}let n=U(t,JSON.parse(e0.get(e)||"{}"));return e0.set(e,n),n}catch{}return null},set:function(e,t,n,i,r,o){try{e0.set(e,t,void 0,void 0,o);let s={};e1.forEach(e=>{t[e]&&(s[e]=t[e])}),Object.keys(s).length&&eK.set(e,s,n,i,r,o)}catch(e){e0.error(e)}},remove:function(e,t){try{null==l||l.localStorage.removeItem(e),eK.remove(e,t)}catch(e){e0.error(e)}}},e5={},e3={is_supported:function(){return!0},error:function(e){B.error("memoryStorage error: "+e)},get:function(e){return e5[e]||null},parse:function(e){return e5[e]||null},set:function(e,t){e5[e]=t},remove:function(e){delete e5[e]}},e4=null,e8={is_supported:function(){if(!F(e4))return e4;if(e4=!0,R(l))e4=!1;else try{let e="__support__";e8.set(e,"xyz"),'"xyz"'!==e8.get(e)&&(e4=!1),e8.remove(e)}catch{e4=!1}return e4},error:function(e){B.error("sessionStorage error: ",e)},get:function(e){try{return null==l?void 0:l.sessionStorage.getItem(e)}catch(e){e8.error(e)}return null},parse:function(e){try{return JSON.parse(e8.get(e))||null}catch{}return null},set:function(e,t){try{null==l||l.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){e8.error(e)}},remove:function(e){try{null==l||l.sessionStorage.removeItem(e)}catch(e){e8.error(e)}}},e6=["localhost","127.0.0.1"],e7=e=>{let t=null==g?void 0:g.createElement("a");return R(t)?null:(t.href=e,t)},e9=function(e,t){return!!function(e){try{new RegExp(e)}catch{return!1}return!0}(t)&&new RegExp(t).test(e)},te=function(e){let t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",r=[];return Z(e,function(e,i){R(e)||R(i)||"undefined"===i||(t=encodeURIComponent(e instanceof File?e.name:e.toString()),n=encodeURIComponent(i),r[r.length]=n+"="+t)}),r.join(i)},tt=function(e,t){let n;let i=((e.split("#")[0]||"").split("?")[1]||"").split("&");for(let e=0;e<i.length;e++){let r=i[e].split("=");if(r[0]===t){n=r;break}}if(!E(n)||n.length<2)return"";{let e=n[1];try{e=decodeURIComponent(e)}catch{B.error("Skipping decoding for malformed query param: "+e)}return e.replace(/\+/g," ")}},tn=function(e,t){let n=e.match(RegExp(t+"=([^&]*)"));return n?n[1]:null},ti="Mobile",tr="Android",to="Tablet",ts=tr+" "+to,ta="iPad",tl="Apple",tu=tl+" Watch",td="Safari",tc="BlackBerry",th="Samsung",tp=th+"Browser",tg=th+" Internet",tf="Chrome",t_=tf+" OS",tm=tf+" iOS",tv="Internet Explorer",ty=tv+" "+ti,tb="Opera",tw=tb+" Mini",tS="Edge",tC="Microsoft "+tS,tI="Firefox",tk=tI+" iOS",tE="Nintendo",tx="PlayStation",tT="Xbox",tM=tr+" "+ti,tR=ti+" "+td,tA="Windows",tN=tA+" Phone",tF="Nokia",tL="Ouya",tP="Generic",tO=tP+" "+ti.toLowerCase(),tD=tP+" "+to.toLowerCase(),t$="Konqueror",tB="(\\d+(\\.\\d+)?)",tH=RegExp("Version/"+tB),tq=RegExp(tT,"i"),tW=RegExp(tx+" \\w+","i"),tV=RegExp(tE+" \\w+","i"),tZ=RegExp(tc+"|PlayBook|BB10","i"),tU={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},tG=(e,t)=>t&&G(t,tl)||G(e,td)&&!G(e,tf)&&!G(e,tr),tz=function(e,t){return t=t||"",G(e," OPR/")&&G(e,"Mini")?tw:G(e," OPR/")?tb:tZ.test(e)?tc:G(e,"IE"+ti)||G(e,"WPDesktop")?ty:G(e,tp)?tg:G(e,tS)||G(e,"Edg/")?tC:G(e,"FBIOS")?"Facebook "+ti:G(e,"UCWEB")||G(e,"UCBrowser")?"UC Browser":G(e,"CriOS")?tm:G(e,"CrMo")?tf:G(e,tr)&&G(e,td)?tM:G(e,tf)?tf:G(e,"FxiOS")?tk:G(e.toLowerCase(),t$.toLowerCase())?t$:tG(e,t)?G(e,ti)?tR:td:G(e,tI)?tI:G(e,"MSIE")||G(e,"Trident/")?tv:G(e,"Gecko")?tI:""},tY={[ty]:[RegExp("rv:"+tB)],[tC]:[RegExp(tS+"?\\/"+tB)],[tf]:[RegExp("("+tf+"|CrMo)\\/"+tB)],[tm]:[RegExp("CriOS\\/"+tB)],"UC Browser":[RegExp("(UCBrowser|UCWEB)\\/"+tB)],[td]:[tH],[tR]:[tH],[tb]:[RegExp("(Opera|OPR)\\/"+tB)],[tI]:[RegExp(tI+"\\/"+tB)],[tk]:[RegExp("FxiOS\\/"+tB)],[t$]:[RegExp("Konqueror[:/]?"+tB,"i")],[tc]:[RegExp(tc+" "+tB),tH],[tM]:[RegExp("android\\s"+tB,"i")],[tg]:[RegExp(tp+"\\/"+tB)],[tv]:[RegExp("(rv:|MSIE )"+tB)],Mozilla:[RegExp("rv:"+tB)]},tj=[[RegExp(tT+"; "+tT+" (.*?)[);]","i"),e=>[tT,e&&e[1]||""]],[RegExp(tE,"i"),[tE,""]],[RegExp(tx,"i"),[tx,""]],[tZ,[tc,""]],[RegExp(tA,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[tN,""];if(new RegExp(ti).test(t)&&!/IEMobile\b/.test(t))return[tA+" "+ti,""];let n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){let e=tU[n[1]]||"";return/arm/i.test(t)&&(e="RT"),[tA,e]}return[tA,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>e&&e[3]?["iOS",[e[3],e[4],e[5]||"0"].join(".")]:["iOS",""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{let t="";return e&&e.length>=3&&(t=R(e[2])?e[3]:e[2]),["watchOS",t]}],[RegExp("("+tr+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+tr+")","i"),e=>e&&e[2]?[tr,[e[2],e[3],e[4]||"0"].join(".")]:[tr,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{let t=["Mac OS X",""];if(e&&e[1]){let n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[t_,""]],[/Linux|debian/i,["Linux",""]]],tX=function(e){return tV.test(e)?tE:tW.test(e)?tx:tq.test(e)?tT:RegExp(tL,"i").test(e)?tL:RegExp("("+tN+"|WPDesktop)","i").test(e)?tN:/iPad/.test(e)?ta:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?tu:tZ.test(e)?tc:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":RegExp(tF,"i").test(e)?tF:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(ti).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?tr:ts:tr:RegExp("(pda|"+ti+")","i").test(e)?tO:RegExp(to,"i").test(e)&&!RegExp(to+" pc","i").test(e)?tD:""},tJ="https?://(.*)",tK=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"],tQ={campaignParams:function(e){return g?this._campaignParamsFromUrl(g.URL,e):{}},_campaignParamsFromUrl:function(e,t){let n=tK.concat(t||[]),i={};return Z(n,function(t){let n=tt(e,t);i[t]=n||null}),i},_searchEngine:function(e){return e?0===e.search(tJ+"google.([^/?]*)")?"google":0===e.search(tJ+"bing.com")?"bing":0===e.search(tJ+"yahoo.com")?"yahoo":0===e.search(tJ+"duckduckgo.com")?"duckduckgo":null:null},_searchInfoFromReferrer:function(e){let t=tQ._searchEngine(e),n={};if(!F(t)){n.$search_engine=t;let e=g?tt(g.referrer,"yahoo"!=t?"q":"p"):"";e.length&&(n.ph_keyword=e)}return n},searchInfo:function(){let e=null==g?void 0:g.referrer;return e?this._searchInfoFromReferrer(e):{}},browser:tz,browserVersion:function(e,t){let n=tY[tz(e,t)];if(R(n))return null;for(let t=0;t<n.length;t++){let i=n[t],r=e.match(i);if(r)return parseFloat(r[r.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(e){for(let t=0;t<tj.length;t++){let[n,i]=tj[t],r=n.exec(e),o=r&&(x(i)?i(r,e):i);if(o)return o}return["",""]},device:tX,deviceType:function(e){let t=tX(e);return t===ta||t===ts||"Kobo"===t||"Kindle Fire"===t||t===tD?to:t===tE||t===tT||t===tx||t===tL?"Console":t===tu?"Wearable":t?ti:"Desktop"},referrer:function(){return(null==g?void 0:g.referrer)||"$direct"},referringDomain:function(){var e;return null!=g&&g.referrer&&(null===(e=e7(g.referrer))||void 0===e?void 0:e.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer(),u:null==f?void 0:f.href}},initialPersonPropsFromInfo:function(e){var t;let{r:n,u:i}=e,r={$initial_referrer:n,$initial_referring_domain:null==n?void 0:"$direct"==n?"$direct":null===(t=e7(n))||void 0===t?void 0:t.host};if(i){r.$initial_current_url=i;let e=e7(i);r.$initial_host=null==e?void 0:e.host,r.$initial_pathname=null==e?void 0:e.pathname,Z(this._campaignParamsFromUrl(i),function(e,t){r["$initial_"+J(t)]=e})}return n&&Z(this._searchInfoFromReferrer(n),function(e,t){r["$initial_"+J(t)]=e}),r},timezone:function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}},properties:function(){if(!y)return{};let[e,t]=tQ.os(y);return U(X({$os:e,$os_version:t,$browser:tQ.browser(y,navigator.vendor),$device:tQ.device(y),$device_type:tQ.deviceType(y),$timezone:tQ.timezone()}),{$current_url:null==f?void 0:f.href,$host:null==f?void 0:f.host,$pathname:null==f?void 0:f.pathname,$raw_user_agent:y.length>1e3?y.substring(0,997)+"...":y,$browser_version:tQ.browserVersion(y,navigator.vendor),$browser_language:tQ.browserLanguage(),$screen_height:null==l?void 0:l.screen.height,$screen_width:null==l?void 0:l.screen.width,$viewport_height:null==l?void 0:l.innerHeight,$viewport_width:null==l?void 0:l.innerWidth,$lib:"web",$lib_version:w.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})},people_properties:function(){if(!y)return{};let[e,t]=tQ.os(y);return U(X({$os:e,$os_version:t,$browser:tQ.browser(y,navigator.vendor)}),{$browser_version:tQ.browserVersion(y,navigator.vendor)})}},t0=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class t1{constructor(e){let t;this.config=e,this.props={},this.campaign_params_saved=!1,this.name=(t="",e.token&&(t=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),e.persistence_name?"ph_"+e.persistence_name:"ph_"+t+"_posthog"),this.storage=this.buildStorage(e),this.load(),e.debug&&B.info("Persistence loaded",e.persistence,{...this.props}),this.update_config(e,e),this.save()}buildStorage(e){-1===t0.indexOf(e.persistence.toLowerCase())&&(B.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");let t=e.persistence.toLowerCase();return"localstorage"===t&&e0.is_supported()?e0:"localstorage+cookie"===t&&e2.is_supported()?e2:"sessionstorage"===t&&e8.is_supported()?e8:"memory"===t?e3:"cookie"===t?eK:e2.is_supported()?e2:eK}properties(){let e={};return Z(this.props,function(t,n){if(n===ew&&T(t)){let n=Object.keys(t);for(let i=0;i<n.length;i++)e[`$feature/${n[i]}`]=t[n[i]]}else{let i;i=!1,(F(eO)?i:h&&eO.indexOf===h?-1!=eO.indexOf(n):(Z(eO,function(e){if(i||(i=e===n))return q}),i))||(e[n]=t)}}),e}load(){if(this.disabled)return;let e=this.storage.parse(this.name);e&&(this.props=U({},e))}save(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}remove(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}clear(){this.remove(),this.props={}}register_once(e,t,n){if(T(e)){R(t)&&(t="None"),this.expire_days=R(n)?this.default_expiry:n;let i=!1;if(Z(e,(e,n)=>{this.props.hasOwnProperty(n)&&this.props[n]!==t||(this.props[n]=e,i=!0)}),i)return this.save(),!0}return!1}register(e,t){if(T(e)){this.expire_days=R(t)?this.default_expiry:t;let n=!1;if(Z(e,(t,i)=>{e.hasOwnProperty(i)&&this.props[i]!==t&&(this.props[i]=t,n=!0)}),n)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){this.campaign_params_saved||(M(X(tQ.campaignParams(this.config.custom_campaign_params)))||this.register(tQ.campaignParams(this.config.custom_campaign_params)),this.campaign_params_saved=!0)}update_search_keyword(){this.register(tQ.searchInfo())}update_referrer_info(){this.register_once(tQ.referrerInfo(),void 0)}set_initial_person_info(){this.props[eA]||this.props[eN]||this.register_once({[eF]:tQ.initialPersonInfo()},void 0)}get_referrer_info(){return X({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}get_initial_props(){let e={};Z([eN,eA],t=>{let n=this.props[t];n&&Z(n,function(t,n){e["$initial_"+J(n)]=t})});let t=this.props[eF];return t&&U(e,tQ.initialPersonPropsFromInfo(t)),e}safe_merge(e){return Z(this.props,function(t,n){n in e||(e[n]=t)}),e}update_config(e,t){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){let t=this.buildStorage(e),n=this.props;this.clear(),this.storage=t,this.props=n,this.save()}}set_disabled(e){this.disabled=e,this.disabled?this.remove():this.save()}set_cross_subdomain(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}get_cross_subdomain(){return!!this.cross_subdomain}set_secure(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}set_event_timer(e,t){let n=this.props[ei]||{};n[e]=t,this.props[ei]=n,this.save()}remove_event_timer(e){let t=(this.props[ei]||{})[e];return R(t)||(delete this.props[ei][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}function t2(e){var t;return(null===(t=JSON.stringify(e,function(){let e=[];return function(t,n){if(T(n)){for(;e.length>0&&e.at(-1)!==this;)e.pop();return e.includes(n)?"[Circular]":(e.push(n),n)}return n}}()))||void 0===t?void 0:t.length)||0}var t5,t3,t4,t8,t6=((s=t6||{})[s.DomContentLoaded=0]="DomContentLoaded",s[s.Load=1]="Load",s[s.FullSnapshot=2]="FullSnapshot",s[s.IncrementalSnapshot=3]="IncrementalSnapshot",s[s.Meta=4]="Meta",s[s.Custom=5]="Custom",s[s.Plugin=6]="Plugin",s),t7=((a=t7||{})[a.Mutation=0]="Mutation",a[a.MouseMove=1]="MouseMove",a[a.MouseInteraction=2]="MouseInteraction",a[a.Scroll=3]="Scroll",a[a.ViewportResize=4]="ViewportResize",a[a.Input=5]="Input",a[a.TouchMove=6]="TouchMove",a[a.MediaInteraction=7]="MediaInteraction",a[a.StyleSheetRule=8]="StyleSheetRule",a[a.CanvasMutation=9]="CanvasMutation",a[a.Font=10]="Font",a[a.Log=11]="Log",a[a.Drag=12]="Drag",a[a.StyleDeclaration=13]="StyleDeclaration",a[a.Selection=14]="Selection",a[a.AdoptedStyleSheet=15]="AdoptedStyleSheet",a[a.CustomElement=16]="CustomElement",a);function t9(e){var t;return e.id===eP||!(null===(t=e.closest)||void 0===t||!t.call(e,".toolbar-global-fade-container"))}function ne(e){return!!e&&1===e.nodeType}function nt(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function nn(e){return!!e&&3===e.nodeType}function ni(e){return!!e&&11===e.nodeType}function nr(e){return e?W(e).split(/\s+/):[]}function no(e){let t=null==l?void 0:l.location.href;return!!(t&&e&&e.some(e=>t.match(e)))}function ns(e){let t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return nr(t)}function na(e){return L(e)?null:W(e).split(/(\s+)/).filter(e=>nb(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function nl(e){let t="";return nh(e)&&!np(e)&&e.childNodes&&e.childNodes.length&&Z(e.childNodes,function(e){var n;nn(e)&&e.textContent&&(t+=null!==(n=na(e.textContent))&&void 0!==n?n:"")}),W(t)}function nu(e){var t;return R(e.target)?e.srcElement||null:null!==(t=e.target)&&void 0!==t&&t.shadowRoot?e.composedPath()[0]||null:e.target||null}let nd=["a","button","form","input","select","textarea","label"];function nc(e){let t=e.parentNode;return!(!t||!ne(t))&&t}function nh(e){for(let t=e;t.parentNode&&!nt(t,"body");t=t.parentNode){let e=ns(t);if(G(e,"ph-sensitive")||G(e,"ph-no-capture"))return!1}if(G(ns(e),"ph-include"))return!0;let t=e.type||"";if(A(t))switch(t.toLowerCase()){case"hidden":case"password":return!1}let n=e.name||e.id||"";return!(A(n)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(n.replace(/[^a-zA-Z0-9]/g,"")))}function np(e){return!!(nt(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||nt(e,"select")||nt(e,"textarea")||"true"===e.getAttribute("contenteditable"))}let ng="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",nf=RegExp(`^(?:${ng})$`),n_=new RegExp(ng),nm="\\d{3}-?\\d{2}-?\\d{4}",nv=RegExp(`^(${nm})$`),ny=RegExp(`(${nm})`);function nb(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!(L(e)||A(e)&&(e=W(e),(t?nf:n_).test((e||"").replace(/[- ]/g,""))||(t?nv:ny).test(e)))}function nw(e){let t=nl(e);return nb(t=`${t} ${(function e(t){let n="";return t&&t.childNodes&&t.childNodes.length&&Z(t.childNodes,function(t){var i;if(t&&"span"===(null===(i=t.tagName)||void 0===i?void 0:i.toLowerCase()))try{let i=nl(t);n=`${n} ${i}`.trim(),t.childNodes&&t.childNodes.length&&(n=`${n} ${e(t)}`.trim())}catch(e){B.error(e)}}),n})(e)}`.trim())?t:""}function nS(e){return e.replace(/"|\\"/g,'\\"')}let nC="[SessionRecording]",nI="redacted",nk={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io"]},nE=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],nx=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],nT=["/s/","/e/","/i/"];function nM(e,t,n,i){if(L(e))return e;let r=(null==t?void 0:t["content-length"])||new Blob([e]).size;return A(r)&&(r=parseInt(r)),r>n?nC+` ${i} body too large to record (${r} bytes)`:e}function nR(e,t){if(L(e))return e;let n=e;return nb(n,!1)||(n=nC+" "+t+" body "+nI),Z(nx,e=>{var i,r;null!==(i=n)&&void 0!==i&&i.length&&-1!==(null===(r=n)||void 0===r?void 0:r.indexOf(e))&&(n=nC+" "+t+" body "+nI+" as might contain: "+e)}),n}let nA=(e,t)=>{let n={payloadSizeLimitBytes:nk.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...nk.performanceEntryTypeToObserve],payloadHostDenyList:[...t.payloadHostDenyList||[],...nk.payloadHostDenyList]},i=!1!==e.session_recording.recordHeaders&&t.recordHeaders,r=!1!==e.session_recording.recordBody&&t.recordBody,o=!1!==e.capture_performance&&t.recordPerformance,s=(e=>{var t;let n=Math.min(1e6,null!==(t=e.payloadSizeLimitBytes)&&void 0!==t?t:1e6);return e=>(null!=e&&e.requestBody&&(e.requestBody=nM(e.requestBody,e.requestHeaders,n,"Request")),null!=e&&e.responseBody&&(e.responseBody=nM(e.responseBody,e.responseHeaders,n,"Response")),e)})(n),a=e=>s((e=>{let t=e7(e.name);if(!(t&&t.pathname&&nT.some(e=>0===t.pathname.indexOf(e))))return e})((e=>{let t=e.requestHeaders;return L(t)||Z(Object.keys(null!=t?t:{}),e=>{nE.includes(e.toLowerCase())&&(t[e]=nI)}),e})(e))),l=x(e.session_recording.maskNetworkRequestFn);return l&&x(e.session_recording.maskCapturedNetworkRequestFn)&&B.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),l&&(e.session_recording.maskCapturedNetworkRequestFn=t=>{let n=e.session_recording.maskNetworkRequestFn({url:t.name});return{...t,name:null==n?void 0:n.url}}),n.maskRequestFn=x(e.session_recording.maskCapturedNetworkRequestFn)?t=>{var n,i,r;let o=a(t);return o&&null!==(n=null===(i=(r=e.session_recording).maskCapturedNetworkRequestFn)||void 0===i?void 0:i.call(r,o))&&void 0!==n?n:void 0}:e=>(function(e){if(!R(e))return e.requestBody=nR(e.requestBody,"Request"),e.responseBody=nR(e.responseBody,"Response"),e})(a(e)),{...nk,...n,recordHeaders:i,recordBody:r,recordPerformance:o,recordInitialRequests:o}};function nN(e,t,n,i){return t>n&&(B.warn("min cannot be greater than max."),t=n),P(e)?e>n?(i&&B.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):e<t?(i&&B.warn(i+" cannot be less than min: "+t+". Using min value instead."),t):e:(i&&B.warn(i+" must be a number. Defaulting to max value:"+n),n)}class nF{bucketSize=100;refillRate=10;mutationBuckets={};loggedTracker={};constructor(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.rrweb=e,this.options=i,this.refillRate=nN(null!==(t=this.options.refillRate)&&void 0!==t?t:this.refillRate,0,100,"mutation throttling refill rate"),this.bucketSize=nN(null!==(n=this.options.bucketSize)&&void 0!==n?n:this.bucketSize,0,100,"mutation throttling bucket size"),setInterval(()=>{this.refillBuckets()},1e3)}refillBuckets=()=>{Object.keys(this.mutationBuckets).forEach(e=>{this.mutationBuckets[e]=this.mutationBuckets[e]+this.refillRate,this.mutationBuckets[e]>=this.bucketSize&&delete this.mutationBuckets[e]})};getNodeOrRelevantParent=e=>{let t=this.rrweb.mirror.getNode(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){let e=t.closest("svg");if(e)return[this.rrweb.mirror.getId(e),e]}return[e,t]};numberOfChanges=e=>{var t,n,i,r,o,s,a,l;return(null!==(t=null===(n=e.removes)||void 0===n?void 0:n.length)&&void 0!==t?t:0)+(null!==(i=null===(r=e.attributes)||void 0===r?void 0:r.length)&&void 0!==i?i:0)+(null!==(o=null===(s=e.texts)||void 0===s?void 0:s.length)&&void 0!==o?o:0)+(null!==(a=null===(l=e.adds)||void 0===l?void 0:l.length)&&void 0!==a?a:0)};throttleMutations=e=>{if(3!==e.type||0!==e.data.source)return e;let t=e.data,n=this.numberOfChanges(t);t.attributes&&(t.attributes=t.attributes.filter(e=>{var t,n,i;let[r,o]=this.getNodeOrRelevantParent(e.id);return 0!==this.mutationBuckets[r]&&(this.mutationBuckets[r]=null!==(t=this.mutationBuckets[r])&&void 0!==t?t:this.bucketSize,this.mutationBuckets[r]=Math.max(this.mutationBuckets[r]-1,0),0===this.mutationBuckets[r]&&(this.loggedTracker[r]||(this.loggedTracker[r]=!0,null===(n=(i=this.options).onBlockedNode)||void 0===n||n.call(i,r,o))),e)}));let i=this.numberOfChanges(t);return 0!==i||n===i?e:void 0}}var nL=Uint8Array,nP=Uint16Array,nO=Uint32Array,nD=new nL([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),n$=new nL([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nB=new nL([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nH=function(e,t){for(var n=new nP(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new nO(n[30]);for(i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)r[o]=o-n[i]<<5|i;return[n,r]},nq=nH(nD,2),nW=nq[0],nV=nq[1];nW[28]=258,nV[258]=28;for(var nZ=nH(n$,0)[1],nU=new nP(32768),nG=0;nG<32768;++nG){var nz=(43690&nG)>>>1|(21845&nG)<<1;nz=(61680&(nz=(52428&nz)>>>2|(13107&nz)<<2))>>>4|(3855&nz)<<4,nU[nG]=((65280&nz)>>>8|(255&nz)<<8)>>>1}var nY=function(e,t,n){for(var i=e.length,r=0,o=new nP(t);r<i;++r)++o[e[r]-1];var s,a=new nP(t);for(r=0;r<t;++r)a[r]=a[r-1]+o[r-1]<<1;if(n){s=new nP(1<<t);var l=15-t;for(r=0;r<i;++r)if(e[r])for(var u=r<<4|e[r],d=t-e[r],c=a[e[r]-1]++<<d,h=c|(1<<d)-1;c<=h;++c)s[nU[c]>>>l]=u}else for(s=new nP(i),r=0;r<i;++r)s[r]=nU[a[e[r]-1]++]>>>15-e[r];return s},nj=new nL(288);for(nG=0;nG<144;++nG)nj[nG]=8;for(nG=144;nG<256;++nG)nj[nG]=9;for(nG=256;nG<280;++nG)nj[nG]=7;for(nG=280;nG<288;++nG)nj[nG]=8;var nX=new nL(32);for(nG=0;nG<32;++nG)nX[nG]=5;var nJ=nY(nj,9,0),nK=nY(nX,5,0),nQ=function(e){return(e/8>>0)+(7&e&&1)},n0=function(e,t,n){(null==n||n>e.length)&&(n=e.length);var i=new(e instanceof nP?nP:e instanceof nO?nO:nL)(n-t);return i.set(e.subarray(t,n)),i},n1=function(e,t,n){n<<=7&t;var i=t/8>>0;e[i]|=n,e[i+1]|=n>>>8},n2=function(e,t,n){n<<=7&t;var i=t/8>>0;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},n5=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var r=n.length,o=n.slice();if(!r)return[new nL(0),0];if(1==r){var s=new nL(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,d=1,c=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=r-1;)a=n[n[u].f<n[c].f?u++:c++],l=n[u!=d&&n[u].f<n[c].f?u++:c++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};var h=o[0].s;for(i=1;i<r;++i)o[i].s>h&&(h=o[i].s);var p=new nP(h+1),g=n3(n[d-1],p,0);if(g>t){i=0;var f=0,_=g-t,m=1<<_;for(o.sort(function(e,t){return p[t.s]-p[e.s]||e.f-t.f});i<r;++i){var v=o[i].s;if(!(p[v]>t))break;f+=m-(1<<g-p[v]),p[v]=t}for(f>>>=_;f>0;){var y=o[i].s;p[y]<t?f-=1<<t-p[y]++-1:++i}for(;i>=0&&f;--i){var b=o[i].s;p[b]==t&&(--p[b],++f)}g=t}return[new nL(p),g]},n3=function(e,t,n){return -1==e.s?Math.max(n3(e.l,t,n+1),n3(e.r,t,n+1)):t[e.s]=n},n4=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new nP(++t),i=0,r=e[0],o=1,s=function(e){n[i++]=e},a=1;a<=t;++a)if(e[a]==r&&a!=t)++o;else{if(!r&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(r),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(r);o=1,r=e[a]}return[n.subarray(0,i),t]},n8=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},n6=function(e,t,n){var i=n.length,r=nQ(t+2);e[r]=255&i,e[r+1]=i>>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var o=0;o<i;++o)e[r+o+4]=n[o];return 8*(r+4+i)},n7=function(e,t,n,i,r,o,s,a,l,u,d){n1(t,d++,n),++r[256];for(var c=n5(r,15),h=c[0],p=c[1],g=n5(o,15),f=g[0],_=g[1],m=n4(h),v=m[0],y=m[1],b=n4(f),w=b[0],S=b[1],C=new nP(19),I=0;I<v.length;++I)C[31&v[I]]++;for(I=0;I<w.length;++I)C[31&w[I]]++;for(var k=n5(C,7),E=k[0],x=k[1],T=19;T>4&&!E[nB[T-1]];--T);var M,R,A,N,F=u+5<<3,L=n8(r,nj)+n8(o,nX)+s,P=n8(r,h)+n8(o,f)+s+14+3*T+n8(C,E)+(2*C[16]+3*C[17]+7*C[18]);if(F<=L&&F<=P)return n6(t,d,e.subarray(l,l+u));if(n1(t,d,1+(P<L)),d+=2,P<L){M=nY(h,p,0),R=h,A=nY(f,_,0),N=f;var O=nY(E,x,0);for(n1(t,d,y-257),n1(t,d+5,S-1),n1(t,d+10,T-4),d+=14,I=0;I<T;++I)n1(t,d+3*I,E[nB[I]]);d+=3*T;for(var D=[v,w],$=0;$<2;++$){var B=D[$];for(I=0;I<B.length;++I){var H=31&B[I];n1(t,d,O[H]),d+=E[H],H>15&&(n1(t,d,B[I]>>>5&127),d+=B[I]>>>12)}}}else M=nJ,R=nj,A=nK,N=nX;for(I=0;I<a;++I)if(i[I]>255){n2(t,d,M[(H=i[I]>>>18&31)+257]),d+=R[H+257],H>7&&(n1(t,d,i[I]>>>23&31),d+=nD[H]);var q=31&i[I];n2(t,d,A[q]),d+=N[q],q>3&&(n2(t,d,i[I]>>>5&8191),d+=n$[q])}else n2(t,d,M[i[I]]),d+=R[i[I]];return n2(t,d,M[256]),d+R[256]},n9=new nO([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ie=function(){for(var e=new nO(256),t=0;t<256;++t){for(var n=t,i=9;--i;)n=(1&n&&0xedb88320)^n>>>1;e[t]=n}return e}(),it=function(){var e=0xffffffff;return{p:function(t){for(var n=e,i=0;i<t.length;++i)n=ie[255&n^t[i]]^n>>>8;e=n},d:function(){return 0xffffffff^e}}},ii=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},ir=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&ii(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var i=0;i<=n.length;++i)e[i+10]=n.charCodeAt(i)}};function io(e,t){void 0===t&&(t={});var n,i,r,o=it(),s=e.length;o.p(e);var a=(i=t,r=10+((n=t).filename&&n.filename.length+1||0),function(e,t,n,i,r,o){var s=e.length,a=new nL(i+s+5*(1+Math.floor(s/7e3))+8),l=a.subarray(i,a.length-8),u=0;if(!t||s<8)for(var d=0;d<=s;d+=65535){var c=d+65535;c<s?u=n6(l,u,e.subarray(d,c)):(l[d]=o,u=n6(l,u,e.subarray(d,s)))}else{for(var h=n9[t-1],p=h>>>13,g=8191&h,f=(1<<n)-1,_=new nP(32768),m=new nP(f+1),v=Math.ceil(n/3),y=2*v,b=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<y)&f},w=new nO(25e3),S=new nP(288),C=new nP(32),I=0,k=0,E=(d=0,0),x=0,T=0;d<s;++d){var M=b(d),R=32767&d,A=m[M];if(_[R]=A,m[M]=R,x<=d){var N=s-d;if((I>7e3||E>24576)&&N>423){u=n7(e,l,0,w,S,C,k,E,T,d-T,u),E=I=k=0,T=d;for(var F=0;F<286;++F)S[F]=0;for(F=0;F<30;++F)C[F]=0}var L=2,P=0,O=g,D=R-A&32767;if(N>2&&M==b(d-D))for(var $=Math.min(p,N)-1,B=Math.min(32767,d),H=Math.min(258,N);D<=B&&--O&&R!=A;){if(e[d+L]==e[d+L-D]){for(var q=0;q<H&&e[d+q]==e[d+q-D];++q);if(q>L){if(L=q,P=D,q>$)break;var W=Math.min(D,q-2),V=0;for(F=0;F<W;++F){var Z=d-D+F+32768&32767,U=Z-_[Z]+32768&32767;U>V&&(V=U,A=Z)}}}D+=(R=A)-(A=_[R])+32768&32767}if(P){w[E++]=0x10000000|nV[L]<<18|nZ[P];var G=31&nV[L],z=31&nZ[P];k+=nD[G]+n$[z],++S[257+G],++C[z],x=d+L,++I}else w[E++]=e[d],++S[e[d]]}}u=n7(e,l,o,w,S,C,k,E,T,d-T,u)}return n0(a,0,i+nQ(u)+r)}(e,null==i.level?6:i.level,null==i.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+i.mem,r,8,!0)),l=a.length;return ir(a,t),ii(a,l-8,o.d()),ii(a,l-4,s),a}function is(e,t){var n=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var i=new nL(e.length+(e.length>>>1)),r=0,o=function(e){i[r++]=e},s=0;s<n;++s){if(r+5>i.length){var a=new nL(r+8+(n-s<<1));a.set(i),i=a}var l=e.charCodeAt(s);l<128||t?o(l):(l<2048?o(192|l>>>6):(l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++s))>>>18),o(128|l>>>12&63)):o(224|l>>>12),o(128|l>>>6&63)),o(128|63&l))}return n0(i,0,r)}let ia=[t7.MouseMove,t7.MouseInteraction,t7.Scroll,t7.ViewportResize,t7.Input,t7.TouchMove,t7.MediaInteraction,t7.Drag],il=e=>({rrwebMethod:e,enqueuedAt:Date.now(),attempt:1}),iu="[SessionRecording]";function id(e){return function(e,t){for(var n="",i=0;i<e.length;){var r=e[i++];r<128||t?n+=String.fromCharCode(r):r<224?n+=String.fromCharCode((31&r)<<6|63&e[i++]):r<240?n+=String.fromCharCode((15&r)<<12|(63&e[i++])<<6|63&e[i++]):n+=String.fromCharCode(55296|(r=((15&r)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536)>>10,56320|1023&r)}return n}(io(is(JSON.stringify(e))),!0)}function ic(e){return e.type===t6.Custom&&"sessionIdle"===e.data.tag}function ih(e,t){return t.some(t=>"regex"===t.matching&&new RegExp(t.url).test(e))}class ip{queuedRRWebEvents=[];isIdle=!1;_linkedFlagSeen=!1;_lastActivityTimestamp=Date.now();_linkedFlag=null;_removePageViewCaptureHook=void 0;_onSessionIdListener=void 0;_persistDecideOnSessionListener=void 0;_samplingSessionListener=void 0;_urlTriggers=[];_urlBlocklist=[];_urlBlocked=!1;_eventTriggers=[];_removeEventTriggerCaptureHook=void 0;_forceAllowLocalhostNetworkCapture=!1;get sessionIdleThresholdMilliseconds(){return this.instance.config.session_recording.session_idle_threshold_ms||3e5}get rrwebRecord(){var e,t;return null==b||null===(e=b.__PosthogExtensions__)||void 0===e||null===(t=e.rrweb)||void 0===t?void 0:t.record}get started(){return this._captureStarted}get sessionManager(){if(!this.instance.sessionManager)throw Error(iu+" must be started with a valid sessionManager.");return this.instance.sessionManager}get fullSnapshotIntervalMillis(){var e,t;return"trigger_pending"===this.triggerStatus?6e4:null!==(e=null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.full_snapshot_interval_millis)&&void 0!==e?e:3e5}get isSampled(){let e=this.instance.get_property(ev);return O(e)?e:null}get sessionDuration(){var e,t;let n=null===(e=this.buffer)||void 0===e?void 0:e.data[(null===(t=this.buffer)||void 0===t?void 0:t.data.length)-1],{sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0);return n?n.timestamp-i:null}get isRecordingEnabled(){let e=!!this.instance.get_property(ec),t=!this.instance.config.disable_session_recording;return l&&e&&t}get isConsoleLogCaptureEnabled(){let e=!!this.instance.get_property(eh),t=this.instance.config.enable_recording_console_log;return null!=t?t:e}get canvasRecording(){var e,t,n,i,r,o;let s=this.instance.config.session_recording.captureCanvas,a=this.instance.get_property(eg),l=null!==(e=null!==(t=null==s?void 0:s.recordCanvas)&&void 0!==t?t:null==a?void 0:a.enabled)&&void 0!==e&&e,u=null!==(n=null!==(i=null==s?void 0:s.canvasFps)&&void 0!==i?i:null==a?void 0:a.fps)&&void 0!==n?n:0,d=null!==(r=null!==(o=null==s?void 0:s.canvasQuality)&&void 0!==o?o:null==a?void 0:a.quality)&&void 0!==r?r:0;return{enabled:l,fps:nN(u,0,12,"canvas recording fps"),quality:nN(d,0,1,"canvas recording quality")}}get networkPayloadCapture(){var e,t;let n=this.instance.get_property(ep),i={recordHeaders:null===(e=this.instance.config.session_recording)||void 0===e?void 0:e.recordHeaders,recordBody:null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.recordBody},r=(null==i?void 0:i.recordHeaders)||(null==n?void 0:n.recordHeaders),o=(null==i?void 0:i.recordBody)||(null==n?void 0:n.recordBody),s=T(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,a=!!(O(s)?s:null==n?void 0:n.capturePerformance);return r||o||a?{recordHeaders:r,recordBody:o,recordPerformance:a}:void 0}get sampleRate(){let e=this.instance.get_property(ef);return P(e)?e:null}get minimumDuration(){let e=this.instance.get_property(e_);return P(e)?e:null}get status(){return this.receivedDecide?this.isRecordingEnabled?L(this._linkedFlag)||this._linkedFlagSeen?"trigger_pending"===this.triggerStatus?"buffering":this._urlBlocked?"paused":O(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}get urlTriggerStatus(){var e;return 0===this._urlTriggers.length?"trigger_disabled":(null===(e=this.instance)||void 0===e?void 0:e.get_property(ey))===this.sessionId?"trigger_activated":"trigger_pending"}get eventTriggerStatus(){var e;return 0===this._eventTriggers.length?"trigger_disabled":(null===(e=this.instance)||void 0===e?void 0:e.get_property(eb))===this.sessionId?"trigger_activated":"trigger_pending"}get triggerStatus(){let e="trigger_activated"===this.eventTriggerStatus||"trigger_activated"===this.urlTriggerStatus,t="trigger_pending"===this.eventTriggerStatus||"trigger_pending"===this.urlTriggerStatus;return e?"trigger_activated":t?"trigger_pending":"trigger_disabled"}constructor(e){if(this.instance=e,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw B.error(iu+" started without valid sessionManager"),Error(iu+" started without valid sessionManager. This is a bug.");let{sessionId:t,windowId:n}=this.sessionManager.checkAndGetSessionAndWindowId();this.sessionId=t,this.windowId=n,this.buffer=this.clearBuffer(),this.sessionIdleThresholdMilliseconds>=this.sessionManager.sessionTimeoutMs&&B.warn(iu+` session_idle_threshold_ms (${this.sessionIdleThresholdMilliseconds}) is greater than the session timeout (${this.sessionManager.sessionTimeoutMs}). Session will never be detected as idle`)}_onBeforeUnload=()=>{this._flushBuffer()};_onOffline=()=>{this._tryAddCustomEvent("browser offline",{})};_onOnline=()=>{this._tryAddCustomEvent("browser online",{})};_onVisibilityChange=()=>{if(null!=g&&g.visibilityState){let e="window "+g.visibilityState;this._tryAddCustomEvent(e,{})}};startIfEnabledOrStop(e){this.isRecordingEnabled?(this._startCapture(e),null==l||l.addEventListener("beforeunload",this._onBeforeUnload),null==l||l.addEventListener("offline",this._onOffline),null==l||l.addEventListener("online",this._onOnline),null==l||l.addEventListener("visibilitychange",this._onVisibilityChange),this._setupSampling(),this._addEventTriggerListener(),L(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this.instance._addCaptureHook(e=>{try{if("$pageview"===e){let e=l?this._maskUrl(l.location.href):"";if(!e)return;this._tryAddCustomEvent("$pageview",{href:e})}}catch(e){B.error("Could not add $pageview to rrweb session",e)}})),this._onSessionIdListener||(this._onSessionIdListener=this.sessionManager.onSessionId((e,t,n)=>{var i,r,o,s;n&&(this._tryAddCustomEvent("$session_id_change",{sessionId:e,windowId:t,changeReason:n}),null===(i=this.instance)||void 0===i||null===(r=i.persistence)||void 0===r||r.unregister(eb),null===(o=this.instance)||void 0===o||null===(s=o.persistence)||void 0===s||s.unregister(ey))}))):this.stopRecording()}stopRecording(){var e,t,n,i;this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,null==l||l.removeEventListener("beforeunload",this._onBeforeUnload),null==l||l.removeEventListener("offline",this._onOffline),null==l||l.removeEventListener("online",this._onOnline),null==l||l.removeEventListener("visibilitychange",this._onVisibilityChange),this.clearBuffer(),clearInterval(this._fullSnapshotTimer),null===(e=this._removePageViewCaptureHook)||void 0===e||e.call(this),this._removePageViewCaptureHook=void 0,null===(t=this._removeEventTriggerCaptureHook)||void 0===t||t.call(this),this._removeEventTriggerCaptureHook=void 0,null===(n=this._onSessionIdListener)||void 0===n||n.call(this),this._onSessionIdListener=void 0,null===(i=this._samplingSessionListener)||void 0===i||i.call(this),this._samplingSessionListener=void 0,B.info(iu+" stopped"))}makeSamplingDecision(e){var t,n;let i;let r=this.sessionId!==e,o=this.sampleRate;if(!P(o))return void(null===(n=this.instance.persistence)||void 0===n||n.register({[ev]:null}));let s=this.isSampled,a=r||!O(s);i=a?Math.random()<o:s,a&&(i?this._reportStarted("sampled"):B.warn(iu+` Sample rate (${o}) has determined that this sessionId (${e}) will not be sent to the server.`),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:o,isSampled:i})),null===(t=this.instance.persistence)||void 0===t||t.register({[ev]:i})}afterDecideResponse(e){var t,n,i,r,o,s;if(this._persistDecideResponse(e),this._linkedFlag=(null===(t=e.sessionRecording)||void 0===t?void 0:t.linkedFlag)||null,null!==(n=e.sessionRecording)&&void 0!==n&&n.endpoint&&(this._endpoint=null===(s=e.sessionRecording)||void 0===s?void 0:s.endpoint),this._setupSampling(),!L(this._linkedFlag)&&!this._linkedFlagSeen){let e=A(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,t=A(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((n,i)=>{let r=T(i)&&e in i,o=t?i[e]===t:r;o&&this._reportStarted("linked_flag_matched",{linkedFlag:e,linkedVariant:t}),this._linkedFlagSeen=o})}null!==(i=e.sessionRecording)&&void 0!==i&&i.urlTriggers&&(this._urlTriggers=e.sessionRecording.urlTriggers),null!==(r=e.sessionRecording)&&void 0!==r&&r.urlBlocklist&&(this._urlBlocklist=e.sessionRecording.urlBlocklist),null!==(o=e.sessionRecording)&&void 0!==o&&o.eventTriggers&&(this._eventTriggers=e.sessionRecording.eventTriggers),this.receivedDecide=!0,this.startIfEnabledOrStop()}_setupSampling(){P(this.sampleRate)&&L(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId(e=>{this.makeSamplingDecision(e)}))}_persistDecideResponse(e){if(this.instance.persistence){var t;let n=this.instance.persistence,i=()=>{var t,i,r,o,s,a,l;let u=null===(t=e.sessionRecording)||void 0===t?void 0:t.sampleRate,d=L(u)?null:parseFloat(u),c=null===(i=e.sessionRecording)||void 0===i?void 0:i.minimumDurationMilliseconds;n.register({[ec]:!!e.sessionRecording,[eh]:null===(r=e.sessionRecording)||void 0===r?void 0:r.consoleLogRecordingEnabled,[ep]:{capturePerformance:e.capturePerformance,...null===(o=e.sessionRecording)||void 0===o?void 0:o.networkPayloadCapture},[eg]:{enabled:null===(s=e.sessionRecording)||void 0===s?void 0:s.recordCanvas,fps:null===(a=e.sessionRecording)||void 0===a?void 0:a.canvasFps,quality:null===(l=e.sessionRecording)||void 0===l?void 0:l.canvasQuality},[ef]:d,[e_]:R(c)?null:c})};i(),null===(t=this._persistDecideOnSessionListener)||void 0===t||t.call(this),this._persistDecideOnSessionListener=this.sessionManager.onSessionId(i)}}log(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";null===(t=this.instance.sessionRecording)||void 0===t||t.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}_startCapture(e){if(!R(Object.assign)&&!R(Array.from)&&!(this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut())){var t,n;(this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord)?this._onScriptLoaded():null===(t=b.__PosthogExtensions__)||void 0===t||null===(n=t.loadExternalDependency)||void 0===n||n.call(t,this.instance,"recorder",e=>{if(e)return B.error(iu+" could not load recorder",e);this._onScriptLoaded()}),B.info(iu+" starting"),"active"===this.status&&this._reportStarted(e||"recording_initialized")}}isInteractiveEvent(e){var t;return 3===e.type&&-1!==ia.indexOf(null===(t=e.data)||void 0===t?void 0:t.source)}_updateWindowAndSessionIds(e){let t=this.isInteractiveEvent(e);t||this.isIdle||!(e.timestamp-this._lastActivityTimestamp>this.sessionIdleThresholdMilliseconds)||(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this.sessionIdleThresholdMilliseconds,bufferLength:this.buffer.data.length,bufferSize:this.buffer.size}),this._flushBuffer());let n=!1;if(t&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),n=!0)),this.isIdle)return;let{windowId:i,sessionId:r}=this.sessionManager.checkAndGetSessionAndWindowId(!t,e.timestamp),o=this.sessionId!==r,s=this.windowId!==i;this.windowId=i,this.sessionId=r,o||s?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):n&&this._scheduleFullSnapshot()}_tryRRWebMethod(e){try{return e.rrwebMethod(),!0}catch(t){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):B.warn(iu+" could not emit queued rrweb event.",t,e),!1}}_tryAddCustomEvent(e,t){return this._tryRRWebMethod(il(()=>this.rrwebRecord.addCustomEvent(e,t)))}_tryTakeFullSnapshot(){return this._tryRRWebMethod(il(()=>this.rrwebRecord.takeFullSnapshot()))}_onScriptLoaded(){var e;let t={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1};for(let[e,n]of Object.entries(this.instance.config.session_recording||{}))e in t&&("maskInputOptions"===e?t.maskInputOptions={password:!0,...n}:t[e]=n);if(this.canvasRecording&&this.canvasRecording.enabled&&(t.recordCanvas=!0,t.sampling={canvas:this.canvasRecording.fps},t.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),!this.rrwebRecord)return void B.error(iu+"onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.");this.mutationRateLimiter=null!==(e=this.mutationRateLimiter)&&void 0!==e?e:new nF(this.rrwebRecord,{refillRate:this.instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this.instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(e,t)=>{let n=`Too many mutations on node '${e}'. Rate limiting. This could be due to SVG animations or something similar`;B.info(n,{node:t}),this.log(iu+" "+n,"warn")}});let n=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord({emit:e=>{this.onRRwebEmit(e)},plugins:n,...t}),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:t,activePlugins:n.map(e=>null==e?void 0:e.name)}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}_scheduleFullSnapshot(){if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),this.isIdle)return;let e=this.fullSnapshotIntervalMillis;e&&(this._fullSnapshotTimer=setInterval(()=>{this._tryTakeFullSnapshot()},e))}_gatherRRWebPlugins(){var e,t,n,i;let r=[],o=null===(e=b.__PosthogExtensions__)||void 0===e||null===(t=e.rrwebPlugins)||void 0===t?void 0:t.getRecordConsolePlugin;o&&this.isConsoleLogCaptureEnabled&&r.push(o());let s=null===(n=b.__PosthogExtensions__)||void 0===n||null===(i=n.rrwebPlugins)||void 0===i?void 0:i.getRecordNetworkPlugin;return this.networkPayloadCapture&&x(s)&&(!e6.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?r.push(s(nA(this.instance.config,this.networkPayloadCapture))):B.info(iu+" NetworkCapture not started because we are on localhost.")),r}onRRwebEmit(e){var t;if(this._processQueuedEvents(),!e||!T(e))return;if(e.type===t6.Meta){let t=this._maskUrl(e.data.href);if(this._lastHref=t,!t)return;e.data.href=t}else this._pageViewFallBack();if(this._checkUrlTriggerConditions(),"paused"===this.status&&!(e.type===t6.Custom&&"recording paused"===e.data.tag))return;e.type===t6.FullSnapshot&&this._scheduleFullSnapshot(),e.type===t6.FullSnapshot&&"trigger_pending"===this.triggerStatus&&this.clearBuffer();let n=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(!n)return;let i=function(e){if(e&&T(e)&&6===e.type&&T(e.data)&&"rrweb/console@1"===e.data.plugin){e.data.payload.payload.length>10&&(e.data.payload.payload=e.data.payload.payload.slice(0,10),e.data.payload.payload.push("...[truncated]"));let t=[];for(let n=0;n<e.data.payload.payload.length;n++)e.data.payload.payload[n]&&e.data.payload.payload[n].length>2e3?t.push(e.data.payload.payload[n].slice(0,2e3)+"...[truncated]"):t.push(e.data.payload.payload[n]);return e.data.payload.payload=t,e}return e}(n);if(this._updateWindowAndSessionIds(i),this.isIdle&&!ic(i))return;if(ic(i)){let e=i.data.payload;if(e){let t=e.lastActivityTimestamp,n=e.threshold;i.timestamp=t+n}}let r=null===(t=this.instance.config.session_recording.compress_events)||void 0===t||t?function(e){if(1024>t2(e))return e;try{if(e.type===t6.FullSnapshot)return{...e,data:id(e.data),cv:"2024-10"};if(e.type===t6.IncrementalSnapshot&&e.data.source===t7.Mutation)return{...e,cv:"2024-10",data:{...e.data,texts:id(e.data.texts),attributes:id(e.data.attributes),removes:id(e.data.removes),adds:id(e.data.adds)}};if(e.type===t6.IncrementalSnapshot&&e.data.source===t7.StyleSheetRule)return{...e,cv:"2024-10",data:{...e.data,adds:id(e.data.adds),removes:id(e.data.removes)}}}catch(e){B.error(iu+" could not compress event - will use uncompressed event",e)}return e}(i):i,o={$snapshot_bytes:t2(r),$snapshot_data:r,$session_id:this.sessionId,$window_id:this.windowId};"disabled"!==this.status?this._captureSnapshotBuffered(o):this.clearBuffer()}_pageViewFallBack(){if(this.instance.config.capture_pageview||!l)return;let e=this._maskUrl(l.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}_processQueuedEvents(){if(this.queuedRRWebEvents.length){let e=[...this.queuedRRWebEvents];this.queuedRRWebEvents=[],e.forEach(e=>{Date.now()-e.enqueuedAt<=2e3&&this._tryRRWebMethod(e)})}}_maskUrl(e){let t=this.instance.config.session_recording;if(t.maskNetworkRequestFn){var n;let i={url:e};return null===(n=i=t.maskNetworkRequestFn(i))||void 0===n?void 0:n.url}return e}clearBuffer(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}_flushBuffer(){this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);let e=this.minimumDuration,t=this.sessionDuration,n=P(t)&&t>=0,i=P(e)&&n&&t<e;return"buffering"===this.status||i?(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3),this.buffer):(this.buffer.data.length>0&&(function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6606028.8;if(t.size>=n&&t.data.length>1){let n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[e({size:t2(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),e({size:t2(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(e=>e)}return[t]})(this.buffer).forEach(e=>{this._captureSnapshot({$snapshot_bytes:e.size,$snapshot_data:e.data,$session_id:e.sessionId,$window_id:e.windowId})}),this.clearBuffer())}_captureSnapshotBuffered(e){var t;let n=2+((null===(t=this.buffer)||void 0===t?void 0:t.data.length)||0);!this.isIdle&&(this.buffer.size+e.$snapshot_bytes+n>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3))}_captureSnapshot(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}_checkUrlTriggerConditions(){if(void 0===l||!l.location.href)return;let e=l.location.href,t="paused"===this.status,n=ih(e,this._urlBlocklist);n&&!t?this._pauseRecording():!n&&t&&this._resumeRecording(),ih(e,this._urlTriggers)&&this._activateTrigger("url")}_activateTrigger(e){var t,n;"trigger_pending"===this.triggerStatus&&(null===(t=this.instance)||void 0===t||null===(n=t.persistence)||void 0===n||n.register({["url"===e?ey:eb]:this.sessionId}),this._flushBuffer(),this._reportStarted(e+"_trigger_matched"))}_pauseRecording(){var e,t;"paused"!==this.status&&(this._urlBlocked=!0,null==g||null===(e=g.body)||void 0===e||null===(t=e.classList)||void 0===t||t.add("ph-no-capture"),clearInterval(this._fullSnapshotTimer),setTimeout(()=>{this._flushBuffer()},100),B.info(iu+" recording paused due to URL blocker"),this._tryAddCustomEvent("recording paused",{reason:"url blocker"}))}_resumeRecording(){var e,t;"paused"===this.status&&(this._urlBlocked=!1,null==g||null===(e=g.body)||void 0===e||null===(t=e.classList)||void 0===t||t.remove("ph-no-capture"),this._tryTakeFullSnapshot(),this._scheduleFullSnapshot(),this._tryAddCustomEvent("recording resumed",{reason:"left blocked url"}),B.info(iu+" recording resumed"))}_addEventTriggerListener(){0!==this._eventTriggers.length&&L(this._removeEventTriggerCaptureHook)&&(this._removeEventTriggerCaptureHook=this.instance.on("eventCaptured",e=>{try{this._eventTriggers.includes(e.event)&&this._activateTrigger("event")}catch(e){B.error(iu+"Could not activate event trigger",e)}}))}overrideLinkedFlag(){this._linkedFlagSeen=!0,this._reportStarted("linked_flag_overridden")}overrideSampling(){var e;null===(e=this.instance.persistence)||void 0===e||e.register({[ev]:!0}),this._reportStarted("sampling_overridden")}overrideTrigger(e){this._activateTrigger(e)}_reportStarted(e,t){this.instance.register_for_session({$session_recording_start_reason:e}),B.info(iu+" "+e.replace("_"," "),t),G(["recording_initialized","session_id_changed"],e)||this._tryAddCustomEvent(e,t)}}class ig{constructor(e){this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}call(){let t={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(eC),group_properties:this.instance.get_property(eI),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:t,compression:this.instance.config.disable_compression?void 0:e.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:e=>this.parseDecideResponse(e.json)})}parseDecideResponse(e){this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer();let t=!e;if(this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(null!=e?e:{},t),t)B.error("Failed to fetch feature flags from PostHog.");else{if(!g||!g.body)return B.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.parseDecideResponse(e)},500);if(this.instance._afterDecideResponse(e),e.siteApps){if(this.instance.config.opt_in_site_apps)for(let{id:t,url:o}of e.siteApps){var n,i,r;b[`__$$ph_site_app_${t}`]=this.instance,null===(n=b.__PosthogExtensions__)||void 0===n||null===(i=(r=n).loadSiteApp)||void 0===i||i.call(r,this.instance,o,e=>{if(e)return B.error(`Error while initializing PostHog app with config id ${t}`,e)})}else e.siteApps.length>0&&B.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}}}let i_=null!=l&&l.location?tn(l.location.hash,"__posthog")||tn(location.hash,"state"):null,im="_postHogToolbarParams";(iD=iW||(iW={}))[iD.UNINITIALIZED=0]="UNINITIALIZED",iD[iD.LOADING=1]="LOADING",iD[iD.LOADED=2]="LOADED";class iv{constructor(e){this.instance=e}setToolbarState(e){b.ph_toolbar_state=e}getToolbarState(){var e;return null!==(e=b.ph_toolbar_state)&&void 0!==e?e:iW.UNINITIALIZED}maybeLoadToolbar(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!l||!g)return!1;n=null!==(e=n)&&void 0!==e?e:l.location,r=null!==(t=r)&&void 0!==t?t:l.history;try{let e;if(!i){try{l.localStorage.setItem("test","test"),l.localStorage.removeItem("test")}catch{return!1}i=null==l?void 0:l.localStorage}let t=i_||tn(n.hash,"__posthog")||tn(n.hash,"state"),o=t?Y(()=>JSON.parse(atob(decodeURIComponent(t))))||Y(()=>JSON.parse(decodeURIComponent(t))):null;return o&&"ph_authorize"===o.action?((e=o).source="url",e&&Object.keys(e).length>0&&(o.desiredHash?n.hash=o.desiredHash:r?r.replaceState(r.state,"",n.pathname+n.search):n.hash="")):((e=JSON.parse(i.getItem(im)||"{}")).source="localstorage",delete e.userIntent),!(!e.token||this.instance.config.token!==e.token)&&(this.loadToolbar(e),!0)}catch{return!1}}_callLoadToolbar(e){(b.ph_load_toolbar||b.ph_load_editor)(e,this.instance)}loadToolbar(e){let t=!(null==g||!g.getElementById(eP));if(!l||t)return!1;let n="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,i={token:this.instance.config.token,...e,apiURL:this.instance.requestRouter.endpointFor("ui"),...n?{instrument:!1}:{}};if(l.localStorage.setItem(im,JSON.stringify({...i,source:void 0})),this.getToolbarState()===iW.LOADED)this._callLoadToolbar(i);else if(this.getToolbarState()===iW.UNINITIALIZED){var r,o;this.setToolbarState(iW.LOADING),null===(r=b.__PosthogExtensions__)||void 0===r||null===(o=r.loadExternalDependency)||void 0===o||o.call(r,this.instance,"toolbar",e=>{if(e)return B.error("Failed to load toolbar",e),void this.setToolbarState(iW.UNINITIALIZED);this.setToolbarState(iW.LOADED),this._callLoadToolbar(i)}),Q(l,"turbolinks:load",()=>{this.setToolbarState(iW.UNINITIALIZED),this.loadToolbar(i)})}return!0}_loadEditor(e){return this.loadToolbar(e)}maybeLoadEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.maybeLoadToolbar(e,t,n)}}class iy{isPaused=!0;queue=[];flushTimeoutMs=3e3;constructor(e){this.sendRequest=e}enqueue(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}unload(){this.clearFlushTimeout();let e=Object.values(this.queue.length>0?this.formatQueue():{});[...e.filter(e=>0===e.url.indexOf("/e")),...e.filter(e=>0!==e.url.indexOf("/e"))].map(e=>{this.sendRequest({...e,transport:"sendBeacon"})})}enable(){this.isPaused=!1,this.setFlushTimeout()}setFlushTimeout(){this.isPaused||(this.flushTimeout=setTimeout(()=>{if(this.clearFlushTimeout(),this.queue.length>0){let e=this.formatQueue();for(let t in e){let n=e[t],i=(new Date).getTime();n.data&&E(n.data)&&Z(n.data,e=>{e.offset=Math.abs(e.timestamp-i),delete e.timestamp}),this.sendRequest(n)}}},this.flushTimeoutMs))}clearFlushTimeout(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}formatQueue(){let e={};return Z(this.queue,t=>{var n;let i=(t?t.batchKey:null)||t.url;R(e[i])&&(e[i]={...t,data:[]}),null===(n=e[i].data)||void 0===n||n.push(t.data)}),this.queue=[],e}}let ib=!!m||!!_,iw="text/plain",iS=(e,t)=>{let[n,i]=e.split("?"),r={...t};null==i||i.split("&").forEach(e=>{let[t]=e.split("=");delete r[t]});let o=te(r);return o=o?(i?i+"&":"")+o:i,`${n}?${o}`},iC=t=>{let{data:n,compression:i}=t;if(!n)return;if(i===e.GZipJS){let e=new Blob([io(is(JSON.stringify(n)),{mtime:0})],{type:iw});return{contentType:iw,body:e,estimatedSize:e.size}}if(i===e.Base64){let e;let t="data="+encodeURIComponent("string"==typeof(e=function(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n,i,r,o,s,a=0,l=0,u="",d=[];if(!e)return e;e=K(e);do n=(s=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,i=s>>12&63,r=s>>6&63,o=63&s,d[l++]=t.charAt(n)+t.charAt(i)+t.charAt(r)+t.charAt(o);while(a<e.length)switch(u=d.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u}(JSON.stringify(n)))?e:JSON.stringify(e));return{contentType:"application/x-www-form-urlencoded",body:t,estimatedSize:new Blob([t]).size}}let r=JSON.stringify(n);return{contentType:"application/json",body:r,estimatedSize:new Blob([r]).size}},iI=[];m&&iI.push({transport:"XHR",method:e=>{var t;let n=new m;n.open(e.method||"GET",e.url,!0);let{contentType:i,body:r}=null!==(t=iC(e))&&void 0!==t?t:{};Z(e.headers,function(e,t){n.setRequestHeader(t,e)}),i&&n.setRequestHeader("Content-Type",i),e.timeout&&(n.timeout=e.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(4===n.readyState){var t;let i={statusCode:n.status,text:n.responseText};if(200===n.status)try{i.json=JSON.parse(n.responseText)}catch{}null===(t=e.callback)||void 0===t||t.call(e,i)}},n.send(r)}}),_&&iI.push({transport:"fetch",method:e=>{var t,n;let{contentType:i,body:r,estimatedSize:o}=null!==(t=iC(e))&&void 0!==t?t:{},s=new Headers;Z(e.headers,function(e,t){s.append(t,e)}),i&&s.append("Content-Type",i);let a=e.url,l=null;if(v){let t=new v;l={signal:t.signal,timeout:setTimeout(()=>t.abort(),e.timeout)}}_(a,{method:(null==e?void 0:e.method)||"GET",headers:s,keepalive:"POST"===e.method&&52428.8>(o||0),body:r,signal:null===(n=l)||void 0===n?void 0:n.signal}).then(t=>t.text().then(n=>{var i;let r={statusCode:t.status,text:n};if(200===t.status)try{r.json=JSON.parse(n)}catch(e){B.error(e)}null===(i=e.callback)||void 0===i||i.call(e,r)})).catch(t=>{var n;B.error(t),null===(n=e.callback)||void 0===n||n.call(e,{statusCode:0,text:t})}).finally(()=>l?clearTimeout(l.timeout):null)}}),null!=p&&p.sendBeacon&&iI.push({transport:"sendBeacon",method:e=>{let t=iS(e.url,{beacon:"1"});try{var n;let{contentType:i,body:r}=null!==(n=iC(e))&&void 0!==n?n:{},o="string"==typeof r?new Blob([r],{type:i}):r;p.sendBeacon(t,o)}catch{}}});class ik{isPolling=!1;pollIntervalMs=3e3;queue=[];constructor(e){this.instance=e,this.queue=[],this.areWeOnline=!0,!R(l)&&"onLine"in l.navigator&&(this.areWeOnline=l.navigator.onLine,l.addEventListener("online",()=>{this.areWeOnline=!0,this.flush()}),l.addEventListener("offline",()=>{this.areWeOnline=!1}))}retriableRequest(e){let{retriesPerformedSoFar:t,...n}=e;P(t)&&t>0&&(n.url=iS(n.url,{retry_count:t})),this.instance._send_request({...n,callback:e=>{var i;200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=t?t:0)<10?this.enqueue({retriesPerformedSoFar:t,...n}):null===(i=n.callback)||void 0===i||i.call(n,e)}})}enqueue(e){let t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;let n=function(e){let t=3e3*2**e,n=Math.min(18e5,t),i=(Math.random()-.5)*(n-t/2);return Math.ceil(n+i)}(t),i=Date.now()+n;this.queue.push({retryAt:i,requestOptions:e});let r=`Enqueued failed request for retry in ${n}`;navigator.onLine||(r+=" (Browser is offline)"),B.warn(r),this.isPolling||(this.isPolling=!0,this.poll())}poll(){this.poller&&clearTimeout(this.poller),this.poller=setTimeout(()=>{this.areWeOnline&&this.queue.length>0&&this.flush(),this.poll()},this.pollIntervalMs)}flush(){let e=Date.now(),t=[],n=this.queue.filter(n=>n.retryAt<e||(t.push(n),!1));if(this.queue=t,n.length>0)for(let{requestOptions:e}of n)this.retriableRequest(e)}unload(){for(let{requestOptions:e}of(this.poller&&(clearTimeout(this.poller),this.poller=void 0),this.queue))try{this.instance._send_request({...e,transport:"sendBeacon"})}catch(e){B.error(e)}this.queue=[]}}class iE{_sessionIdChangedHandlers=[];constructor(e,t,n,i){var r;this.config=e,this.persistence=t,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=n||eY,this._windowIdGenerator=i||eY;let o=e.persistence_name||e.token,s=e.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*nN(s,60,1800,"session_idle_timeout_seconds"),this._window_id_storage_key="ph_"+o+"_window_id",this._primary_window_exists_storage_key="ph_"+o+"_primary_window_exists",this._canUseSessionStorage()){let e=e8.parse(this._window_id_storage_key),t=e8.parse(this._primary_window_exists_storage_key);e&&!t?this._windowId=e:e8.remove(this._window_id_storage_key),e8.set(this._primary_window_exists_storage_key,!0)}if(null!==(r=this.config.bootstrap)&&void 0!==r&&r.sessionID)try{let e=(e=>{let t=e.replace(/-/g,"");if(32!==t.length)throw Error("Not a valid UUID");if("7"!==t[12])throw Error("Not a UUIDv7");return parseInt(t.substring(0,12),16)})(this.config.bootstrap.sessionID);this._setSessionId(this.config.bootstrap.sessionID,(new Date).getTime(),e)}catch(e){B.error("Invalid sessionID in bootstrap",e)}this._listenToReloadWindow()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return R(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),()=>{this._sessionIdChangedHandlers=this._sessionIdChangedHandlers.filter(t=>t!==e)}}_canUseSessionStorage(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&e8.is_supported()}_setWindowId(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&e8.set(this._window_id_storage_key,e))}_getWindowId(){return this._windowId?this._windowId:this._canUseSessionStorage()?e8.parse(this._window_id_storage_key):null}_setSessionId(e,t,n){e===this._sessionId&&t===this._sessionActivityTimestamp&&n===this._sessionStartTimestamp||(this._sessionStartTimestamp=n,this._sessionActivityTimestamp=t,this._sessionId=e,this.persistence.register({[em]:[t,e,n]}))}_getSessionId(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];let e=this.persistence.props[em];return E(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this._setSessionId(null,null,null)}_listenToReloadWindow(){null==l||l.addEventListener("beforeunload",()=>{this._canUseSessionStorage()&&e8.remove(this._primary_window_exists_storage_key)})}checkAndGetSessionAndWindowId(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(new Date).getTime(),[n,i,r]=this._getSessionId(),o=this._getWindowId(),s=P(r)&&r>0&&Math.abs(t-r)>864e5,a=!1,l=!i,u=!e&&Math.abs(t-n)>this.sessionTimeoutMs;l||u||s?(i=this._sessionIdGenerator(),o=this._windowIdGenerator(),B.info("[SessionId] new session ID generated",{sessionId:i,windowId:o,changeReason:{noSessionId:l,activityTimeout:u,sessionPastMaximumLength:s}}),r=t,a=!0):o||(o=this._windowIdGenerator(),a=!0);let d=0===n||!e||s?t:n,c=0===r?(new Date).getTime():r;return this._setWindowId(o),this._setSessionId(i,d,c),a&&this._sessionIdChangedHandlers.forEach(e=>e(i,o,a?{noSessionId:l,activityTimeout:u,sessionPastMaximumLength:s}:void 0)),{sessionId:i,windowId:o,sessionStartTimestamp:c,changeReason:a?{noSessionId:l,activityTimeout:u,sessionPastMaximumLength:s}:void 0,lastActivityTimestamp:n}}}(i$=t||(t={})).US="us",i$.EU="eu",i$.CUSTOM="custom";let ix="i.posthog.com";class iT{_regionCache={};constructor(e){this.instance=e}get apiHost(){let e=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===e?"https://us.i.posthog.com":e}get uiHost(){var e;let t=null===(e=this.instance.config.ui_host)||void 0===e?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace(`.${ix}`,".posthog.com")),"https://app.posthog.com"===t?"https://us.posthog.com":t}get region(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=t.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=t.EU:this._regionCache[this.apiHost]=t.CUSTOM),this._regionCache[this.apiHost]}endpointFor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(n&&(n="/"===n[0]?n:`/${n}`),"ui"===e)return this.uiHost+n;if(this.region===t.CUSTOM)return this.apiHost+n;let i=ix+n;switch(e){case"assets":return`https://${this.region}-assets.${i}`;case"api":return`https://${this.region}.${i}`}}}let iM="posthog-js";function iR(e){let{organization:t,projectId:n,prefix:i,severityAllowList:r=["error"]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o=>{var s,a,l,u,d;if(!("*"===r||r.includes(o.level))||!e.__loaded)return o;o.tags||(o.tags={});let c=e.requestRouter.endpointFor("ui",`/project/${e.config.token}/person/${e.get_distinct_id()}`);o.tags["PostHog Person URL"]=c,e.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));let h=(null===(s=o.exception)||void 0===s?void 0:s.values)||[];h.map(e=>{e.stacktrace&&(e.stacktrace.type="raw")});let p={$exception_message:(null===(a=h[0])||void 0===a?void 0:a.value)||o.message,$exception_type:null===(l=h[0])||void 0===l?void 0:l.type,$exception_personURL:c,$exception_level:o.level,$exception_list:h,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:(null===(u=h[0])||void 0===u?void 0:u.value)||o.message,$sentry_exception_type:null===(d=h[0])||void 0===d?void 0:d.type,$sentry_tags:o.tags,$level:o.level};return t&&n&&(p.$sentry_url=(i||"https://sentry.io/organizations/")+t+"/issues/?project="+n+"&query="+o.event_id),e.exceptions.sendExceptionEvent(p),o}}class iA{constructor(e,t,n,i,r){this.name=iM,this.setupOnce=function(o){o(iR(e,{organization:t,projectId:n,prefix:i,severityAllowList:r}))}}}class iN{constructor(e){this._instance=e}doPageView(e){var t;let n=this._previousPageViewProperties(e);return this._currentPath=null!==(t=null==l?void 0:l.location.pathname)&&void 0!==t?t:"",this._instance.scrollManager.resetContext(),this._prevPageviewTimestamp=e,n}doPageLeave(e){return this._previousPageViewProperties(e)}_previousPageViewProperties(e){let t=this._currentPath,n=this._prevPageviewTimestamp,i=this._instance.scrollManager.getContext();if(!n)return{};let r={};if(i){let{maxScrollHeight:e,lastScrollY:t,maxScrollY:n,maxContentHeight:o,lastContentY:s,maxContentY:a}=i;R(e)||R(t)||R(n)||R(o)||R(s)||R(a)||(e=Math.ceil(e),t=Math.ceil(t),n=Math.ceil(n),o=Math.ceil(o),s=Math.ceil(s),a=Math.ceil(a),r={$prev_pageview_last_scroll:t,$prev_pageview_last_scroll_percentage:e<=1?1:nN(t/e,0,1),$prev_pageview_max_scroll:n,$prev_pageview_max_scroll_percentage:e<=1?1:nN(n/e,0,1),$prev_pageview_last_content:s,$prev_pageview_last_content_percentage:o<=1?1:nN(s/o,0,1),$prev_pageview_max_content:a,$prev_pageview_max_content_percentage:o<=1?1:nN(a/o,0,1)})}return t&&(r.$prev_pageview_pathname=t),n&&(r.$prev_pageview_duration=(e.getTime()-n.getTime())/1e3),r}}(iB=n||(n={})).Popover="popover",iB.API="api",iB.Widget="widget",(iH=i||(i={})).Open="open",iH.MultipleChoice="multiple_choice",iH.SingleChoice="single_choice",iH.Rating="rating",iH.Link="link",(iq=r||(r={})).NextQuestion="next_question",iq.End="end",iq.ResponseBased="response_based",iq.SpecificQuestion="specific_question";class iF{events={};constructor(){this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.events[e]=this.events[e].filter(e=>e!==t)}}emit(e,t){for(let n of this.events[e]||[])n(t);for(let n of this.events["*"]||[])n(e,t)}}class iL{_debugEventEmitter=new iF;constructor(e){this.instance=e,this.actionEvents=new Set,this.actionRegistry=new Set}init(){var e,t;R(null===(e=this.instance)||void 0===e?void 0:e._addCaptureHook)||null===(t=this.instance)||void 0===t||t._addCaptureHook((e,t)=>{this.on(e,t)})}register(e){var t,n,i;if(!R(null===(t=this.instance)||void 0===t?void 0:t._addCaptureHook)&&(e.forEach(e=>{var t,n;null===(t=this.actionRegistry)||void 0===t||t.add(e),null===(n=e.steps)||void 0===n||n.forEach(e=>{var t;null===(t=this.actionEvents)||void 0===t||t.add((null==e?void 0:e.event)||"")})}),null!==(n=this.instance)&&void 0!==n&&n.autocapture)){let t=new Set;e.forEach(e=>{var n;null===(n=e.steps)||void 0===n||n.forEach(e=>{null!=e&&e.selector&&t.add(null==e?void 0:e.selector)})}),null===(i=this.instance)||void 0===i||i.autocapture.setElementSelectors(t)}}on(e,t){var n;null!=t&&0!=e.length&&(this.actionEvents.has(e)||this.actionEvents.has(null==t?void 0:t.event))&&this.actionRegistry&&(null===(n=this.actionRegistry)||void 0===n?void 0:n.size)>0&&this.actionRegistry.forEach(e=>{this.checkAction(t,e)&&this._debugEventEmitter.emit("actionCaptured",e.name)})}_addActionHook(e){this.onAction("actionCaptured",t=>e(t))}checkAction(e,t){if(null==(null==t?void 0:t.steps))return!1;for(let n of t.steps)if(this.checkStep(e,n))return!0;return!1}onAction(e,t){return this._debugEventEmitter.on(e,t)}checkStep=(e,t)=>this.checkStepEvent(e,t)&&this.checkStepUrl(e,t)&&this.checkStepElement(e,t);checkStepEvent=(e,t)=>null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event);checkStepUrl(e,t){if(null!=t&&t.url){var n;let i=null==e||null===(n=e.properties)||void 0===n?void 0:n.$current_url;if(!i||"string"!=typeof i||!iL.matchString(i,null==t?void 0:t.url,(null==t?void 0:t.url_matching)||"contains"))return!1}return!0}static matchString(e,t,n){switch(n){case"regex":return!!l&&e9(e,t);case"exact":return t===e;case"contains":return e9(e,iL.escapeStringRegexp(t).replace(/_/g,".").replace(/%/g,".*"));default:return!1}}static escapeStringRegexp(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}checkStepElement(e,t){if((null!=t&&t.href||null!=t&&t.tag_name||null!=t&&t.text)&&!this.getElementsList(e).some(e=>!(null!=t&&t.href&&!iL.matchString(e.href||"",null==t?void 0:t.href,(null==t?void 0:t.href_matching)||"exact"))&&(null==t||!t.tag_name||e.tag_name===(null==t?void 0:t.tag_name))&&!(null!=t&&t.text&&!iL.matchString(e.text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact")&&!iL.matchString(e.$el_text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact"))))return!1;if(null!=t&&t.selector){var n;let i=null==e||null===(n=e.properties)||void 0===n?void 0:n.$element_selectors;if(!i||!i.includes(null==t?void 0:t.selector))return!1}return!0}getElementsList(e){return null==(null==e?void 0:e.properties.$elements)?[]:null==e?void 0:e.properties.$elements}}class iP{static SURVEY_SHOWN_EVENT_NAME="survey shown";constructor(e){this.instance=e,this.eventToSurveys=new Map,this.actionToSurveys=new Map}register(e){var t;R(null===(t=this.instance)||void 0===t?void 0:t._addCaptureHook)||(this.setupEventBasedSurveys(e),this.setupActionBasedSurveys(e))}setupActionBasedSurveys(e){let t=e.filter(e=>{var t,n,i,r;return(null===(t=e.conditions)||void 0===t?void 0:t.actions)&&(null===(n=e.conditions)||void 0===n||null===(i=n.actions)||void 0===i||null===(r=i.values)||void 0===r?void 0:r.length)>0});0!==t.length&&(null==this.actionMatcher&&(this.actionMatcher=new iL(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook(e=>{this.onAction(e)})),t.forEach(e=>{var t,n,i,r,o,s,a,l,u,d;e.conditions&&null!==(t=e.conditions)&&void 0!==t&&t.actions&&null!==(n=e.conditions)&&void 0!==n&&null!==(i=n.actions)&&void 0!==i&&i.values&&(null===(r=e.conditions)||void 0===r||null===(o=r.actions)||void 0===o||null===(s=o.values)||void 0===s?void 0:s.length)>0&&(null===(a=this.actionMatcher)||void 0===a||a.register(e.conditions.actions.values),null===(l=e.conditions)||void 0===l||null===(u=l.actions)||void 0===u||null===(d=u.values)||void 0===d||d.forEach(t=>{if(t&&t.name){let n=this.actionToSurveys.get(t.name);n&&n.push(e.id),this.actionToSurveys.set(t.name,n||[e.id])}}))}))}setupEventBasedSurveys(e){var t;0!==e.filter(e=>{var t,n,i,r;return(null===(t=e.conditions)||void 0===t?void 0:t.events)&&(null===(n=e.conditions)||void 0===n||null===(i=n.events)||void 0===i||null===(r=i.values)||void 0===r?void 0:r.length)>0}).length&&(null===(t=this.instance)||void 0===t||t._addCaptureHook((e,t)=>{this.onEvent(e,t)}),e.forEach(e=>{var t,n,i;null===(t=e.conditions)||void 0===t||null===(n=t.events)||void 0===n||null===(i=n.values)||void 0===i||i.forEach(t=>{if(t&&t.name){let n=this.eventToSurveys.get(t.name);n&&n.push(e.id),this.eventToSurveys.set(t.name,n||[e.id])}})}))}onEvent(e,t){var n,i,r;let o=(null===(n=this.instance)||void 0===n||null===(i=n.persistence)||void 0===i?void 0:i.props[eE])||[];if(iP.SURVEY_SHOWN_EVENT_NAME==e&&t&&o.length>0){let e=null==t||null===(r=t.properties)||void 0===r?void 0:r.$survey_id;if(e){let t=o.indexOf(e);t>=0&&(o.splice(t,1),this._updateActivatedSurveys(o))}}else this.eventToSurveys.has(e)&&this._updateActivatedSurveys(o.concat(this.eventToSurveys.get(e)||[]))}onAction(e){var t,n;let i=(null===(t=this.instance)||void 0===t||null===(n=t.persistence)||void 0===n?void 0:n.props[eE])||[];this.actionToSurveys.has(e)&&this._updateActivatedSurveys(i.concat(this.actionToSurveys.get(e)||[]))}_updateActivatedSurveys(e){var t,n;null===(t=this.instance)||void 0===t||null===(n=t.persistence)||void 0===n||n.register({[eE]:[...new Set(e)]})}getSurveys(){var e,t;return(null===(e=this.instance)||void 0===e||null===(t=e.persistence)||void 0===t?void 0:t.props[eE])||[]}getEventToSurveys(){return this.eventToSurveys}_getActionMatcher(){return this.actionMatcher}}var iO,iD,i$,iB,iH,iq,iW,iV,iZ,iU,iG,iz,iY,ij,iX,iJ={},iK=[],iQ=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,i0=Array.isArray;function i1(e,t){for(var n in t)e[n]=t[n];return e}function i2(e){var t=e.parentNode;t&&t.removeChild(e)}function i5(e,t,n,i,r){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++iU:r,__i:-1,__u:0};return null==r&&null!=iZ.vnode&&iZ.vnode(o),o}function i3(e){return e.children}function i4(e,t){this.props=e,this.context=t}function i8(e,t){if(null==t)return e.__?i8(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?i8(e):null}function i6(e){(!e.__d&&(e.__d=!0)&&iG.push(e)&&!i7.__r++||iz!==iZ.debounceRendering)&&((iz=iZ.debounceRendering)||iY)(i7)}function i7(){var e,t,n,i,r,o,s,a,l;for(iG.sort(ij);e=iG.shift();)e.__d&&(t=iG.length,i=void 0,o=(r=(n=e).__v).__e,a=[],l=[],(s=n.__P)&&((i=i1({},r)).__v=r.__v+1,iZ.vnode&&iZ.vnode(i),rr(s,i,r,n.__n,void 0!==s.ownerSVGElement,32&r.__u?[o]:null,a,null==o?i8(r):o,!!(32&r.__u),l),i.__.__k[i.__i]=i,function(e,t,n){t.__d=void 0;for(var i=0;i<n.length;i++)ro(n[i],n[++i],n[++i]);iZ.__c&&iZ.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){iZ.__e(e,t.__v)}})}(a,i,l),i.__e!=o&&function e(t){var n,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(i=t.__k[n])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(i)),iG.length>t&&iG.sort(ij));i7.__r=0}function i9(e,t,n,i,r,o,s,a,l,u,d){var c,h,p,g,f,_=i&&i.__k||iK,m=t.length;for(n.__d=l,function(e,t,n){var i,r,o,s,a,l=t.length,u=n.length,d=u,c=0;for(e.__k=[],i=0;i<l;i++)null!=(r=e.__k[i]=null==(r=t[i])||"boolean"==typeof r||"function"==typeof r?null:"string"==typeof r||"number"==typeof r||"bigint"==typeof r||r.constructor==String?i5(null,r,null,null,r):i0(r)?i5(i3,{children:r},null,null,null):void 0===r.constructor&&r.__b>0?i5(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)?(r.__=e,r.__b=e.__b+1,a=function(e,t,n,i){var r=e.key,o=e.type,s=n-1,a=n+1,l=t[n];if(null===l||l&&r==l.key&&o===l.type)return n;if(i>(null!=l&&0==(131072&l.__u)?1:0))for(;s>=0||a<t.length;){if(s>=0){if((l=t[s])&&0==(131072&l.__u)&&r==l.key&&o===l.type)return s;s--}if(a<t.length){if((l=t[a])&&0==(131072&l.__u)&&r==l.key&&o===l.type)return a;a++}}return -1}(r,n,s=i+c,d),r.__i=a,o=null,-1!==a&&(d--,(o=n[a])&&(o.__u|=131072)),null==o||null===o.__v?(-1==a&&c--,"function"!=typeof r.type&&(r.__u|=65536)):a!==s&&(a===s+1?c++:a>s?d>l-s?c+=a-s:c--:c=a<s&&a==s-1?a-s:0,a!==i+c&&(r.__u|=65536))):(o=n[i])&&null==o.key&&o.__e&&(o.__e==e.__d&&(e.__d=i8(o)),rs(o,o,!1),n[i]=null,d--);if(d)for(i=0;i<u;i++)null!=(o=n[i])&&0==(131072&o.__u)&&(o.__e==e.__d&&(e.__d=i8(o)),rs(o,o))}(n,t,_),l=n.__d,c=0;c<m;c++)null!=(p=n.__k[c])&&"boolean"!=typeof p&&"function"!=typeof p&&(h=-1===p.__i?iJ:_[p.__i]||iJ,p.__i=c,rr(e,p,h,r,o,s,a,l,u,d),g=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&ro(h.ref,null,p),d.push(p.ref,p.__c||g,p)),null==f&&null!=g&&(f=g),65536&p.__u||h.__k===p.__k?l=function e(t,n,i){var r,o;if("function"==typeof t.type){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,n=e(r[o],n,i));return n}return t.__e!=n&&(i.insertBefore(t.__e,n||null),n=t.__e),n&&n.nextSibling}(p,l,e):"function"==typeof p.type&&void 0!==p.__d?l=p.__d:g&&(l=g.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=l,n.__e=f}function re(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||iQ.test(t)?n:n+"px"}function rt(e,t,n,i,r){var o;e:if("style"===t){if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||re(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||re(e.style,t,n[t])}}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=Date.now(),e.addEventListener(t,o?ri:rn,o)):e.removeEventListener(t,o?ri:rn,o);else{if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function rn(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(iZ.event?iZ.event(e):e)}function ri(e){return this.l[e.type+!0](iZ.event?iZ.event(e):e)}function rr(e,t,n,i,r,o,s,a,l,u){var d,c,h,p,g,f,_,m,v,y,b,w,S,C,I,k=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),o=[a=t.__e=n.__e]),(d=iZ.__b)&&d(t);e:if("function"==typeof k)try{if(m=t.props,v=(d=k.contextType)&&i[d.__c],y=d?v?v.props.value:d.__:i,n.__c?_=(c=t.__c=n.__c).__=c.__E:("prototype"in k&&k.prototype.render?t.__c=c=new k(m,y):(t.__c=c=new i4(m,y),c.constructor=k,c.render=ra),v&&v.sub(c),c.props=m,c.state||(c.state={}),c.context=y,c.__n=i,h=c.__d=!0,c.__h=[],c._sb=[]),null==c.__s&&(c.__s=c.state),null!=k.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=i1({},c.__s)),i1(c.__s,k.getDerivedStateFromProps(m,c.__s))),p=c.props,g=c.state,c.__v=t,h)null==k.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==k.getDerivedStateFromProps&&m!==p&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(m,y),!c.__e&&(null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(m,c.__s,y)||t.__v===n.__v)){for(t.__v!==n.__v&&(c.props=m,c.state=c.__s,c.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(e){e&&(e.__=t)}),b=0;b<c._sb.length;b++)c.__h.push(c._sb[b]);c._sb=[],c.__h.length&&s.push(c);break e}null!=c.componentWillUpdate&&c.componentWillUpdate(m,c.__s,y),null!=c.componentDidUpdate&&c.__h.push(function(){c.componentDidUpdate(p,g,f)})}if(c.context=y,c.props=m,c.__P=e,c.__e=!1,w=iZ.__r,S=0,"prototype"in k&&k.prototype.render){for(c.state=c.__s,c.__d=!1,w&&w(t),d=c.render(c.props,c.state,c.context),C=0;C<c._sb.length;C++)c.__h.push(c._sb[C]);c._sb=[]}else do c.__d=!1,w&&w(t),d=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++S<25)c.state=c.__s,null!=c.getChildContext&&(i=i1(i1({},i),c.getChildContext())),h||null==c.getSnapshotBeforeUpdate||(f=c.getSnapshotBeforeUpdate(p,g)),i9(e,i0(I=null!=d&&d.type===i3&&null==d.key?d.props.children:d)?I:[I],t,n,i,r,o,s,a,l,u),c.base=t.__e,t.__u&=-161,c.__h.length&&s.push(c),_&&(c.__E=c.__=null)}catch(e){t.__v=null,l||null!=o?(t.__e=a,t.__u|=l?160:32,o[o.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),iZ.__e(e,t,n)}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,i,r,o,s,a,l){var u,d,c,h,p,g,f,_=n.props,m=t.props,v=t.type;if("svg"===v&&(r=!0),null!=o){for(u=0;u<o.length;u++)if((p=o[u])&&"setAttribute"in p==!!v&&(v?p.localName===v:3===p.nodeType)){e=p,o[u]=null;break}}if(null==e){if(null===v)return document.createTextNode(m);e=r?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,m.is&&m),o=null,a=!1}if(null===v)_===m||a&&e.data===m||(e.data=m);else{if(o=o&&iV.call(e.childNodes),_=n.props||iJ,!a&&null!=o)for(_={},u=0;u<e.attributes.length;u++)_[(p=e.attributes[u]).name]=p.value;for(u in _)p=_[u],"children"==u||("dangerouslySetInnerHTML"==u?c=p:"key"===u||u in m||rt(e,u,null,p,r));for(u in m)p=m[u],"children"==u?h=p:"dangerouslySetInnerHTML"==u?d=p:"value"==u?g=p:"checked"==u?f=p:"key"===u||a&&"function"!=typeof p||_[u]===p||rt(e,u,p,_[u],r);if(d)a||c&&(d.__html===c.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(c&&(e.innerHTML=""),i9(e,i0(h)?h:[h],t,n,i,r&&"foreignObject"!==v,o,s,o?o[0]:n.__k&&i8(n,0),a,l),null!=o)for(u=o.length;u--;)null!=o[u]&&i2(o[u]);a||(u="value",void 0===g||g===e[u]&&("progress"!==v||g)&&("option"!==v||g===_[u])||rt(e,u,g,_[u],!1),u="checked",void 0!==f&&f!==e[u]&&rt(e,u,f,_[u],!1))}return e}(n.__e,t,n,i,r,o,s,l,u);(d=iZ.diffed)&&d(t)}function ro(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){iZ.__e(e,n)}}function rs(e,t,n){var i,r;if(iZ.unmount&&iZ.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||ro(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){iZ.__e(e,t)}i.base=i.__P=null,e.__c=void 0}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&rs(i[r],t,n||"function"!=typeof e.type);n||null==e.__e||i2(e.__e),e.__=e.__e=e.__d=void 0}function ra(e,t,n){return this.constructor(e,n)}iV=iK.slice,iZ={__e:function(e,t,n,i){for(var r,o,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&null!=o.getDerivedStateFromError&&(r.setState(o.getDerivedStateFromError(e)),s=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),s=r.__d),s)return r.__E=r}catch(t){e=t}throw e}},iU=0,i4.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=i1({},this.state),"function"==typeof e&&(e=e(i1({},n),this.props)),e&&i1(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),i6(this))},i4.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),i6(this))},i4.prototype.render=i3,iG=[],iY="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ij=function(e,t){return e.__v.__b-t.__v.__b},i7.__r=0,iX=0,t5={isPreviewMode:!1,previewPageIndex:0,handleCloseSurveyPopup:()=>{},isPopup:!0},(t4={__c:t3="__cC"+iX++,__:t5,Consumer:function(e,t){return e.children(t)},Provider:function(e){var t,n;return this.getChildContext||(t=[],(n={})[t3]=this,this.getChildContext=function(){return n},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&t.some(function(e){e.__e=!0,i6(e)})},this.sub=function(e){t.push(e);var n=e.componentWillUnmount;e.componentWillUnmount=function(){t.splice(t.indexOf(e),1),n&&n.call(e)}}),e.children}}).Provider.__=t4.Consumer.contextType=t4;let rl="[Surveys]",ru={icontains:e=>!!l&&l.location.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:e=>!!l&&-1===l.location.href.toLowerCase().indexOf(e.toLowerCase()),regex:e=>!!l&&e9(l.location.href,e),not_regex:e=>!!l&&!e9(l.location.href,e),exact:e=>(null==l?void 0:l.location.href)===e,is_not:e=>(null==l?void 0:l.location.href)!==e};class rd{constructor(e){this.instance=e,this._surveyEventReceiver=null}afterDecideResponse(e){this._decideServerResponse=!!e.surveys,this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate"),(()=>{let e=[];for(let t=0;t<localStorage.length;t++){let n=localStorage.key(t);null!=n&&n.startsWith("seenSurvey_")&&e.push(n)}return e})().forEach(e=>localStorage.removeItem(e))}loadIfEnabled(){var e,t,n;let i=null==b||null===(e=b.__PosthogExtensions__)||void 0===e?void 0:e.generateSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||i||(null==this._surveyEventReceiver&&(this._surveyEventReceiver=new iP(this.instance)),null===(t=b.__PosthogExtensions__)||void 0===t||null===(n=t.loadExternalDependency)||void 0===n||n.call(t,this.instance,"surveys",e=>{var t,n;if(e)return B.error(rl,"Could not load surveys script",e);this._surveyManager=null===(t=b.__PosthogExtensions__)||void 0===t||null===(n=t.generateSurveys)||void 0===n?void 0:n.call(t,this.instance)}))}getSurveys(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.config.disable_surveys)return e([]);null==this._surveyEventReceiver&&(this._surveyEventReceiver=new iP(this.instance));let n=this.instance.get_property(ek);if(n&&!t)return e(n);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api",`/api/surveys/?token=${this.instance.config.token}`),method:"GET",transport:"XHR",callback:t=>{var n,i;if(200!==t.statusCode||!t.json)return e([]);let r=t.json.surveys||[],o=r.filter(e=>{var t,n,i,r,o,s,a,l,u,d,c,h;return(null===(t=e.conditions)||void 0===t?void 0:t.events)&&(null===(n=e.conditions)||void 0===n||null===(i=n.events)||void 0===i?void 0:i.values)&&(null===(r=e.conditions)||void 0===r||null===(o=r.events)||void 0===o||null===(s=o.values)||void 0===s?void 0:s.length)>0||(null===(a=e.conditions)||void 0===a?void 0:a.actions)&&(null===(l=e.conditions)||void 0===l||null===(u=l.actions)||void 0===u?void 0:u.values)&&(null===(d=e.conditions)||void 0===d||null===(c=d.actions)||void 0===c||null===(h=c.values)||void 0===h?void 0:h.length)>0});return o.length>0&&(null===(i=this._surveyEventReceiver)||void 0===i||i.register(o)),null===(n=this.instance.persistence)||void 0===n||n.register({[ek]:r}),e(r)}})}getActiveMatchingSurveys(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSurveys(t=>{var n;let i=t.filter(e=>!(!e.start_date||e.end_date)).filter(e=>{var t,n,i,r;if(!e.conditions)return!0;let o=null===(t=e.conditions)||void 0===t||!t.url||ru[null!==(n=null===(i=e.conditions)||void 0===i?void 0:i.urlMatchType)&&void 0!==n?n:"icontains"](e.conditions.url),s=null===(r=e.conditions)||void 0===r||!r.selector||(null==g?void 0:g.querySelector(e.conditions.selector));return o&&s}),r=null===(n=this._surveyEventReceiver)||void 0===n?void 0:n.getSurveys();return e(i.filter(e=>{var t,n,i,o,s,a,l,u,d,c;if(!e.linked_flag_key&&!e.targeting_flag_key&&!e.internal_targeting_flag_key)return!0;let h=!e.linked_flag_key||this.instance.featureFlags.isFeatureEnabled(e.linked_flag_key),p=!e.targeting_flag_key||this.instance.featureFlags.isFeatureEnabled(e.targeting_flag_key),g=(null===(t=e.conditions)||void 0===t?void 0:t.events)&&(null===(n=e.conditions)||void 0===n||null===(i=n.events)||void 0===i?void 0:i.values)&&(null===(o=e.conditions)||void 0===o||null===(s=o.events)||void 0===s?void 0:s.values.length)>0,f=(null===(a=e.conditions)||void 0===a?void 0:a.actions)&&(null===(l=e.conditions)||void 0===l||null===(u=l.actions)||void 0===u?void 0:u.values)&&(null===(d=e.conditions)||void 0===d||null===(c=d.actions)||void 0===c?void 0:c.values.length)>0,_=!g&&!f||(null==r?void 0:r.includes(e.id)),m=this._canActivateRepeatedly(e),v=!(e.internal_targeting_flag_key&&!m)||this.instance.featureFlags.isFeatureEnabled(e.internal_targeting_flag_key);return h&&p&&v&&_}))},t)}getNextSurveyStep(e,t,n){var o,s,a,l,u;let d=e.questions[t],c=t+1;if(null===(o=d.branching)||void 0===o||!o.type)return t===e.questions.length-1?r.End:c;if(d.branching.type===r.End)return r.End;if(d.branching.type===r.SpecificQuestion){if(Number.isInteger(d.branching.index))return d.branching.index}else if(d.branching.type===r.ResponseBased){if(d.type===i.SingleChoice){let e=d.choices.indexOf(`${n}`);if(null!==(s=d.branching)&&void 0!==s&&null!==(a=s.responseValues)&&void 0!==a&&a.hasOwnProperty(e)){let t=d.branching.responseValues[e];return Number.isInteger(t)?t:t===r.End?r.End:c}}else if(d.type===i.Rating){if("number"!=typeof n||!Number.isInteger(n))throw Error("The response type must be an integer");let e=function(e,t){if(3===t){if(e<1||e>3)throw Error("The response must be in range 1-3");return 1===e?"negative":2===e?"neutral":"positive"}if(5===t){if(e<1||e>5)throw Error("The response must be in range 1-5");return e<=2?"negative":3===e?"neutral":"positive"}if(7===t){if(e<1||e>7)throw Error("The response must be in range 1-7");return e<=3?"negative":4===e?"neutral":"positive"}if(10===t){if(e<0||e>10)throw Error("The response must be in range 0-10");return e<=6?"detractors":e<=8?"passives":"promoters"}throw Error("The scale must be one of: 3, 5, 7, 10")}(n,d.scale);if(null!==(l=d.branching)&&void 0!==l&&null!==(u=l.responseValues)&&void 0!==u&&u.hasOwnProperty(e)){let t=d.branching.responseValues[e];return Number.isInteger(t)?t:t===r.End?r.End:c}}return c}return B.warn(rl,"Falling back to next question index due to unexpected branching type"),c}_canActivateRepeatedly(e){var t;return L(null===(t=b.__PosthogExtensions__)||void 0===t?void 0:t.canActivateRepeatedly)?(B.warn(rl,"canActivateRepeatedly is not defined, must init before calling"),!1):b.__PosthogExtensions__.canActivateRepeatedly(e)}canRenderSurvey(e){L(this._surveyManager)?B.warn(rl,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(t=>{let n=t.filter(t=>t.id===e)[0];this._surveyManager.canRenderSurvey(n)})}renderSurvey(e,t){L(this._surveyManager)?B.warn(rl,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(n=>{let i=n.filter(t=>t.id===e)[0];this._surveyManager.renderSurvey(i,null==g?void 0:g.querySelector(t))})}}class rc{serverLimits={};lastEventRateLimited=!1;constructor(e){var t,n;this.instance=e,this.captureEventsPerSecond=(null===(t=e.config.rate_limiting)||void 0===t?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null===(n=e.config.rate_limiting)||void 0===n?void 0:n.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(){var e,t,n;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(new Date).getTime(),o=null!==(e=null===(t=this.instance.persistence)||void 0===t?void 0:t.get_property(eR))&&void 0!==e?e:{tokens:this.captureEventsBurstLimit,last:r};o.tokens+=(r-o.last)/1e3*this.captureEventsPerSecond,o.last=r,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);let s=o.tokens<1;return s||i||(o.tokens=Math.max(0,o.tokens-1)),!s||this.lastEventRateLimited||i||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:`posthog-js client rate limited. Config is set to ${this.captureEventsPerSecond} events per second and ${this.captureEventsBurstLimit} events burst limit.`},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=s,null===(n=this.instance.persistence)||void 0===n||n.set_property(eR,o),{isRateLimited:s,remainingTokens:o.tokens}}isServerRateLimited(e){let t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}checkForLimiting=e=>{let t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach(e=>{B.info(`[RateLimiter] ${e||"events"} is quota limited.`),this.serverLimits[e]=(new Date).getTime()+6e4})}catch(e){return void B.warn(`[RateLimiter] could not rate limit - continuing. Error: "${null==e?void 0:e.message}"`,{text:t})}}}let rh=()=>({initialPathName:(null==f?void 0:f.pathname)||"",referringDomain:tQ.referringDomain(),...tQ.campaignParams()});class rp{constructor(e,t,n){this._sessionIdManager=e,this._persistence=t,this._sessionSourceParamGenerator=n||rh,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}_getStoredProps(){return this._persistence.props[eM]}_onSessionIdCallback=e=>{let t=this._getStoredProps();if(t&&t.sessionId===e)return;let n={sessionId:e,props:this._sessionSourceParamGenerator()};this._persistence.register({[eM]:n})};getSessionProps(){var e;let t=null===(e=this._getStoredProps())||void 0===e?void 0:e.props;return t?{$client_session_initial_referring_host:t.referringDomain,$client_session_initial_pathname:t.initialPathName,$client_session_initial_utm_source:t.utm_source,$client_session_initial_utm_campaign:t.utm_campaign,$client_session_initial_utm_medium:t.utm_medium,$client_session_initial_utm_content:t.utm_content,$client_session_initial_utm_term:t.utm_term}:{}}}let rg=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],rf=function(e,t){if(!e)return!1;let n=e.toLowerCase();return rg.concat(t||[]).some(e=>{let t=e.toLowerCase();return -1!==n.indexOf(t)})},r_=function(e,t){if(!e)return!1;let n=e.userAgent;if(n&&rf(n,t))return!0;try{let n=null==e?void 0:e.userAgentData;if(null!=n&&n.brands&&n.brands.some(e=>rf(null==e?void 0:e.brand,t)))return!0}catch{}return!!e.webdriver};class rm{constructor(){this.clicks=[]}isRageClick(e,t,n){let i=this.clicks[this.clicks.length-1];if(i&&Math.abs(e-i.x)+Math.abs(t-i.y)<30&&n-i.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:n}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:n}];return!1}}let rv="[Dead Clicks]",ry=()=>!0,rb=e=>{var t;let n=!(null===(t=e.instance.persistence)||void 0===t||!t.get_property(eu)),i=e.instance.config.capture_dead_clicks;return O(i)?i:n};class rw{get lazyLoadedDeadClicksAutocapture(){return this._lazyLoadedDeadClicksAutocapture}constructor(e,t,n){this.instance=e,this.isEnabled=t,this.onCapture=n,this.startIfEnabled()}afterDecideResponse(e){this.instance.persistence&&this.instance.persistence.register({[eu]:null==e?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.loadScript(()=>{this.start()})}loadScript(e){var t,n,i;null!==(t=b.__PosthogExtensions__)&&void 0!==t&&t.initDeadClicksAutocapture&&e(),null===(n=b.__PosthogExtensions__)||void 0===n||null===(i=n.loadExternalDependency)||void 0===i||i.call(n,this.instance,"dead-clicks-autocapture",t=>{t?B.error(rv+" failed to load script",t):e()})}start(){var e;if(g){if(!this._lazyLoadedDeadClicksAutocapture&&null!==(e=b.__PosthogExtensions__)&&void 0!==e&&e.initDeadClicksAutocapture){let e=T(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};e.__onCapture=this.onCapture,this._lazyLoadedDeadClicksAutocapture=b.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,e),this._lazyLoadedDeadClicksAutocapture.start(g),B.info(`${rv} starting...`)}}else B.error(rv+" `document` not found. Cannot start.")}stop(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,B.info(`${rv} stopping...`))}}class rS{rageclicks=new rm;_enabledServerSide=!1;_initialized=!1;_flushInterval=null;constructor(e){var t;this.instance=e,this._enabledServerSide=!(null===(t=this.instance.persistence)||void 0===t||!t.props[eo]),null==l||l.addEventListener("beforeunload",()=>{this.flush()})}get flushIntervalMilliseconds(){let e=5e3;return T(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return R(this.instance.config.capture_heatmaps)?R(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled)this._initialized||(B.info("[heatmaps] starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds));else{var e,t;clearInterval(null!==(e=this._flushInterval)&&void 0!==e?e:void 0),null===(t=this.deadClicksCapture)||void 0===t||t.stop(),this.getAndClearBuffer()}}afterDecideResponse(e){let t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[eo]:t}),this._enabledServerSide=t,this.startIfEnabled()}getAndClearBuffer(){let e=this.buffer;return this.buffer=void 0,e}_onDeadClick(e){this._onClick(e.originalEvent,"deadclick")}_setupListeners(){l&&g&&(Q(g,"click",e=>this._onClick(e||(null==l?void 0:l.event)),!1,!0),Q(g,"mousemove",e=>this._onMouseMove(e||(null==l?void 0:l.event)),!1,!0),this.deadClicksCapture=new rw(this.instance,ry,this._onDeadClick.bind(this)),this.deadClicksCapture.startIfEnabled(),this._initialized=!0)}_getProperties(e,t){let n=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),r=this.instance.scrollManager.scrollElement(),o=function(e,t,n){let i=e;for(;i&&ne(i)&&!nt(i,"body")&&i!==n;){if(G(t,null==l?void 0:l.getComputedStyle(i).position))return!0;i=nc(i)}return!1}(nu(e),["fixed","sticky"],r);return{x:e.clientX+(o?0:i),y:e.clientY+(o?0:n),target_fixed:o,type:t}}_onClick(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click";if(t9(e.target))return;let i=this._getProperties(e,n);null!==(t=this.rageclicks)&&void 0!==t&&t.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._capture({...i,type:"rageclick"}),this._capture(i)}_onMouseMove(e){t9(e.target)||(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout(()=>{this._capture(this._getProperties(e,"mousemove"))},500))}_capture(e){if(!l)return;let t=l.location.href;this.buffer=this.buffer||{},this.buffer[t]||(this.buffer[t]=[]),this.buffer[t].push(e)}flush(){this.buffer&&!M(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class rC{constructor(e){this.instance=e}getContext(){return this.context}resetContext(){let e=this.context;return setTimeout(this._updateScrollData,0),e}_updateScrollData=()=>{var e,t,n,i;this.context||(this.context={});let r=this.scrollElement(),o=this.scrollY(),s=r?Math.max(0,r.scrollHeight-r.clientHeight):0,a=o+((null==r?void 0:r.clientHeight)||0),l=(null==r?void 0:r.scrollHeight)||0;this.context.lastScrollY=Math.ceil(o),this.context.maxScrollY=Math.max(o,null!==(e=this.context.maxScrollY)&&void 0!==e?e:0),this.context.maxScrollHeight=Math.max(s,null!==(t=this.context.maxScrollHeight)&&void 0!==t?t:0),this.context.lastContentY=a,this.context.maxContentY=Math.max(a,null!==(n=this.context.maxContentY)&&void 0!==n?n:0),this.context.maxContentHeight=Math.max(l,null!==(i=this.context.maxContentHeight)&&void 0!==i?i:0)};startMeasuringScrollPosition(){null==l||l.addEventListener("scroll",this._updateScrollData,!0),null==l||l.addEventListener("scrollend",this._updateScrollData,!0),null==l||l.addEventListener("resize",this._updateScrollData)}scrollElement(){if(!this.instance.config.scroll_root_selector)return null==l?void 0:l.document.documentElement;for(let e of E(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector]){let t=null==l?void 0:l.document.querySelector(e);if(t)return t}}scrollY(){if(this.instance.config.scroll_root_selector){let e=this.scrollElement();return e&&e.scrollTop||0}return l&&(l.scrollY||l.pageYOffset||l.document.documentElement.scrollTop)||0}scrollX(){if(this.instance.config.scroll_root_selector){let e=this.scrollElement();return e&&e.scrollLeft||0}return l&&(l.scrollX||l.pageXOffset||l.document.documentElement.scrollLeft)||0}}let rI="$copy_autocapture";function rk(e,t){return t.length>e?t.slice(0,e)+"...":t}class rE{_initialized=!1;_isDisabledServerSide=null;rageclicks=new rm;_elementsChainAsString=!1;constructor(e){this.instance=e,this._elementSelectors=null}get config(){var e,t;let n=T(this.instance.config.autocapture)?this.instance.config.autocapture:{};return n.url_allowlist=null===(e=n.url_allowlist)||void 0===e?void 0:e.map(e=>new RegExp(e)),n.url_ignorelist=null===(t=n.url_ignorelist)||void 0===t?void 0:t.map(e=>new RegExp(e)),n}_addDomEventHandlers(){if(!this.isBrowserSupported())return void B.info("Disabling Automatic Event Collection because this browser is not supported");if(!l||!g)return;let e=e=>{e=e||(null==l?void 0:l.event);try{this._captureEvent(e)}catch(e){B.error("Failed to capture event",e)}},t=e=>{e=e||(null==l?void 0:l.event),this._captureEvent(e,rI)};Q(g,"submit",e,!1,!0),Q(g,"change",e,!1,!0),Q(g,"click",e,!1,!0),this.config.capture_copied_text&&(Q(g,"copy",t,!1,!0),Q(g,"cut",t,!1,!0))}startIfEnabled(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}afterDecideResponse(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[er]:!!e.autocapture_opt_out}),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this._elementSelectors=e}getElementSelectors(e){var t;let n=[];return null===(t=this._elementSelectors)||void 0===t||t.forEach(t=>{let i=null==g?void 0:g.querySelectorAll(t);null==i||i.forEach(i=>{e===i&&n.push(t)})}),n}get isEnabled(){var e,t;let n=null===(e=this.instance.persistence)||void 0===e?void 0:e.props[er];if(F(this._isDisabledServerSide)&&!O(n)&&!this.instance.config.advanced_disable_decide)return!1;let i=null!==(t=this._isDisabledServerSide)&&void 0!==t?t:!!n;return!!this.instance.config.autocapture&&!i}_captureEvent(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$autocapture";if(!this.isEnabled)return;let r=nu(e);nn(r)&&(r=r.parentNode||null),"$autocapture"===i&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!==(t=this.rageclicks)&&void 0!==t&&t.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._captureEvent(e,"$rageclick");let o=i===rI;if(r&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(!l||!e||nt(e,"html")||!ne(e)||null!=n&&n.url_allowlist&&!no(n.url_allowlist)||null!=n&&n.url_ignorelist&&no(n.url_ignorelist))return!1;if(null!=n&&n.dom_event_allowlist){let e=n.dom_event_allowlist;if(e&&!e.some(e=>t.type===e))return!1}let o=!1,s=[e],a=!0,u=e;for(;u.parentNode&&!nt(u,"body");)if(ni(u.parentNode))s.push(u.parentNode.host),u=u.parentNode.host;else{if(!(a=nc(u)))break;if(i||nd.indexOf(a.tagName.toLowerCase())>-1)o=!0;else{let e=l.getComputedStyle(a);e&&"pointer"===e.getPropertyValue("cursor")&&(o=!0)}s.push(a),u=a}if(!function(e,t){let n=null==t?void 0:t.element_allowlist;if(R(n))return!0;for(let t of e)if(n.some(e=>t.tagName.toLowerCase()===e))return!0;return!1}(s,n)||!function(e,t){let n=null==t?void 0:t.css_selector_allowlist;if(R(n))return!0;for(let t of e)if(n.some(e=>t.matches(e)))return!0;return!1}(s,n))return!1;let d=l.getComputedStyle(e);if(d&&"pointer"===d.getPropertyValue("cursor")&&"click"===t.type)return!0;let c=e.tagName.toLowerCase();switch(c){case"html":return!1;case"form":return(r||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(t.type)>=0;default:return o?(r||["click"]).indexOf(t.type)>=0:(r||["click"]).indexOf(t.type)>=0&&(nd.indexOf(c)>-1||"true"===e.getAttribute("contenteditable"))}}(r,e,this.config,o,o?["copy","cut"]:void 0)){let{props:t,explicitNoCapture:o}=function(e,t){var n,i,r,o;let{e:s,maskAllElementAttributes:a,maskAllText:u,elementAttributeIgnoreList:d,elementsChainAsString:c}=t,h=[e],p=e;for(;p.parentNode&&!nt(p,"body");)ni(p.parentNode)?(h.push(p.parentNode.host),p=p.parentNode.host):(h.push(p.parentNode),p=p.parentNode);let g=[],f={},_,m=!1,v=!1;if(Z(h,e=>{let t=nh(e);"a"===e.tagName.toLowerCase()&&(m=e.getAttribute("href"),m=t&&m&&nb(m)&&m),G(ns(e),"ph-no-capture")&&(v=!0),g.push(function(e,t,n,i){let r=e.tagName.toLowerCase(),o={tag_name:r};nd.indexOf(r)>-1&&!n&&("a"===r.toLowerCase()||"button"===r.toLowerCase()?o.$el_text=rk(1024,nw(e)):o.$el_text=rk(1024,nl(e)));let s=ns(e);s.length>0&&(o.classes=s.filter(function(e){return""!==e})),Z(e.attributes,function(n){var r;if((!np(e)||-1!==["name","id","class","aria-label"].indexOf(n.name))&&(null==i||!i.includes(n.name))&&!t&&nb(n.value)&&(!A(r=n.name)||"_ngcontent"!==r.substring(0,10)&&"_nghost"!==r.substring(0,7))){let e=n.value;"class"===n.name&&(e=nr(e).join(" ")),o["attr__"+n.name]=rk(1024,e)}});let a=1,l=1,u=e;for(;u=function(e){if(e.previousElementSibling)return e.previousElementSibling;let t=e;do t=t.previousSibling;while(t&&!ne(t))return t}(u);)a++,u.tagName===e.tagName&&l++;return o.nth_child=a,o.nth_of_type=l,o}(e,a,u,d)),U(f,function(e){if(!nh(e))return{};let t={};return Z(e.attributes,function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){let n=e.name.replace("data-ph-capture-attribute-",""),i=e.value;n&&i&&nb(i)&&(t[n]=i)}}),t}(e))}),v)return{props:{},explicitNoCapture:v};if(u||("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase()?g[0].$el_text=nw(e):g[0].$el_text=nl(e)),m){g[0].attr__href=m;let e=null===(r=e7(m))||void 0===r?void 0:r.host,t=null==l||null===(o=l.location)||void 0===o?void 0:o.host;e&&t&&e!==t&&(_=m)}return{props:U({$event_type:s.type,$ce_version:1},c?{$elements_chain:g.map(e=>{var t,n;let i={text:null===(t=e.$el_text)||void 0===t?void 0:t.slice(0,400),tag_name:e.tag_name,href:null===(n=e.attr__href)||void 0===n?void 0:n.slice(0,2048),attr_class:function(e){let t=e.attr__class;return t?E(t)?t:nr(t):void 0}(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return z(e).filter(e=>{let[t]=e;return 0===t.indexOf("attr__")}).forEach(e=>{let[t,n]=e;return i.attributes[t]=n}),i}).map(e=>{var t,n;let i="";if(e.tag_name&&(i+=e.tag_name),e.attr_class)for(let t of(e.attr_class.sort(),e.attr_class))i+=`.${t.replace(/"/g,"")}`;let r={...e.text?{text:e.text}:{},"nth-child":null!==(t=e.nth_child)&&void 0!==t?t:0,"nth-of-type":null!==(n=e.nth_of_type)&&void 0!==n?n:0,...e.href?{href:e.href}:{},...e.attr_id?{attr_id:e.attr_id}:{},...e.attributes},o={};return z(r).sort((e,t)=>{let[n]=e,[i]=t;return n.localeCompare(i)}).forEach(e=>{let[t,n]=e;return o[nS(t.toString())]=nS(n.toString())}),i+=":",i+=z(r).map(e=>{let[t,n]=e;return`${t}="${n}"`}).join("")}).join(";")}:{$elements:g},null!==(n=g[0])&&void 0!==n&&n.$el_text?{$el_text:null===(i=g[0])||void 0===i?void 0:i.$el_text}:{},_&&"click"===s.type?{$external_click_url:_}:{},f)}}(r,{e:e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString});if(o)return!1;let s=this.getElementSelectors(r);if(s&&s.length>0&&(t.$element_selectors=s),i===rI){let i=na(null==l||null===(n=l.getSelection())||void 0===n?void 0:n.toString()),r=e.type||"clipboard";if(!i)return!1;t.$selected_content=i,t.$copy_type=r}return this.instance.capture(i,t),!0}}isBrowserSupported(){return x(null==g?void 0:g.querySelectorAll)}}class rx{_restoreXHRPatch=void 0;_restoreFetchPatch=void 0;constructor(e){this.instance=e}_loadScript(e){var t,n,i;null!==(t=b.__PosthogExtensions__)&&void 0!==t&&t.tracingHeadersPatchFns&&e(),null===(n=b.__PosthogExtensions__)||void 0===n||null===(i=n.loadExternalDependency)||void 0===i||i.call(n,this.instance,"tracing-headers",t=>{if(t)return B.error("[TRACING-HEADERS] failed to load script",t);e()})}startIfEnabledOrStop(){var e,t;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):(null===(e=this._restoreXHRPatch)||void 0===e||e.call(this),null===(t=this._restoreFetchPatch)||void 0===t||t.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}_startCapturing=()=>{var e,t,n,i;R(this._restoreXHRPatch)&&(null===(e=b.__PosthogExtensions__)||void 0===e||null===(t=e.tracingHeadersPatchFns)||void 0===t||t._patchXHR(this.instance.sessionManager)),R(this._restoreFetchPatch)&&(null===(n=b.__PosthogExtensions__)||void 0===n||null===(i=n.tracingHeadersPatchFns)||void 0===i||i._patchFetch(this.instance.sessionManager))}}(t8=o||(o={}))[t8.PENDING=-1]="PENDING",t8[t8.DENIED=0]="DENIED",t8[t8.GRANTED=1]="GRANTED";class rT{constructor(e){this.instance=e}get config(){return this.instance.config}get consent(){return this.getDnt()?o.DENIED:this.storedConsent}isOptedOut(){return this.consent===o.DENIED||this.consent===o.PENDING&&this.config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.storage.set(this.storageKey,e?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}reset(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}get storageKey(){let{token:e,opt_out_capturing_cookie_prefix:t}=this.instance.config;return(t||"__ph_opt_in_out_")+e}get storedConsent(){let e=this.storage.get(this.storageKey);return"1"===e?o.GRANTED:"0"===e?o.DENIED:o.PENDING}get storage(){if(!this._storage){let e=this.config.opt_out_capturing_persistence_type;this._storage="localStorage"===e?e0:eK;let t="localStorage"===e?eK:e0;t.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut("1"===t.get(this.storageKey)),t.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}getDnt(){return!!this.config.respect_dnt&&!!ee([null==p?void 0:p.doNotTrack,null==p?void 0:p.msDoNotTrack,b.doNotTrack],e=>G([!0,1,"1","yes"],e))}}let rM="[Exception Autocapture]";class rR{originalOnUnhandledRejectionHandler=void 0;constructor(e){var t;this.instance=e,this.remoteEnabled=!(null===(t=this.instance.persistence)||void 0===t||!t.props[es]),this.startIfEnabled()}get isEnabled(){var e;return null!==(e=this.remoteEnabled)&&void 0!==e&&e}get isCapturing(){var e;return!(null==l||null===(e=l.onerror)||void 0===e||!e.__POSTHOG_INSTRUMENTED__)}get hasHandlers(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}startIfEnabled(){this.isEnabled&&!this.isCapturing&&(B.info(rM+" enabled, starting..."),this.loadScript(this.startCapturing))}loadScript(e){var t,n;this.hasHandlers&&e(),null===(t=b.__PosthogExtensions__)||void 0===t||null===(n=t.loadExternalDependency)||void 0===n||n.call(t,this.instance,"exception-autocapture",t=>{if(t)return B.error(rM+" failed to load script",t);e()})}startCapturing=()=>{var e,t,n,i;if(!l||!this.isEnabled||this.hasHandlers||this.isCapturing)return;let r=null===(e=b.__PosthogExtensions__)||void 0===e||null===(t=e.errorWrappingFunctions)||void 0===t?void 0:t.wrapOnError,o=null===(n=b.__PosthogExtensions__)||void 0===n||null===(i=n.errorWrappingFunctions)||void 0===i?void 0:i.wrapUnhandledRejection;if(r&&o)try{this.unwrapOnError=r(this.captureException.bind(this)),this.unwrapUnhandledRejection=o(this.captureException.bind(this))}catch(e){B.error(rM+" failed to start",e),this.stopCapturing()}else B.error(rM+" failed to load error wrapping functions - cannot start")};stopCapturing(){var e,t;null===(e=this.unwrapOnError)||void 0===e||e.call(this),null===(t=this.unwrapUnhandledRejection)||void 0===t||t.call(this)}afterDecideResponse(e){let t=e.autocaptureExceptions;this.remoteEnabled=!!t,this.instance.persistence&&this.instance.persistence.register({[es]:this.remoteEnabled}),this.startIfEnabled()}captureException(e){let t=this.instance.requestRouter.endpointFor("ui");e.$exception_personURL=`${t}/project/${this.instance.config.token}/person/${this.instance.get_distinct_id()}`,this.instance.exceptions.sendExceptionEvent(e)}}let rA="[Web Vitals]";class rN{_enabledServerSide=!1;_initialized=!1;buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0};constructor(e){var t;this.instance=e,this._enabledServerSide=!(null===(t=this.instance.persistence)||void 0===t||!t.props[el]),this.startIfEnabled()}get allowedMetrics(){var e,t;let n=T(this.instance.config.capture_performance)?null===(e=this.instance.config.capture_performance)||void 0===e?void 0:e.web_vitals_allowed_metrics:void 0;return R(n)?(null===(t=this.instance.persistence)||void 0===t?void 0:t.props[ed])||["CLS","FCP","INP","LCP"]:n}get flushToCaptureTimeoutMs(){return(T(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get _maxAllowedValue(){let e=T(this.instance.config.capture_performance)&&P(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:9e5;return 0<e&&e<=6e4?9e5:e}get isEnabled(){let e=T(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return O(e)?e:this._enabledServerSide}startIfEnabled(){this.isEnabled&&!this._initialized&&(B.info(rA+" enabled, starting..."),this.loadScript(this._startCapturing))}afterDecideResponse(e){let t=T(e.capturePerformance)&&!!e.capturePerformance.web_vitals,n=T(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this.instance.persistence&&(this.instance.persistence.register({[el]:t}),this.instance.persistence.register({[ed]:n})),this._enabledServerSide=t,this.startIfEnabled()}loadScript(e){var t,n,i;null!==(t=b.__PosthogExtensions__)&&void 0!==t&&t.postHogWebVitalsCallbacks&&e(),null===(n=b.__PosthogExtensions__)||void 0===n||null===(i=n.loadExternalDependency)||void 0===i||i.call(n,this.instance,"web-vitals",t=>{t?B.error(rA+" failed to load script",t):e()})}_currentURL(){let e=l?l.location.href:void 0;return e||B.error(rA+"Could not determine current URL"),e}_flushToCapture=()=>{clearTimeout(this._delayedFlushTimer),0!==this.buffer.metrics.length&&(this.instance.capture("$web_vitals",this.buffer.metrics.reduce((e,t)=>({...e,[`$web_vitals_${t.name}_event`]:{...t},[`$web_vitals_${t.name}_value`]:t.value}),{})),this.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})};_addToBuffer=e=>{var t;let n=null===(t=this.instance.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0);if(R(n))return void B.error(rA+"Could not read session ID. Dropping metrics!");this.buffer=this.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};let i=this._currentURL();if(!R(i)){if(L(null==e?void 0:e.name)||L(null==e?void 0:e.value))return void B.error(rA+"Invalid metric received",e);if(this._maxAllowedValue&&e.value>=this._maxAllowedValue)return void B.error(rA+"Ignoring metric with value >= "+this._maxAllowedValue,e);this.buffer.url!==i&&(this._flushToCapture(),this._delayedFlushTimer=setTimeout(this._flushToCapture,this.flushToCaptureTimeoutMs)),R(this.buffer.url)&&(this.buffer.url=i),this.buffer.firstMetricTimestamp=R(this.buffer.firstMetricTimestamp)?Date.now():this.buffer.firstMetricTimestamp,e.attribution&&e.attribution.interactionTargetElement&&(e.attribution.interactionTargetElement=void 0),this.buffer.metrics.push({...e,$current_url:i,$session_id:n.sessionId,$window_id:n.windowId,timestamp:Date.now()}),this.buffer.metrics.length===this.allowedMetrics.length&&this._flushToCapture()}};_startCapturing=()=>{let e,t,n,i;let r=b.__PosthogExtensions__;R(r)||R(r.postHogWebVitalsCallbacks)||({onLCP:e,onCLS:t,onFCP:n,onINP:i}=r.postHogWebVitalsCallbacks),e&&t&&n&&i?(this.allowedMetrics.indexOf("LCP")>-1&&e(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&t(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&n(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&i(this._addToBuffer.bind(this)),this._initialized=!0):B.error(rA+"web vitals callbacks not loaded - not starting")}}let rF={icontains:(e,t)=>!!l&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!l&&-1===t.href.toLowerCase().indexOf(e.toLowerCase()),regex:(e,t)=>!!l&&e9(t.href,e),not_regex:(e,t)=>!!l&&!e9(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class rL{constructor(e){this.instance=e,this.instance.onFeatureFlags&&this.instance.onFeatureFlags(e=>{this.applyFeatureFlagChanges(e)}),this._flagToExperiments=new Map}applyFeatureFlagChanges(e){L(this._flagToExperiments)||this.instance.config.disable_web_experiments||(rL.logInfo("applying feature flags",e),e.forEach(e=>{var t,n;if(this._flagToExperiments&&null!==(t=this._flagToExperiments)&&void 0!==t&&t.has(e)){let t=this.instance.getFeatureFlag(e),i=null===(n=this._flagToExperiments)||void 0===n?void 0:n.get(e);t&&null!=i&&i.variants[t]&&this.applyTransforms(i.name,t,i.variants[t].transforms)}}))}afterDecideResponse(e){this._is_bot()?rL.logInfo("Refusing to render web experiment since the viewer is a likely bot"):(this._featureFlags=e.featureFlags,this.loadIfEnabled(),this.previewWebExperiment())}previewWebExperiment(){let e=rL.getWindowLocation();if(null!=e&&e.search){let t=tt(null==e?void 0:e.search,"__experiment_id"),n=tt(null==e?void 0:e.search,"__experiment_variant");t&&n&&(rL.logInfo(`previewing web experiments ${t} && ${n}`),this.getWebExperiments(e=>{this.showPreviewWebExperiment(parseInt(t),n,e)},!1,!0))}}loadIfEnabled(){this.instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperimentsAndEvaluateDisplayLogic=(()=>{var e=this;return function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.getWebExperiments(t=>{rL.logInfo("retrieved web experiments from the server"),e._flagToExperiments=new Map,t.forEach(t=>{if(t.feature_flag_key&&e._featureFlags&&e._featureFlags[t.feature_flag_key]){var n;e._flagToExperiments&&(rL.logInfo("setting flag key ",t.feature_flag_key," to web experiment ",t),null===(n=e._flagToExperiments)||void 0===n||n.set(t.feature_flag_key,t));let i=e._featureFlags[t.feature_flag_key];i&&t.variants[i]&&e.applyTransforms(t.name,i,t.variants[i].transforms)}else if(t.variants)for(let n in t.variants){let i=t.variants[n];rL.matchesTestVariant(i)&&e.applyTransforms(t.name,n,i.transforms)}})},t)}})();getWebExperiments(e,t,n){if(this.instance.config.disable_web_experiments&&!n)return e([]);let i=this.instance.get_property("$web_experiments");if(i&&!t)return e(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api",`/api/web_experiments/?token=${this.instance.config.token}`),method:"GET",transport:"XHR",callback:t=>200===t.statusCode&&t.json?e(t.json.experiments||[]):e([])})}showPreviewWebExperiment(e,t,n){let i=n.filter(t=>t.id===e);i&&i.length>0&&(rL.logInfo(`Previewing web experiment [${i[0].name}] with variant [${t}]`),this.applyTransforms(i[0].name,t,i[0].variants[t].transforms,!0))}static matchesTestVariant(e){return!L(e.conditions)&&rL.matchUrlConditions(e)&&rL.matchUTMConditions(e)}static matchUrlConditions(e){var t,n,i,r;if(L(e.conditions)||L(null===(t=e.conditions)||void 0===t?void 0:t.url))return!0;let o=rL.getWindowLocation();return!!o&&(null===(n=e.conditions)||void 0===n||!n.url||rF[null!==(i=null===(r=e.conditions)||void 0===r?void 0:r.urlMatchType)&&void 0!==i?i:"icontains"](e.conditions.url,o))}static getWindowLocation(){return null==l?void 0:l.location}static matchUTMConditions(e){var t,n,i,r,o,s,a,l,u,d,c,h,p,g,f,_,m;if(L(e.conditions)||L(null===(t=e.conditions)||void 0===t?void 0:t.utm))return!0;let v=tQ.campaignParams();if(v.utm_source){let t=null===(n=e.conditions)||void 0===n||null===(i=n.utm)||void 0===i||!i.utm_campaign||(null===(r=e.conditions)||void 0===r||null===(o=r.utm)||void 0===o?void 0:o.utm_campaign)==v.utm_campaign,y=null===(s=e.conditions)||void 0===s||null===(a=s.utm)||void 0===a||!a.utm_source||(null===(l=e.conditions)||void 0===l||null===(u=l.utm)||void 0===u?void 0:u.utm_source)==v.utm_source,b=null===(d=e.conditions)||void 0===d||null===(c=d.utm)||void 0===c||!c.utm_medium||(null===(h=e.conditions)||void 0===h||null===(p=h.utm)||void 0===p?void 0:p.utm_medium)==v.utm_medium,w=null===(g=e.conditions)||void 0===g||null===(f=g.utm)||void 0===f||!f.utm_term||(null===(_=e.conditions)||void 0===_||null===(m=_.utm)||void 0===m?void 0:m.utm_term)==v.utm_term;return t&&b&&w&&y}return!1}static logInfo(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];B.info(`[WebExperiments] ${e}`,n)}applyTransforms(e,t,n,i){var r;this._is_bot()?rL.logInfo("Refusing to render web experiment since the viewer is a likely bot"):"control"!==t?n.forEach(n=>{if(n.selector){var r,o;rL.logInfo(`applying transform of variant ${t} for experiment ${e} `,n);let s=0,a=null===(r=document)||void 0===r?void 0:r.querySelectorAll(n.selector);null==a||a.forEach(e=>{s+=1,n.attributes&&n.attributes.forEach(t=>{switch(t.name){case"text":e.innerText=t.value;break;case"html":e.innerHTML=t.value;break;case"cssClass":e.className=t.value;break;default:e.setAttribute(t.name,t.value)}}),n.text&&(e.innerText=n.text),n.html&&(e.parentElement?e.parentElement.innerHTML=n.html:e.innerHTML=n.html),n.css&&e.setAttribute("style",n.css)}),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_variant:t,$web_experiment_preview:i,$web_experiment_document_url:null===(o=rL.getWindowLocation())||void 0===o?void 0:o.href,$web_experiment_elements_modified:s})}}):(rL.logInfo("Control variants leave the page unmodified."),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_preview:i,$web_experiment_variant:t,$web_experiment_document_url:null===(r=rL.getWindowLocation())||void 0===r?void 0:r.href,$web_experiment_elements_modified:0}))}_is_bot(){return p&&this.instance?r_(p,this.instance.config.custom_blocked_useragents):void 0}}class rP{constructor(e){var t;this.instance=e,this._endpointSuffix=(null===(t=this.instance.persistence)||void 0===t?void 0:t.props[ea])||"/e/"}get endpoint(){return this.instance.requestRouter.endpointFor("api",this._endpointSuffix)}afterDecideResponse(e){let t=e.autocaptureExceptions;this._endpointSuffix=T(t)&&t.endpoint||"/e/",this.instance.persistence&&this.instance.persistence.register({[ea]:this._endpointSuffix})}sendExceptionEvent(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent",_url:this.endpoint})}}let rO={},rD=()=>{},r$="posthog",rB=!ib&&-1===(null==y?void 0:y.indexOf("MSIE"))&&-1===(null==y?void 0:y.indexOf("Mozilla")),rH=()=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:function(e){let t=null==e?void 0:e.hostname;return!!A(t)&&"herokuapp.com"!==t.split(".").slice(-2).join(".")}(null==g?void 0:g.location),persistence:"localStorage+cookie",persistence_name:"",loaded:rD,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:f&&A(null==f?void 0:f.search)&&-1!==f.search.indexOf("__posthog_debug=true")||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==l||null===(e=l.location)||void 0===e?void 0:e.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:e=>{let t="Bad HTTP status: "+e.statusCode+" "+e.text;B.error(t)},get_device_id:e=>e,_onCapture:rD,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",__add_tracing_headers:!1}},rq=e=>{let t={};R(e.process_person)||(t.person_profiles=e.process_person),R(e.xhr_headers)||(t.request_headers=e.xhr_headers),R(e.cookie_name)||(t.persistence_name=e.cookie_name),R(e.disable_cookie)||(t.disable_persistence=e.disable_cookie);let n=U({},t,e);return E(e.property_blacklist)&&(R(e.property_denylist)?n.property_denylist=e.property_blacklist:E(e.property_denylist)?n.property_denylist=[...e.property_blacklist,...e.property_denylist]:B.error("Invalid value for property_denylist config: "+e.property_denylist)),n};class rW{get _forceAllowLocalhost(){return this.__forceAllowLocalhost}set _forceAllowLocalhost(e){B.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}__forceAllowLocalhost=!1}class rV{webPerformance=new rW;version=w.LIB_VERSION;_internalEventEmitter=new iF;constructor(){this.config=rH(),this.decideEndpointWasHit=!1,this.SentryIntegration=iA,this.sentryIntegration=e=>(function(e,t){let n=iR(e,t);return{name:iM,processEvent:e=>n(e)}})(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._initialPersonProfilesConfig=null,this.featureFlags=new eq(this),this.toolbar=new iv(this),this.scrollManager=new rC(this),this.pageViewManager=new iN(this),this.surveys=new rd(this),this.experiments=new rL(this),this.exceptions=new rP(this),this.rateLimiter=new rc(this),this.requestRouter=new iT(this),this.consent=new rT(this),this.people={set:(e,t,n)=>{let i=A(e)?{[e]:t}:e;this.setPersonProperties(i),null==n||n({})},set_once:(e,t,n)=>{let i=A(e)?{[e]:t}:e;this.setPersonProperties(void 0,i),null==n||n({})}},this.on("eventCaptured",e=>B.info(`send "${null==e?void 0:e.event}"`,e))}init(e,t,n){if(n&&n!==r$){var i;let r=null!==(i=rO[n])&&void 0!==i?i:new rV;return r._init(e,t,n),rO[n]=r,rO[r$][n]=r,r}return this._init(e,t,n)}_init(t){var n,i,r,o,s,a;let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2?arguments[2]:void 0;if(R(t)||N(t))return B.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return B.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],u.person_profiles&&(this._initialPersonProfilesConfig=u.person_profiles),this.set_config(U({},rH(),rq(u),{name:d,token:t})),this.config.on_xhr_error&&B.error("[posthog] on_xhr_error is deprecated. Use on_request_error instead"),this.compression=u.disable_compression?void 0:e.GZipJS,this.persistence=new t1(this.config),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new t1({...this.config,persistence:"sessionStorage"});let c={...this.persistence.props},h={...this.sessionPersistence.props};if(this._requestQueue=new iy(e=>this._send_retriable_request(e)),this._retryQueue=new ik(this),this.__request_queue=[],this.sessionManager=new iE(this.config,this.persistence),this.sessionPropsManager=new rp(this.sessionManager,this.persistence),new rx(this).startIfEnabledOrStop(),this.sessionRecording=new ip(this),this.sessionRecording.startIfEnabledOrStop(),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new rE(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new rS(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new rN(this),this.exceptionObserver=new rR(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new rw(this,rb),this.deadClicksAutocapture.startIfEnabled(),w.DEBUG=w.DEBUG||this.config.debug,w.DEBUG&&B.info("Starting in debug mode",{this:this,config:u,thisC:{...this.config},p:c,s:h}),this._sync_opt_out_with_persistence(),void 0!==(null===(n=u.bootstrap)||void 0===n?void 0:n.distinctID)){let e=this.config.get_device_id(eY()),t=null!==(r=u.bootstrap)&&void 0!==r&&r.isIdentifiedID?e:u.bootstrap.distinctID;this.persistence.set_property(eT,null!==(o=u.bootstrap)&&void 0!==o&&o.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:u.bootstrap.distinctID,$device_id:t})}if(this._hasBootstrappedFeatureFlags()){let e=Object.keys((null===(s=u.bootstrap)||void 0===s?void 0:s.featureFlags)||{}).filter(e=>{var t,n;return!(null===(t=u.bootstrap)||void 0===t||null===(n=t.featureFlags)||void 0===n||!n[e])}).reduce((e,t)=>{var n,i;return e[t]=(null===(n=u.bootstrap)||void 0===n||null===(i=n.featureFlags)||void 0===i?void 0:i[t])||!1,e},{}),t=Object.keys((null===(a=u.bootstrap)||void 0===a?void 0:a.featureFlagPayloads)||{}).filter(t=>e[t]).reduce((e,t)=>{var n,i,r,o;return null!==(n=u.bootstrap)&&void 0!==n&&null!==(i=n.featureFlagPayloads)&&void 0!==i&&i[t]&&(e[t]=null===(r=u.bootstrap)||void 0===r||null===(o=r.featureFlagPayloads)||void 0===o?void 0:o[t]),e},{});this.featureFlags.receivedFeatureFlags({featureFlags:e,featureFlagPayloads:t})}if(!this.get_distinct_id()){let e=this.config.get_device_id(eY());this.register_once({distinct_id:e,$device_id:e},""),this.persistence.set_property(eT,"anonymous")}return null==l||null===(i=l.addEventListener)||void 0===i||i.call(l,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),u.segment?function(e,t){let n=e.config.segment;if(!n)return t();!function(e,t){let n=e.config.segment;if(!n)return t();let i=n=>{let i=()=>n.anonymousId()||eY();e.config.get_device_id=i,n.id()&&(e.register({distinct_id:n.id(),$device_id:i()}),e.persistence.set_property(eT,"identified")),t()},r=n.user();"then"in r&&x(r.then)?r.then(e=>i(e)):i(r)}(e,()=>{n.register((e=>{Promise&&Promise.resolve||B.warn("This browser does not have Promise support, and can not use the segment integration");let t=(t,n)=>{var i;if(!n)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||(B.info("Segment integration does not have a userId set, resetting PostHog"),e.reset()),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(B.info("Segment integration has a userId set, identifying with PostHog"),e.identify(t.event.userId));let r=e._calculate_event_properties(n,null!==(i=t.event.properties)&&void 0!==i?i:{},new Date);return t.event.properties=Object.assign({},r,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:e=>t(e,e.event.event),page:e=>t(e,"$pageview"),identify:e=>t(e,"$identify"),screen:e=>t(e,"$screen")}})(e)).then(()=>{t()})})}(this,()=>this._loaded()):this._loaded(),x(this.config._onCapture)&&this.on("eventCaptured",e=>this.config._onCapture(e.event,e)),this}_afterDecideResponse(t){var n,i,r,o,s,a,l,u,d,c;this.compression=void 0,t.supportedCompression&&!this.config.disable_compression&&(this.compression=G(t.supportedCompression,e.GZipJS)?e.GZipJS:G(t.supportedCompression,e.Base64)?e.Base64:void 0),null!==(n=t.analytics)&&void 0!==n&&n.endpoint&&(this.analyticsDefaultEndpoint=t.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:t.defaultIdentifiedOnly?"identified_only":"always"}),null===(i=this.sessionRecording)||void 0===i||i.afterDecideResponse(t),null===(r=this.autocapture)||void 0===r||r.afterDecideResponse(t),null===(o=this.heatmaps)||void 0===o||o.afterDecideResponse(t),null===(s=this.experiments)||void 0===s||s.afterDecideResponse(t),null===(a=this.surveys)||void 0===a||a.afterDecideResponse(t),null===(l=this.webVitalsAutocapture)||void 0===l||l.afterDecideResponse(t),null===(u=this.exceptions)||void 0===u||u.afterDecideResponse(t),null===(d=this.exceptionObserver)||void 0===d||d.afterDecideResponse(t),null===(c=this.deadClicksAutocapture)||void 0===c||c.afterDecideResponse(t)}_loaded(){let e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(e){B.critical("`loaded` function failed",e)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this._captureInitialPageview()},1),e||(new ig(this).call(),this.featureFlags.resetRequestQueue())}_start_queue_if_opted_in(){var e;this.has_opted_out_capturing()||this.config.request_batching&&(null===(e=this._requestQueue)||void 0===e||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||V(this.__request_queue,e=>this._send_retriable_request(e)),this.__request_queue=[],this._start_queue_if_opted_in()}_handle_unload(){var e,t;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),null===(e=this._requestQueue)||void 0===e||e.unload(),null===(t=this._retryQueue)||void 0===t||t.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(rB?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=iS(e.url,{ip:this.config.ip?1:0}),e.headers={...this.config.request_headers},e.compression="best-available"===e.compression?this.compression:e.compression,(e=>{var t,n,i;let r={...e};r.timeout=r.timeout||6e4,r.url=iS(r.url,{_:(new Date).getTime().toString(),ver:w.LIB_VERSION,compression:r.compression});let o=null!==(t=r.transport)&&void 0!==t?t:"XHR",s=null!==(n=null===(i=ee(iI,e=>e.transport===o))||void 0===i?void 0:i.method)&&void 0!==n?n:iI[0].method;if(!s)throw Error("No available transport method");s(r)})({...e,callback:t=>{var n,i,r;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&(null===(i=(r=this.config).on_request_error)||void 0===i||i.call(r,t)),null===(n=e.callback)||void 0===n||n.call(e,t)}})))}_send_retriable_request(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}_execute_array(e){let t;let n=[],i=[],r=[];V(e,e=>{e&&(E(t=e[0])?r.push(e):x(e)?e.call(this):E(e)&&"alias"===t?n.push(e):E(e)&&-1!==t.indexOf("capture")&&x(this[t])?r.push(e):i.push(e))});let o=function(e,t){V(e,function(e){if(E(e[0])){let n=t;Z(e,function(e){n=n[e[0]].apply(n,e.slice(1))})}else this[e[0]].apply(this,e.slice(1))},t)};o(n,this),o(i,this),o(r,this)}_hasBootstrappedFeatureFlags(){var e,t;return(null===(e=this.config.bootstrap)||void 0===e?void 0:e.featureFlags)&&Object.keys(null===(t=this.config.bootstrap)||void 0===t?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,n){var i,r,o;if(!(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue))return void B.uninitializedWarning("posthog.capture");if(this.consent.isOptedOut())return;if(R(e)||!A(e))return void B.error("No event name provided to posthog.capture");if(!this.config.opt_out_useragent_filter&&this._is_bot())return;let s=null!=n&&n.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null!=s&&s.isRateLimited)return void B.critical("This capture call is ignored due to client rate limiting.");this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.store_google||this.config.save_referrer)&&this.persistence.set_initial_person_info();let a=new Date,l=(null==n?void 0:n.timestamp)||a,u={uuid:eY(),event:e,properties:this._calculate_event_properties(e,t||{},l)};s&&(u.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),(null==n?void 0:n.$set)&&(u.$set=null==n?void 0:n.$set);let d=this._calculate_set_once_properties(null==n?void 0:n.$set_once);d&&(u.$set_once=d),r=u,o=null!=n&&n._noTruncate?null:this.config.properties_string_max_length,(u=function(e,t){let n=new Set;return function e(i,r){let o;return i!==Object(i)?t?t(i,r):i:n.has(i)?void 0:(n.add(i),E(i)?(o=[],V(i,t=>{o.push(e(t))})):(o={},Z(i,(t,i)=>{n.has(t)||(o[i]=e(t,i))})),o)}(e)}(r,e=>A(e)&&!F(o)?e.slice(0,o):e)).timestamp=l,R(null==n?void 0:n.timestamp)||(u.properties.$event_time_override_provided=!0,u.properties.$event_time_override_system_time=a);let c={...u.properties.$set,...u.$set};M(c)||this.setPersonPropertiesForFlags(c),this._internalEventEmitter.emit("eventCaptured",u);let h={method:"POST",url:null!==(i=null==n?void 0:n._url)&&void 0!==i?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:u,compression:"best-available",batchKey:null==n?void 0:n._batchKey};return!this.config.request_batching||n&&(null==n||!n._batchKey)||null!=n&&n.send_instantly?this._send_retriable_request(h):this._requestQueue.enqueue(h),u}_addCaptureHook(e){return this.on("eventCaptured",t=>e(t.event,t))}_calculate_event_properties(e,n,i){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;let r=this.persistence.remove_event_timer(e),o={...n};if(o.token=this.config.token,"$snapshot"===e){let e={...this.persistence.properties(),...this.sessionPersistence.properties()};return o.distinct_id=e.distinct_id,(!A(o.distinct_id)&&!P(o.distinct_id)||N(o.distinct_id))&&B.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),o}let s=tQ.properties();if(this.sessionManager){let{sessionId:e,windowId:t}=this.sessionManager.checkAndGetSessionAndWindowId();o.$session_id=e,o.$window_id=t}if(this.requestRouter.region===t.CUSTOM&&(o.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&("$pageview"===e||"$pageleave"===e||"$autocapture"===e)){let e=this.sessionPropsManager.getSessionProps();o=U(o,e)}if(!this.config.disable_scroll_properties){let t={};"$pageview"===e?t=this.pageViewManager.doPageView(i):"$pageleave"===e&&(t=this.pageViewManager.doPageLeave(i)),o=U(o,t)}if("$pageview"===e&&g&&(o.title=g.title),!R(r)){let e=i.getTime()-r;o.$duration=parseFloat((e/1e3).toFixed(3))}y&&this.config.opt_out_useragent_filter&&(o.$browser_type=this._is_bot()?"bot":"browser"),(o=U({},s,this.persistence.properties(),this.sessionPersistence.properties(),o)).$is_identified=this._isIdentified(),E(this.config.property_denylist)?Z(this.config.property_denylist,function(e){delete o[e]}):B.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);let a=this.config.sanitize_properties;a&&(o=a(o,e));let l=this._hasPersonProcessing();return o.$process_person_profile=l,l&&this._requirePersonProcessing("_calculate_event_properties"),o}_calculate_set_once_properties(e){if(!this.persistence||!this._hasPersonProcessing())return e;let t=U({},this.persistence.get_initial_props(),e||{}),n=this.config.sanitize_properties;return n&&(t=n(t,"$set_once")),M(t)?void 0:t}register(e,t){var n;null===(n=this.persistence)||void 0===n||n.register(e,t)}register_once(e,t,n){var i;null===(i=this.persistence)||void 0===i||i.register_once(e,t,n)}register_for_session(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.register(e)}unregister(e){var t;null===(t=this.persistence)||void 0===t||t.unregister(e)}unregister_for_session(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.unregister(e)}_register_single(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){let t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch{return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,t){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t)}getEarlyAccessFeatures(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,t)}on(e,t){return this._internalEventEmitter.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSessionId(e){var t,n;return null!==(t=null===(n=this.sessionManager)||void 0===n?void 0:n.onSessionId(e))&&void 0!==t?t:()=>{}}getSurveys(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}canRenderSurvey(e){this.surveys.canRenderSurvey(e)}getNextSurveyStep(e,t,n){return this.surveys.getNextSurveyStep(e,t,n)}identify(e,t,n){if(!this.__loaded||!this.persistence)return B.uninitializedWarning("posthog.identify");if(P(e)&&(e=e.toString(),B.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),!e)return void B.error("Unique user id has not been set in posthog.identify");if(["distinct_id","distinctid"].includes(e.toLowerCase()))return void B.critical(`The string "${e}" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.`);if(!this._requirePersonProcessing("posthog.identify"))return;let i=this.get_distinct_id();this.register({$user_id:e}),this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:i},""),e!==i&&e!==this.get_property(en)&&(this.unregister(en),this.register({distinct_id:e}));let r="anonymous"===(this.persistence.get_property(eT)||"anonymous");e!==i&&r?(this.persistence.set_property(eT,"identified"),this.setPersonPropertiesForFlags(t||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:i},{$set:t||{},$set_once:n||{}}),this.featureFlags.setAnonymousDistinctId(i)):(t||n)&&this.setPersonProperties(t,n),e!==i&&(this.reloadFeatureFlags(),this.unregister(ex))}setPersonProperties(e,t){(e||t)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:t||{}}))}group(e,t,n){if(!e||!t)return void B.error("posthog.group requires a group type and group key");if(!this._requirePersonProcessing("posthog.group"))return;let i=this.getGroups();i[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:{...i,[e]:t}}),n&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:n}),this.setGroupPropertiesForFlags({[e]:n})),i[e]===t||n||this.reloadFeatureFlags()}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setPersonPropertiesForFlags")&&this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,n,i,r,o;if(B.info("reset"),!this.__loaded)return B.uninitializedWarning("posthog.reset");let s=this.get_property("$device_id");this.consent.reset(),null===(t=this.persistence)||void 0===t||t.clear(),null===(n=this.sessionPersistence)||void 0===n||n.clear(),null===(i=this.surveys)||void 0===i||i.reset(),null===(r=this.persistence)||void 0===r||r.set_property(eT,"anonymous"),null===(o=this.sessionManager)||void 0===o||o.resetSessionId();let a=this.config.get_device_id(eY());this.register_once({distinct_id:a,$device_id:e?a:s},"")}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return null!==(e=null===(t=this.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";let{sessionId:t,sessionStartTimestamp:n}=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=this.requestRouter.endpointFor("ui",`/project/${this.config.token}/replay/${t}`);if(null!=e&&e.withTimestamp&&n){var r;let t=null!==(r=e.timestampLookBack)&&void 0!==r?r:10;if(!n)return i;i+=`?t=${Math.max(Math.floor(((new Date).getTime()-n)/1e3)-t,0)}`}return i}alias(e,t){return e===this.get_property(et)?(B.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(R(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(en,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(B.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t,n,i,r;let o={...this.config};T(e)&&(U(this.config,rq(e)),null===(t=this.persistence)||void 0===t||t.update_config(this.config,o),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new t1({...this.config,persistence:"sessionStorage"}),e0.is_supported()&&"true"===e0.get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(w.DEBUG=!0,B.info("set_config",{config:e,oldConfig:o,newConfig:{...this.config}})),null===(n=this.sessionRecording)||void 0===n||n.startIfEnabledOrStop(),null===(i=this.autocapture)||void 0===i||i.startIfEnabled(),null===(r=this.heatmaps)||void 0===r||r.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}startSessionRecording(e){let t=!0===e,n={sampling:t||!(null==e||!e.sampling),linked_flag:t||!(null==e||!e.linked_flag),url_trigger:t||!(null==e||!e.url_trigger),event_trigger:t||!(null==e||!e.event_trigger)};if(Object.values(n).some(Boolean)){var i,r,o,s,a;null===(i=this.sessionManager)||void 0===i||i.checkAndGetSessionAndWindowId(),n.sampling&&(null===(r=this.sessionRecording)||void 0===r||r.overrideSampling()),n.linked_flag&&(null===(o=this.sessionRecording)||void 0===o||o.overrideLinkedFlag()),n.url_trigger&&(null===(s=this.sessionRecording)||void 0===s||s.overrideTrigger("url")),n.event_trigger&&(null===(a=this.sessionRecording)||void 0===a||a.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!(null===(e=this.sessionRecording)||void 0===e||!e.started)}captureException(e,t){var n;let i=Error("PostHog syntheticException"),r=x(null===(n=b.__PosthogExtensions__)||void 0===n?void 0:n.parseErrorAsProperties)?b.__PosthogExtensions__.parseErrorAsProperties([e.message,void 0,void 0,void 0,e],{syntheticException:i}):{$exception_level:"error",$exception_list:[{type:e.name,value:e.message,mechanism:{handled:!0,synthetic:!1}}],...t};this.exceptions.sendExceptionEvent(r)}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return null===(t=this.persistence)||void 0===t?void 0:t.props[e]}getSessionProperty(e){var t;return null===(t=this.sessionPersistence)||void 0===t?void 0:t.props[e]}toString(){var e;let t=null!==(e=this.config.name)&&void 0!==e?e:r$;return t!==r$&&(t=r$+"."+t),t}_isIdentified(){var e,t;return"identified"===(null===(e=this.persistence)||void 0===e?void 0:e.get_property(eT))||"identified"===(null===(t=this.sessionPersistence)||void 0===t?void 0:t.get_property(eT))}_hasPersonProcessing(){var e,t,n,i;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&M(this.getGroups())&&(null===(e=this.persistence)||void 0===e||null===(t=e.props)||void 0===t||!t[en])&&(null===(n=this.persistence)||void 0===n||null===(i=n.props)||void 0===i||!i[eL]))}_shouldCapturePageleave(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&this.config.capture_pageview}createPersonProfile(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}_requirePersonProcessing(e){return"never"===this.config.person_profiles?(B.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(eL,!0),!0)}_sync_opt_out_with_persistence(){var e,t,n,i;let r=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,s=this.config.disable_persistence||r&&!!o;(null===(e=this.persistence)||void 0===e?void 0:e.disabled)!==s&&(null===(n=this.persistence)||void 0===n||n.set_disabled(s)),(null===(t=this.sessionPersistence)||void 0===t?void 0:t.disabled)!==s&&(null===(i=this.sessionPersistence)||void 0===i||i.set_disabled(s))}opt_in_capturing(e){var t;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(R(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)&&this.capture(null!==(t=null==e?void 0:e.captureEventName)&&void 0!==t?t:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}opt_out_capturing(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._sync_opt_out_with_persistence()}_is_bot(){return p?r_(p,this.config.custom_blocked_useragents):void 0}_captureInitialPageview(){g&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:g.title},{send_instantly:!0}))}debug(e){!1===e?(null==l||l.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==l||l.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}!function(e,t){for(let n=0;n<t.length;n++)e.prototype[t[n]]=j(e.prototype[t[n]])}(rV,["identify"]),(function(){let e=rO[r$]=new rV;return function(){function e(){e.done||(e.done=!0,rB=!1,Z(rO,function(e){e._dom_loaded()}))}null!=g&&g.addEventListener&&("complete"===g.readyState?e():g.addEventListener("DOMContentLoaded",e,!1)),l&&Q(l,"load",e,!0)}(),e})().init("phc_3r2LNsBz7zJFRSpcMmE4PwXEq2m4CwfxJC9H1OeeMJg",{api_host:"https://eu.i.posthog.com",disable_external_dependency_loading:!0})})();
//# sourceMappingURL=posthog.js.map
